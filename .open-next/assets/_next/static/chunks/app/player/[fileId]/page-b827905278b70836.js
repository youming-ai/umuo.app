(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Toaster:()=>x,toast:()=>y,useSonner:()=>_});var n=r(488),a=r(6665);let i=Array(12).fill(0),o=e=>{let{visible:t,className:r}=e;return n.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":t},n.createElement("div",{className:"sonner-spinner"},i.map((e,t)=>n.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(t)}))))},s=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),u=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),c=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),d=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),p=1;class f{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:p++,i=this.toasts.find(e=>e.id===a),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:r}),{...t,...e,id:a,dismissible:o,title:r}):t):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{let r,a;if(!t)return;void 0!==t.loading&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let i=Promise.resolve(e instanceof Function?e():e),o=void 0!==a,s=i.then(async e=>{if(r=["resolve",e],n.isValidElement(e))o=!1,this.create({id:a,type:"default",message:e});else if(m(e)&&!e.ok){o=!1;let r="function"==typeof t.error?await t.error("HTTP error! status: ".concat(e.status)):t.error,i="function"==typeof t.description?await t.description("HTTP error! status: ".concat(e.status)):t.description,s="object"!=typeof r||n.isValidElement(r)?{message:r}:r;this.create({id:a,type:"error",description:i,...s})}else if(e instanceof Error){o=!1;let r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"!=typeof r||n.isValidElement(r)?{message:r}:r;this.create({id:a,type:"error",description:i,...s})}else if(void 0!==t.success){o=!1;let r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,s="object"!=typeof r||n.isValidElement(r)?{message:r}:r;this.create({id:a,type:"success",description:i,...s})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){o=!1;let r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"!=typeof r||n.isValidElement(r)?{message:r}:r;this.create({id:a,type:"error",description:i,...s})}}).finally(()=>{o&&(this.dismiss(a),a=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>s.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof a&&"number"!=typeof a?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||p++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}let h=new f,m=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,y=Object.assign((e,t)=>{let r=(null==t?void 0:t.id)||p++;return h.addToast({title:e,...t,id:r}),r},{success:h.success,info:h.info,warning:h.warning,error:h.error,custom:h.custom,message:h.message,promise:h.promise,dismiss:h.dismiss,loading:h.loading},{getHistory:()=>h.toasts,getToasts:()=>h.getActiveToasts()});function g(e){return void 0!==e.label}function v(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let b=e=>{var t,r,a,i,p,f,h,m,y,b,w;let{invert:_,toast:x,unstyled:k,interacting:E,setHeights:I,visibleToasts:T,heights:S,index:O,toasts:A,expanded:N,removeToast:j,defaultRichColors:C,closeButton:R,style:P,cancelButtonStyle:z,actionButtonStyle:M,className:$="",descriptionClassName:D="",duration:F,position:L,gap:Z,expandByDefault:B,classNames:U,icons:q,closeButtonAriaLabel:K="Close toast"}=e,[V,G]=n.useState(null),[W,J]=n.useState(null),[Q,Y]=n.useState(!1),[H,X]=n.useState(!1),[ee,et]=n.useState(!1),[er,en]=n.useState(!1),[ea,ei]=n.useState(!1),[eo,es]=n.useState(0),[el,eu]=n.useState(0),ec=n.useRef(x.duration||F||4e3),ed=n.useRef(null),ep=n.useRef(null),ef=0===O,eh=O+1<=T,em=x.type,ey=!1!==x.dismissible,eg=x.className||"",ev=x.descriptionClassName||"",eb=n.useMemo(()=>S.findIndex(e=>e.toastId===x.id)||0,[S,x.id]),ew=n.useMemo(()=>{var e;return null!=(e=x.closeButton)?e:R},[x.closeButton,R]),e_=n.useMemo(()=>x.duration||F||4e3,[x.duration,F]),ex=n.useRef(0),ek=n.useRef(0),eE=n.useRef(0),eI=n.useRef(null),[eT,eS]=L.split("-"),eO=n.useMemo(()=>S.reduce((e,t,r)=>r>=eb?e:e+t.height,0),[S,eb]),eA=(()=>{let[e,t]=n.useState(document.hidden);return n.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),eN=x.invert||_,ej="loading"===em;ek.current=n.useMemo(()=>eb*Z+eO,[eb,eO]),n.useEffect(()=>{ec.current=e_},[e_]),n.useEffect(()=>{Y(!0)},[]),n.useEffect(()=>{let e=ep.current;if(e){let t=e.getBoundingClientRect().height;return eu(t),I(e=>[{toastId:x.id,height:t,position:x.position},...e]),()=>I(e=>e.filter(e=>e.toastId!==x.id))}},[I,x.id]),n.useLayoutEffect(()=>{if(!Q)return;let e=ep.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,eu(r),I(e=>e.find(e=>e.toastId===x.id)?e.map(e=>e.toastId===x.id?{...e,height:r}:e):[{toastId:x.id,height:r,position:x.position},...e])},[Q,x.title,x.description,I,x.id,x.jsx,x.action,x.cancel]);let eC=n.useCallback(()=>{X(!0),es(ek.current),I(e=>e.filter(e=>e.toastId!==x.id)),setTimeout(()=>{j(x)},200)},[x,j,I,ek]);n.useEffect(()=>{let e;if((!x.promise||"loading"!==em)&&x.duration!==1/0&&"loading"!==x.type)return N||E||eA?(()=>{if(eE.current<ex.current){let e=new Date().getTime()-ex.current;ec.current=ec.current-e}eE.current=new Date().getTime()})():ec.current!==1/0&&(ex.current=new Date().getTime(),e=setTimeout(()=>{null==x.onAutoClose||x.onAutoClose.call(x,x),eC()},ec.current)),()=>clearTimeout(e)},[N,E,x,em,eA,eC]),n.useEffect(()=>{x.delete&&(eC(),null==x.onDismiss||x.onDismiss.call(x,x))},[eC,x.delete]);let eR=x.icon||(null==q?void 0:q[em])||(e=>{switch(e){case"success":return s;case"info":return u;case"warning":return l;case"error":return c;default:return null}})(em);return n.createElement("li",{tabIndex:0,ref:ep,className:v($,eg,null==U?void 0:U.toast,null==x||null==(t=x.classNames)?void 0:t.toast,null==U?void 0:U.default,null==U?void 0:U[em],null==x||null==(r=x.classNames)?void 0:r[em]),"data-sonner-toast":"","data-rich-colors":null!=(b=x.richColors)?b:C,"data-styled":!(x.jsx||x.unstyled||k),"data-mounted":Q,"data-promise":!!x.promise,"data-swiped":ea,"data-removed":H,"data-visible":eh,"data-y-position":eT,"data-x-position":eS,"data-index":O,"data-front":ef,"data-swiping":ee,"data-dismissible":ey,"data-type":em,"data-invert":eN,"data-swipe-out":er,"data-swipe-direction":W,"data-expanded":!!(N||B&&Q),"data-testid":x.testId,style:{"--index":O,"--toasts-before":O,"--z-index":A.length-O,"--offset":"".concat(H?eo:ek.current,"px"),"--initial-height":B?"auto":"".concat(el,"px"),...P,...x.style},onDragEnd:()=>{et(!1),G(null),eI.current=null},onPointerDown:e=>{2!==e.button&&!ej&&ey&&(ed.current=new Date,es(ek.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(et(!0),eI.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,n,a;if(er||!ey)return;eI.current=null;let i=Number((null==(e=ep.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),o=Number((null==(t=ep.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),s=new Date().getTime()-(null==(r=ed.current)?void 0:r.getTime()),l="x"===V?i:o,u=Math.abs(l)/s;if(Math.abs(l)>=45||u>.11){es(ek.current),null==x.onDismiss||x.onDismiss.call(x,x),"x"===V?J(i>0?"right":"left"):J(o>0?"down":"up"),eC(),en(!0);return}null==(n=ep.current)||n.style.setProperty("--swipe-amount-x","0px"),null==(a=ep.current)||a.style.setProperty("--swipe-amount-y","0px"),ei(!1),et(!1),G(null)},onPointerMove:t=>{var r,n,a,i;if(!eI.current||!ey||(null==(r=window.getSelection())?void 0:r.toString().length)>0)return;let o=t.clientY-eI.current.y,s=t.clientX-eI.current.x,l=null!=(i=e.swipeDirections)?i:function(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}(L);!V&&(Math.abs(s)>1||Math.abs(o)>1)&&G(Math.abs(s)>Math.abs(o)?"x":"y");let u={x:0,y:0},c=e=>1/(1.5+Math.abs(e)/20);if("y"===V){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&o<0||l.includes("bottom")&&o>0)u.y=o;else{let e=o*c(o);u.y=Math.abs(e)<Math.abs(o)?e:o}}else if("x"===V&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&s<0||l.includes("right")&&s>0)u.x=s;else{let e=s*c(s);u.x=Math.abs(e)<Math.abs(s)?e:s}(Math.abs(u.x)>0||Math.abs(u.y)>0)&&ei(!0),null==(n=ep.current)||n.style.setProperty("--swipe-amount-x","".concat(u.x,"px")),null==(a=ep.current)||a.style.setProperty("--swipe-amount-y","".concat(u.y,"px"))}},ew&&!x.jsx&&"loading"!==em?n.createElement("button",{"aria-label":K,"data-disabled":ej,"data-close-button":!0,onClick:ej||!ey?()=>{}:()=>{eC(),null==x.onDismiss||x.onDismiss.call(x,x)},className:v(null==U?void 0:U.closeButton,null==x||null==(a=x.classNames)?void 0:a.closeButton)},null!=(w=null==q?void 0:q.close)?w:d):null,(em||x.icon||x.promise)&&null!==x.icon&&((null==q?void 0:q[em])!==null||x.icon)?n.createElement("div",{"data-icon":"",className:v(null==U?void 0:U.icon,null==x||null==(i=x.classNames)?void 0:i.icon)},x.promise||"loading"===x.type&&!x.icon?x.icon||function(){var e,t;return(null==q?void 0:q.loading)?n.createElement("div",{className:v(null==U?void 0:U.loader,null==x||null==(t=x.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===em},q.loading):n.createElement(o,{className:v(null==U?void 0:U.loader,null==x||null==(e=x.classNames)?void 0:e.loader),visible:"loading"===em})}():null,"loading"!==x.type?eR:null):null,n.createElement("div",{"data-content":"",className:v(null==U?void 0:U.content,null==x||null==(p=x.classNames)?void 0:p.content)},n.createElement("div",{"data-title":"",className:v(null==U?void 0:U.title,null==x||null==(f=x.classNames)?void 0:f.title)},x.jsx?x.jsx:"function"==typeof x.title?x.title():x.title),x.description?n.createElement("div",{"data-description":"",className:v(D,ev,null==U?void 0:U.description,null==x||null==(h=x.classNames)?void 0:h.description)},"function"==typeof x.description?x.description():x.description):null),n.isValidElement(x.cancel)?x.cancel:x.cancel&&g(x.cancel)?n.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||z,onClick:e=>{g(x.cancel)&&ey&&(null==x.cancel.onClick||x.cancel.onClick.call(x.cancel,e),eC())},className:v(null==U?void 0:U.cancelButton,null==x||null==(m=x.classNames)?void 0:m.cancelButton)},x.cancel.label):null,n.isValidElement(x.action)?x.action:x.action&&g(x.action)?n.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||M,onClick:e=>{g(x.action)&&(null==x.action.onClick||x.action.onClick.call(x.action,e),e.defaultPrevented||eC())},className:v(null==U?void 0:U.actionButton,null==x||null==(y=x.classNames)?void 0:y.actionButton)},x.action.label):null)};function w(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function _(){let[e,t]=n.useState([]);return n.useEffect(()=>h.subscribe(e=>{if(e.dismiss)return void setTimeout(()=>{a.flushSync(()=>{t(t=>t.filter(t=>t.id!==e.id))})});setTimeout(()=>{a.flushSync(()=>{t(t=>{let r=t.findIndex(t=>t.id===e.id);return -1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[]),{toasts:e}}let x=n.forwardRef(function(e,t){let{id:r,invert:i,position:o="bottom-right",hotkey:s=["altKey","KeyT"],expand:l,closeButton:u,className:c,offset:d,mobileOffset:p,theme:f="light",richColors:m,duration:y,style:g,visibleToasts:v=3,toastOptions:_,dir:x=w(),gap:k=14,icons:E,containerAriaLabel:I="Notifications"}=e,[T,S]=n.useState([]),O=n.useMemo(()=>r?T.filter(e=>e.toasterId===r):T.filter(e=>!e.toasterId),[T,r]),A=n.useMemo(()=>Array.from(new Set([o].concat(O.filter(e=>e.position).map(e=>e.position)))),[O,o]),[N,j]=n.useState([]),[C,R]=n.useState(!1),[P,z]=n.useState(!1),[M,$]=n.useState("system"!==f?f:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=n.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=n.useRef(null),Z=n.useRef(!1),B=n.useCallback(e=>{S(t=>{var r;return(null==(r=t.find(t=>t.id===e.id))?void 0:r.delete)||h.dismiss(e.id),t.filter(t=>{let{id:r}=t;return r!==e.id})})},[]);return n.useEffect(()=>h.subscribe(e=>{if(e.dismiss)return void requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))});setTimeout(()=>{a.flushSync(()=>{S(t=>{let r=t.findIndex(t=>t.id===e.id);return -1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[T]),n.useEffect(()=>{if("system"!==f)return void $(f);if("system"===f&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;t?$("dark"):$("light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{t?$("dark"):$("light")}catch(e){console.error(e)}})}},[f]),n.useEffect(()=>{T.length<=1&&R(!1)},[T]),n.useEffect(()=>{let e=e=>{var t,r;s.every(t=>e[t]||e.code===t)&&(R(!0),null==(r=D.current)||r.focus()),"Escape"===e.code&&(document.activeElement===D.current||(null==(t=D.current)?void 0:t.contains(document.activeElement)))&&R(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),n.useEffect(()=>{if(D.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,Z.current=!1)}},[D.current]),n.createElement("section",{ref:t,"aria-label":"".concat(I," ").concat(F),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((t,r)=>{var a;let[o,s]=t.split("-");return O.length?n.createElement("ol",{key:t,dir:"auto"===x?w():x,tabIndex:-1,ref:D,className:c,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":o,"data-x-position":s,style:{"--front-toast-height":"".concat((null==(a=N[0])?void 0:a.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(k,"px"),...g,...function(e,t){let r={};return[e,t].forEach((e,t)=>{let n=1===t,a=n?"--mobile-offset":"--offset",i=n?"16px":"24px";function o(e){["top","right","bottom","left"].forEach(t=>{r["".concat(a,"-").concat(t)]="number"==typeof e?"".concat(e,"px"):e})}"number"==typeof e||"string"==typeof e?o(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?r["".concat(a,"-").concat(t)]=i:r["".concat(a,"-").concat(t)]="number"==typeof e[t]?"".concat(e[t],"px"):e[t]}):o(i)}),r}(d,p)},onBlur:e=>{Z.current&&!e.currentTarget.contains(e.relatedTarget)&&(Z.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{!(e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible)&&(Z.current||(Z.current=!0,L.current=e.relatedTarget))},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{P||R(!1)},onDragEnd:()=>R(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z(!0)},onPointerUp:()=>z(!1)},O.filter(e=>!e.position&&0===r||e.position===t).map((r,a)=>{var o,s;return n.createElement(b,{key:r.id,icons:E,index:a,toast:r,defaultRichColors:m,duration:null!=(o=null==_?void 0:_.duration)?o:y,className:null==_?void 0:_.className,descriptionClassName:null==_?void 0:_.descriptionClassName,invert:i,visibleToasts:v,closeButton:null!=(s=null==_?void 0:_.closeButton)?s:u,interacting:P,position:t,style:null==_?void 0:_.style,unstyled:null==_?void 0:_.unstyled,classNames:null==_?void 0:_.classNames,cancelButtonStyle:null==_?void 0:_.cancelButtonStyle,actionButtonStyle:null==_?void 0:_.actionButtonStyle,closeButtonAriaLabel:null==_?void 0:_.closeButtonAriaLabel,removeToast:B,toasts:O.filter(e=>e.position==r.position),heights:N.filter(e=>e.position==r.position),setHeights:j,expandByDefault:l,gap:k,expanded:C,swipeDirections:e.swipeDirections})})):null}))})},693:(e,t,r)=>{"use strict";function n(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{$:()=>n})},1002:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7020).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1061:function(e,t,r){e.exports=function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function r(e,t,r){if(r||2==arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}var n="undefined"!=typeof globalThis?globalThis:window,a=Object.keys,i=Array.isArray;function o(e,t){return"object"!=typeof t||a(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var s=Object.getPrototypeOf,l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(r){p(e,r,t[r])})}var d=Object.defineProperty;function p(e,t,r,n){d(e,t,o(r&&u(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor,m=[].slice;function y(e,t,r){return m.call(e,t,r)}function g(e,t){return t(e)}function v(e){if(!e)throw Error("Assertion Failed")}function b(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,a=t.length;n<a;++n){var i=w(e,t[n]);r.push(i)}return r}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return null==s?void 0:w(s,t.substr(o+1))}}function _(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof r&&"length"in r);for(var n=0,a=t.length;n<a;++n)_(e,t[n],r[n])}else{var o,s,l=t.indexOf(".");-1!==l?(o=t.substr(0,l),""===(s=t.substr(l+1))?void 0===r?i(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r:_(l=(l=e[o])&&u(e,o)?l:e[o]={},s,r)):void 0===r?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function x(e){var t,r={};for(t in e)u(e,t)&&(r[t]=e[t]);return r}var k=[].concat;function E(e){return k.apply([],e)}var I="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return n[e]}),T=new Set(I.map(function(e){return n[e]})),S=null;function O(e){return S=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=S.get(t);if(r)return r;if(i(t)){r=[],S.set(t,r);for(var n=0,a=t.length;n<a;++n)r.push(e(t[n]))}else if(T.has(t.constructor))r=t;else{var o,l=s(t);for(o in r=l===Object.prototype?{}:Object.create(l),S.set(t,r),t)u(t,o)&&(r[o]=e(t[o]))}return r}(e),S=null,e}var A={}.toString;function N(e){return A.call(e).slice(8,-1)}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",C="symbol"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null};function R(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var P={};function z(e){var t,r,n,a;if(1==arguments.length){if(i(e))return e.slice();if(this===P&&"string"==typeof e)return[e];if(a=C(e)){for(r=[];!(n=a.next()).done;)r.push(n.value);return r}if(null==e||"number"!=typeof(t=e.length))return[e];for(r=Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return r}var M="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},$=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],D=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function L(e,t){this.name=e,this.message=t}function Z(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function B(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=Z(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=Z(e,this.failures)}f(L).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(B).from(L),f(U).from(L);var q=D.reduce(function(e,t){return e[t]=t+"Error",e},{}),K=D.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=F[t]||r,this.inner=null)}return f(n).from(L),e[t]=n,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var V=$.reduce(function(e,t){return e[t+"Error"]=K[t],e},{}),G=D.reduce(function(e,t){return -1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function W(){}function J(e){return e}function Q(e,t){return null==e||e===J?t:function(r){return t(e(r))}}function Y(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function H(e,t){return e===W?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Y(n,this.onsuccess):n),a&&(this.onerror=this.onerror?Y(a,this.onerror):a),void 0!==i?i:r}}function X(e,t){return e===W?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Y(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Y(n,this.onerror):n)}}function ee(e,t){return e===W?t:function(r){var n=e.apply(this,arguments);o(r,n);var a=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Y(a,this.onsuccess):a),i&&(this.onerror=this.onerror?Y(i,this.onerror):i),void 0===n?void 0===r?void 0:r:o(n,r)}}function et(e,t){return e===W?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function er(e,t){return e===W?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,a=arguments.length,i=Array(a);a--;)i[a]=arguments[a];return r.then(function(){return t.apply(n,i)})}return t.apply(this,arguments)}}G.ModifyError=B,G.DexieError=L,G.BulkError=U;var en="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),ea={},I="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]}(),$=I[0],D=I[1],I=I[2],D=D&&D.then,ei=$&&$.constructor,eo=!!I,es=function(e,t){em.push([e,t]),eu&&(queueMicrotask(eI),eu=!1)},el=!0,eu=!0,ec=[],ed=[],ep=J,ef={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:W,pgp:!1,env:{},finalize:W},eh=ef,em=[],ey=0,eg=[];function ev(e){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=eh;if("function"!=typeof e){if(e!==ea)throw TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&e_(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw TypeError("A promise cannot be resolved with itself.");var n=t._lib&&eT();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof ev?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,ex(t)),n&&eS()}},e_.bind(null,t))}catch(e){e_(t,e)}}(this,e)}var eb={get:function(){var e=eh,t=ez;function r(r,n){var a=this,i=!e.global&&(e!==eh||t!==ez),o=i&&!eF(),s=new ev(function(t,s){ek(a,new ew(eK(r,e,i,o),eK(n,e,i,o),t,s,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return r.prototype=ea,r},set:function(e){p(this,"then",e&&e.prototype===ea?eb:{get:function(){return e},set:eb.set})}};function ew(e,t,r,n,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=a}function e_(e,t){var r;ed.push(t),null===e._state&&(r=e._lib&&eT(),t=ep(t),e._state=!1,e._value=t,ec.some(function(t){return t._value===e._value})||ec.push(e),ex(e),r&&eS())}function ex(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)ek(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),0===ey&&(++ey,es(function(){0==--ey&&eO()},[]))}function ek(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ey,es(eE,[r,e,t])}else e._listeners.push(t)}function eE(e,t,r){try{var n,a=t._value;!t._state&&ed.length&&(ed=[]),n=en&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==ed.indexOf(a)||function(e){for(var t=ec.length;t;)if(ec[--t]._value===e._value)return ec.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--ey&&eO(),--r.psd.ref||r.psd.finalize()}}function eI(){eq(ef,function(){eT()&&eS()})}function eT(){var e=el;return eu=el=!1,e}function eS(){var e,t,r;do for(;0<em.length;)for(e=em,em=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(0<em.length);eu=el=!0}function eO(){var e=ec;ec=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=eg.slice(0),r=t.length;r;)t[--r]()}function eA(e){return new ev(ea,!1,e)}function eN(e,t){var r=eh;return function(){var n=eT(),a=eh;try{return eB(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{eB(a,!1),n&&eS()}}}c(ev.prototype,{then:eb,_then:function(e,t){ek(this,new ew(null,null,e,t,eh))},catch:function(e){if(1==arguments.length)return this.then(null,e);var t=arguments[1];return"function"==typeof e?this.then(null,function(r){return(r instanceof e?t:eA)(r)}):this.then(null,function(r){return(r&&r.name===e?t:eA)(r)})},finally:function(e){return this.then(function(t){return ev.resolve(e()).then(function(){return t})},function(t){return ev.resolve(e()).then(function(){return eA(t)})})},timeout:function(e,t){var r=this;return e<1/0?new ev(function(n,a){var i=setTimeout(function(){return a(new K.Timeout(t))},e);r.then(n,a).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(ev.prototype,Symbol.toStringTag,"Dexie.Promise"),ef.env=eU(),c(ev,{all:function(){var e=z.apply(null,arguments).map(eL);return new ev(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(a,i){return ev.resolve(a).then(function(r){e[i]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof ev?e:e&&"function"==typeof e.then?new ev(function(t,r){e.then(t,r)}):new ev(ea,!0,e)},reject:eA,race:function(){var e=z.apply(null,arguments).map(eL);return new ev(function(t,r){e.map(function(e){return ev.resolve(e).then(t,r)})})},PSD:{get:function(){return eh},set:function(e){return eh=e}},totalEchoes:{get:function(){return ez}},newPSD:e$,usePSD:eq,scheduler:{get:function(){return es},set:function(e){es=e}},rejectionMapper:{get:function(){return ep},set:function(e){ep=e}},follow:function(e,t){return new ev(function(r,n){return e$(function(t,r){var n=eh;n.unhandleds=[],n.onunhandled=r,n.finalize=Y(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},eg.push(function t(){e(),eg.splice(eg.indexOf(t),1)}),++ey,es(function(){0==--ey&&eO()},[])},n.finalize),e()},t,r,n)})}}),ei&&(ei.allSettled&&p(ev,"allSettled",function(){var e=z.apply(null,arguments).map(eL);return new ev(function(t){0===e.length&&t([]);var r=e.length,n=Array(r);e.forEach(function(e,a){return ev.resolve(e).then(function(e){return n[a]={status:"fulfilled",value:e}},function(e){return n[a]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ei.any&&"undefined"!=typeof AggregateError&&p(ev,"any",function(){var e=z.apply(null,arguments).map(eL);return new ev(function(t,r){0===e.length&&r(AggregateError([]));var n=e.length,a=Array(n);e.forEach(function(e,i){return ev.resolve(e).then(function(e){return t(e)},function(e){a[i]=e,--n||r(AggregateError(a))})})})}),ei.withResolvers&&(ev.withResolvers=ei.withResolvers));var ej={awaits:0,echoes:0,id:0},eC=0,eR=[],eP=0,ez=0,eM=0;function e$(e,t,r,n){var a=eh,i=Object.create(a);return i.parent=a,i.ref=0,i.global=!1,i.id=++eM,ef.env,i.env=eo?{Promise:ev,PromiseProp:{value:ev,configurable:!0,writable:!0},all:ev.all,race:ev.race,allSettled:ev.allSettled,any:ev.any,resolve:ev.resolve,reject:ev.reject}:{},t&&o(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},n=eq(i,e,r,n),0===i.ref&&i.finalize(),n}function eD(){return ej.id||(ej.id=++eC),++ej.awaits,ej.echoes+=100,ej.id}function eF(){return!!ej.awaits&&(0==--ej.awaits&&(ej.id=0),ej.echoes=100*ej.awaits,!0)}function eL(e){return ej.echoes&&e&&e.constructor===ei?(eD(),e.then(function(e){return eF(),e},function(e){return eF(),eG(e)})):e}function eZ(){var e=eR[eR.length-1];eR.pop(),eB(e,!1)}function eB(e,t){var r,a=eh;(t?!ej.echoes||eP++&&e===eh:!eP||--eP&&e===eh)||queueMicrotask(t?(function(e){++ez,ej.echoes&&0!=--ej.echoes||(ej.echoes=ej.awaits=ej.id=0),eR.push(eh),eB(e,!0)}).bind(null,e):eZ),e!==eh&&(eh=e,a===ef&&(ef.env=eU()),eo&&(r=ef.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(n,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function eU(){var e=n.Promise;return eo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function eq(e,t,r,n,a){var i=eh;try{return eB(e,!0),t(r,n,a)}finally{eB(i,!1)}}function eK(e,t,r,n){return"function"!=typeof e?e:function(){var a=eh;r&&eD(),eB(t,!0);try{return e.apply(this,arguments)}finally{eB(a,!1),n&&queueMicrotask(eF)}}}function eV(e){Promise===ei&&0===ej.echoes?0===eP?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+D).indexOf("[native code]")&&(eD=eF=W);var eG=ev.reject,eW=String.fromCharCode(65535),eJ="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eQ="String expected.",eY=[],eH="__dbnames",eX="readonly",e0="readwrite";function e1(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var e2={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function e4(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=O(t))[e],t}}function e5(){throw K.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function e9(e,t){try{var r=e6(e),n=e6(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,i=0;i<a;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return r===n?0:r<n?-1:1}(e3(e),e3(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,i=0;i<a;++i){var o=e9(e[i],t[i]);if(0!==o)return o}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function e6(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=N(e))?"binary":e}function e3(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function e8(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var e7=(te.prototype._trans=function(e,t,r){var n=this._tx||eh.trans,a=this.name,i=en&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function o(e,r,n){if(!n.schema[a])throw new K.NotFound("Table "+a+" not part of transaction");return t(n.idbtrans,n)}var s=eT();try{var l=n&&n.db._novip===this.db._novip?n===eh.trans?n._promise(e,o,r):e$(function(){return n._promise(e,o,r)},{trans:n,transless:eh.transless||eh}):function e(t,r,n,a){if(t.idbdb&&(t._state.openComplete||eh.letThrough||t._vip)){var i=t._createTransaction(r,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,a)})):eG(i)}return i._promise(r,function(e,t){return e$(function(){return eh.trans=i,a(e,t,i)})}).then(function(e){if("readwrite"===r)try{i.idbtrans.commit()}catch(e){}return"readonly"===r?e:i._completion.then(function(){return e})})}if(t._state.openComplete)return eG(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return eG(new K.DatabaseClosed);t.open().catch(W)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,a)})}(this.db,e,[this.name],o);return i&&(l._consoleTask=i,l=l.catch(function(e){return console.trace(e),eG(e)})),l}finally{s&&eS()}},te.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?eG(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},te.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==eW){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&en&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName,s=t.reduce(function(t,r){var n=t[0],a=t[1],t=o[r],s=e[r];return[n||t,n||!t?e1(a,t&&t.multi?function(e){return i(e=w(e,r))&&e.some(function(e){return 0===e9(s,e)})}:function(e){return 0===e9(s,w(e,r))}):a]},[null,null]),n=s[0],s=s[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(s):r?this.filter(s):this.where(t).equals("")},te.prototype.filter=function(e){return this.toCollection().and(e)},te.prototype.count=function(e){return this.toCollection().count(e)},te.prototype.offset=function(e){return this.toCollection().offset(e)},te.prototype.limit=function(e){return this.toCollection().limit(e)},te.prototype.each=function(e){return this.toCollection().each(e)},te.prototype.toArray=function(e){return this.toCollection().toArray(e)},te.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},te.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"[".concat(e.join("+"),"]"):e))},te.prototype.reverse=function(){return this.toCollection().reverse()},te.prototype.mapToClass=function(t){var r,n=this.db,a=this.name;function i(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof e5&&(function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(i,r=t),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return a},t=i);for(var o=new Set,l=t.prototype;l;l=s(l))Object.getOwnPropertyNames(l).forEach(function(e){return o.add(e)});function u(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!o.has(r))try{n[r]=e[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},te.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},te.prototype.add=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,i=n.keyPath,o=e;return i&&a&&(o=e4(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{_(e,i,t)}catch(e){}return t})},te.prototype.update=function(e,t){return"object"!=typeof e||i(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?eG(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},te.prototype.put=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,i=n.keyPath,o=e;return i&&a&&(o=e4(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{_(e,i,t)}catch(e){}return t})},te.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return e8(t,[e],r)}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):void 0})})},te.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:e2}).then(function(t){return e8(e,null,t)})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):void 0})},te.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},te.prototype.bulkAdd=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,i=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,o=r.auto,r=r.keyPath;if(r&&a)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,r=r&&o?e.map(e4(r)):e;return n.core.mutate({trans:t,type:"add",keys:a,values:r,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult,e=e.failures;if(0===t)return i?r:a;throw new U("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},te.prototype.bulkPut=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,i=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,o=r.auto,r=r.keyPath;if(r&&a)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,r=r&&o?e.map(e4(r)):e;return n.core.mutate({trans:t,type:"put",keys:a,values:r,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult,e=e.failures;if(0===t)return i?r:a;throw new U("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},te.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),i=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:n,cache:"clone"}).then(function(s){var l=[],u=[];e.forEach(function(e,r){var n=e.key,a=e.changes,o=s[r];if(o){for(var c=0,d=Object.keys(a);c<d.length;c++){var p=d[c],f=a[p];if(p===t.schema.primKey.keyPath){if(0!==e9(f,n))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else _(o,p,f)}i.push(r),l.push(n),u.push(o)}});var c=l.length;return r.mutate({trans:o,type:"put",keys:l,values:u,updates:{keys:n,changeSpecs:a}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return c;for(var a=0,o=Object.keys(n);a<o.length;a++){var s,l=o[a],u=i[Number(l)];null!=u&&(s=n[l],delete n[l],n[u]=s)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(c," operations failed"),n)})})})},te.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return e8(t,e,r)})}).then(function(e){var n=e.numFailures,a=e.lastResult,e=e.failures;if(0===n)return a;throw new U("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},te);function te(){}function tt(e){function t(t,n){if(n){for(var a=arguments.length,i=Array(a-1);--a;)i[a-1]=arguments[a];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=s;for(var n=1,o=arguments.length;n<o;++n)s(arguments[n]);return t;function s(e,n,o){if("object"!=typeof e){n=n||et;var l={subscribers:[],fire:o=o||W,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=n(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(n,o)}};return r[e]=t[e]=l}a(e).forEach(function(t){var r=e[t];if(i(r))s(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new K.InvalidArgument("Invalid event config");var n=s(t,J,function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function tr(e,t){return f(t).from({prototype:e}),t}function tn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ta(e,t){e.filter=e1(e.filter,t)}function ti(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return e1(n(),t())}:t,e.justLimit=r&&!n}function to(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function ts(e,t,r){var n=to(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function tl(e,t,r,n){var a=e.replayFilter?e1(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},o=function(e,r,n){var o,s;a&&!a(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(s=""+(o=r.primaryKey))&&(s=""+new Uint8Array(o)),u(i,s)||(i[s]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(o,r),tu(ts(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return tu(ts(e,n,r),e1(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function tu(e,t,r,n){var a=eN(n?function(e,t,a){return r(n(e),t,a)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=W},function(t){e.fail(t),r=W})||a(e.value,e,function(e){return r=e}),r()})})}var tc=(td.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(i(n))return r(r([],i(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var a=t.remove;if(i(a))return i(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(e){return BigInt(0)-a}throw TypeError("Invalid subtrahend ".concat(a))}return(n=null==(n=t.replacePrefix)?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},td);function td(e){this["@@propmod"]=e}var tp=(tf.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,eG.bind(null,r.error)):r.table._trans("readonly",e).then(t)},tf.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,eG.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},tf.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=e1(t.algorithm,e)},tf.prototype._iterate=function(e,t){return tl(this._ctx,e,t,this._ctx.table.core)},tf.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&o(r,e),t._ctx=r,t},tf.prototype.raw=function(){return this._ctx.valueMapper=null,this},tf.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return tl(t,e,r,t.table.core)})},tf.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(tn(r,!0))return n.count({trans:e,query:{index:to(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var a=0;return tl(r,function(){return++a,!1},e,n).then(function(){return a})}).then(e)},tf.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],a=r.length-1;function i(e,t){return t?i(e[r[t]],t-1):e[n]}var o="next"===this._ctx.dir?1:-1;function s(e,t){return e9(i(e,a),i(t,a))*o}return this.toArray(function(e){return e.sort(s)}).then(t)},tf.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&tn(r,!0)&&0<r.limit){var n=r.valueMapper,a=to(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var i=[];return tl(r,function(e){return i.push(e)},e,r.table.core).then(function(){return i})},e)},tf.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,tn(t)?ti(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):ti(t,function(){var t=e;return function(){return--t<0}})),this},tf.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ti(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},tf.prototype.until=function(e,t){return ta(this._ctx,function(r,n,a){return!e(r.value)||(n(a),t)}),this},tf.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},tf.prototype.last=function(e){return this.reverse().first(e)},tf.prototype.filter=function(e){var t;return ta(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=e1(t.isMatch,e),this},tf.prototype.and=function(e){return this.filter(e)},tf.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},tf.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tf.prototype.desc=function(){return this.reverse()},tf.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},tf.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},tf.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},tf.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},tf.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&tn(t,!0)&&0<t.limit)return this._read(function(e){var r=to(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},tf.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},tf.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},tf.prototype.lastKey=function(e){return this.reverse().firstKey(e)},tf.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return ta(this._ctx,function(e){var r=e.primaryKey.toString(),e=u(t,r);return t[r]=!0,!e}),this},tf.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var i,o,s="function"==typeof e?e:(o=(i=a(e)).length,function(t){for(var r=!1,n=0;n<o;++n){var a=i[n],s=e[a],l=w(t,a);s instanceof tc?(_(t,a,s.execute(l)),r=!0):l!==s&&(_(t,a,s),r=!0)}return r}),l=r.table.core,u=l.schema.primaryKey,c=u.outbound,d=u.extractKey,p=200,u=t.db._options.modifyChunkSize;function f(e,t){var r=t.failures,t=t.numFailures;m+=e-t;for(var n=0,i=a(r);n<i.length;n++){var o=i[n];h.push(r[o])}}u&&(p="object"==typeof u?u[l.name]||u["*"]||200:u);var h=[],m=0,y=[],g=e===th;return t.clone().primaryKeys().then(function(t){var a=tn(r)&&r.limit===1/0&&("function"!=typeof e||g)&&{index:r.index,range:r.range};return(function i(o){var u=Math.min(p,t.length-o),h=t.slice(o,o+u);return(g?Promise.resolve([]):l.getMany({trans:n,keys:h,cache:"immutable"})).then(function(m){var y=[],v=[],b=c?[]:null,w=g?h:[];if(!g)for(var _=0;_<u;++_){var x=m[_],k={value:O(x),primKey:t[o+_]};!1!==s.call(k,k.value,k)&&(null==k.value?w.push(t[o+_]):c||0===e9(d(x),d(k.value))?(v.push(k.value),c&&b.push(t[o+_])):(w.push(t[o+_]),y.push(k.value)))}return Promise.resolve(0<y.length&&l.mutate({trans:n,type:"add",values:y}).then(function(e){for(var t in e.failures)w.splice(parseInt(t),1);f(y.length,e)})).then(function(){return(0<v.length||a&&"object"==typeof e)&&l.mutate({trans:n,type:"put",keys:b,values:v,criteria:a,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<o}).then(function(e){return f(v.length,e)})}).then(function(){return(0<w.length||a&&g)&&l.mutate({trans:n,type:"delete",keys:w,criteria:a,isAdditionalChunk:0<o}).then(function(e){return e8(r.table,w,e)}).then(function(e){return f(w.length,e)})}).then(function(){return t.length>o+u&&i(o+p)})})})(0).then(function(){if(0<h.length)throw new B("Error modifying one or more objects",h,m,y);return t.length})})})},tf.prototype.delete=function(){var e=this._ctx,t=e.range;return tn(e)&&!e.table.schema.yProps&&(e.isPrimKey||3===t.type)?this._write(function(r){var n=e.table.core.schema.primaryKey;return e.table.core.count({trans:r,query:{index:n,range:t}}).then(function(n){return e.table.core.mutate({trans:r,type:"deleteRange",range:t}).then(function(e){var t=e.failures,e=e.numFailures;if(e)throw new B("Could not delete some values",Object.keys(t).map(function(e){return t[e]}),n-e);return n-e})})}):this.modify(th)},tf);function tf(){}var th=function(e,t){return t.value=null};function tm(e,t){return e<t?-1:+(e!==t)}function ty(e,t){return t<e?-1:+(e!==t)}function tg(e,t,r){return(e=e instanceof tx?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function tv(e){return new e.Collection(e,function(){return t_("")}).limit(0)}function tb(e,t,r,n){var a,i,o,s,l,u,c,d=r.length;if(!r.every(function(e){return"string"==typeof e}))return tg(e,eQ);function p(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},i="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?tm:ty;var t=r.map(function(e){return{lower:i(e),upper:a(e)}}).sort(function(e,t){return o(e.lower,t.lower)});s=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c="next"===(u=e)?"":n}p("next"),(e=new e.Collection(e,function(){return tw(s[0],l[d-1]+n)}))._ondirectionchange=function(e){p(e)};var f=0;return e._addAlgorithm(function(e,r,n){var a=e.key;if("string"!=typeof a)return!1;var p=i(a);if(t(p,l,f))return!0;for(var h=null,m=f;m<d;++m){var y=function(e,t,r,n,a,i){for(var o=Math.min(e.length,n.length),s=-1,l=0;l<o;++l){var u=t[l];if(u!==n[l])return 0>a(e[l],r[l])?e.substr(0,l)+r[l]+r.substr(l+1):0>a(e[l],n[l])?e.substr(0,l)+n[l]+r.substr(l+1):0<=s?e.substr(0,s)+t[s]+r.substr(s+1):null;0>a(e[l],u)&&(s=l)}return o<n.length&&"next"===i?e+r.substr(e.length):o<e.length&&"prev"===i?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}(a,p,s[m],l[m],o,u);null===y&&null===h?f=m+1:(null===h||0<o(h,y))&&(h=y)}return r(null!==h?function(){e.continue(h+c)}:n),!1}),e}function tw(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function t_(e){return{type:1,lower:e,upper:e}}var tx=(Object.defineProperty(tk.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tk.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?tv(this):new this.Collection(this,function(){return tw(e,t,!r,!n)})}catch(e){return tg(this,eJ)}},tk.prototype.equals=function(e){return null==e?tg(this,eJ):new this.Collection(this,function(){return t_(e)})},tk.prototype.above=function(e){return null==e?tg(this,eJ):new this.Collection(this,function(){return tw(e,void 0,!0)})},tk.prototype.aboveOrEqual=function(e){return null==e?tg(this,eJ):new this.Collection(this,function(){return tw(e,void 0,!1)})},tk.prototype.below=function(e){return null==e?tg(this,eJ):new this.Collection(this,function(){return tw(void 0,e,!1,!0)})},tk.prototype.belowOrEqual=function(e){return null==e?tg(this,eJ):new this.Collection(this,function(){return tw(void 0,e)})},tk.prototype.startsWith=function(e){return"string"!=typeof e?tg(this,eQ):this.between(e,e+eW,!0,!0)},tk.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):tb(this,function(e,t){return 0===e.indexOf(t[0])},[e],eW)},tk.prototype.equalsIgnoreCase=function(e){return tb(this,function(e,t){return e===t[0]},[e],"")},tk.prototype.anyOfIgnoreCase=function(){var e=z.apply(P,arguments);return 0===e.length?tv(this):tb(this,function(e,t){return -1!==t.indexOf(e)},e,"")},tk.prototype.startsWithAnyOfIgnoreCase=function(){var e=z.apply(P,arguments);return 0===e.length?tv(this):tb(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,eW)},tk.prototype.anyOf=function(){var e=this,t=z.apply(P,arguments),r=this._cmp;try{t.sort(r)}catch(e){return tg(this,eJ)}if(0===t.length)return tv(this);var n=new this.Collection(this,function(){return tw(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var a=0;return n._addAlgorithm(function(e,n,i){for(var o=e.key;0<r(o,t[a]);)if(++a===t.length)return n(i),!1;return 0===r(o,t[a])||(n(function(){e.continue(t[a])}),!1)}),n},tk.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tk.prototype.noneOf=function(){var e=z.apply(P,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return tg(this,eJ)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},tk.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,a=this._ascending,i=this._descending,o=this._min,s=this._max;if(0===e.length)return tv(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&0>=a(e[0],e[1])}))return tg(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,d=a;function p(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,a=e.length;r<a;++r){var i=e[r];if(0>n(t[0],i[1])&&0<n(t[1],i[0])){i[0]=o(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return r===a&&e.push(t),e},[])).sort(p)}catch(e){return tg(this,eJ)}var f=0,h=c?function(e){return 0<a(e,l[f][1])}:function(e){return 0<=a(e,l[f][1])},m=u?function(e){return 0<i(e,l[f][0])}:function(e){return 0<=i(e,l[f][0])},y=h,e=new this.Collection(this,function(){return tw(l[0][0],l[l.length-1][1],!u,!c)});return e._ondirectionchange=function(e){d="next"===e?(y=h,a):(y=m,i),l.sort(p)},e._addAlgorithm(function(e,t,n){for(var i=e.key;y(i);)if(++f===l.length)return t(n),!1;return!h(i)&&!m(i)||(0===r._cmp(i,l[f][1])||0===r._cmp(i,l[f][0])||t(function(){d===a?e.continue(l[f][0]):e.continue(l[f][1])}),!1)}),e},tk.prototype.startsWithAnyOf=function(){var e=z.apply(P,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tv(this):this.inAnyRange(e.map(function(e){return[e,e+eW]})):tg(this,"startsWithAnyOf() only works with strings")},tk);function tk(){}function tE(e){return eN(function(t){return tI(t),e(t.target.error),!1})}function tI(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var tT="storagemutated",tS="x-storagemutated-1",tO=tt(null,tT),tA=(tN.prototype._lock=function(){return v(!eh.global),++this._reculock,1!==this._reculock||eh.global||(eh.lockOwnerFor=this),this},tN.prototype._unlock=function(){if(v(!eh.global),0==--this._reculock)for(eh.global||(eh.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{eq(e[1],e[0])}catch(e){}}return this},tN.prototype._locked=function(){return this._reculock&&eh.lockOwnerFor!==this},tN.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new K.DatabaseClosed(n);case"MissingAPIError":throw new K.MissingAPI(n.message,n);default:throw new K.OpenFailed(n)}if(!this.active)throw new K.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=eN(function(r){tI(r),t._reject(e.error)}),e.onabort=eN(function(r){tI(r),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=eN(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&tO.storagemutated.fire(e.mutatedParts)}),this},tN.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return eG(new K.ReadOnly("Transaction is readonly"));if(!this.active)return eG(new K.TransactionInactive);if(this._locked())return new ev(function(a,i){n._blockedFuncs.push([function(){n._promise(e,t,r).then(a,i)},eh])});if(r)return e$(function(){var e=new ev(function(e,r){n._lock();var a=t(e,r,n);a&&a.then&&a.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var a=new ev(function(e,r){var a=t(e,r,n);a&&a.then&&a.then(e,r)});return a._lib=!0,a},tN.prototype._root=function(){return this.parent?this.parent._root():this},tN.prototype.waitFor=function(e){var t,r=this._root(),n=ev.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=r._waitingFor;return new ev(function(e,t){n.then(function(t){return r._waitingQueue.push(eN(e.bind(null,t)))},function(e){return r._waitingQueue.push(eN(t.bind(null,e)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},tN.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},tN.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var r=this.schema[e];if(!r)throw new K.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},tN);function tN(){}function tj(e,t,r,n,a,i,o,s){return{name:e,keyPath:t,unique:r,multi:n,auto:a,compound:i,src:(r&&!o?"&":"")+(n?"*":"")+(a?"++":"")+tC(t),type:s}}function tC(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function tR(e,t,r){var n;return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))}}var tP=function(e){try{return e.only([[]]),tP=function(){return[[]]},[[]]}catch(e){return tP=function(){return eW},eW}};function tz(e){return null==e?function(){}:"string"==typeof e?1===e.split(".").length?function(t){return t[e]}:function(t){return w(t,e)}:function(t){return w(t,e)}}function tM(e){return[].slice.call(e)}var t$=0;function tD(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function tF(e,r){var n,a,o,s,l=r.db,r=(n=e._middlewares,a=e._deps,o=r,s=a.IDBKeyRange,a.indexedDB,{dbcore:(o=function(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,a=e.lowerOpen,e=e.upperOpen;return void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!a):t.bound(r,n,!!a,!!e)}var a,o,s=(a=r,o=tM(e.objectStoreNames),{schema:{name:e.name,tables:o.map(function(e){return a.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=i(t),a={},r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:tz(t)},indexes:tM(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry,e=e.keyPath,n={name:t,compound:i(e),keyPath:e,unique:r,multiEntry:n,extractKey:tz(e)};return a[tD(e)]=n}),getIndexByKeyPath:function(e){return a[tD(e)]}};return a[":id"]=r.primaryKey,null!=t&&(a[tD(t)]=r.primaryKey),r})},hasGetAll:0<o.length&&"getAll"in a.objectStore(o[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),r=s.schema,l=s.hasGetAll,s=r.tables.map(function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var r=e.trans,a=e.type,i=e.keys,o=e.values,s=e.range;return new Promise(function(e,l){e=eN(e);var u=r.objectStore(t),c=null==u.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw Error("Invalid operation type: "+a);var p,f=(i||o||{length:1}).length;if(i&&o&&i.length!==o.length)throw Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function h(e){++g,tI(e)}var m=[],y=[],g=0;if("deleteRange"===a){if(4===s.type)return e({numFailures:g,failures:y,results:[],lastResult:void 0});3===s.type?m.push(p=u.clear()):m.push(p=u.delete(n(s)))}else{var c=d?c?[o,i]:[o,null]:[i,null],v=c[0],b=c[1];if(d)for(var w=0;w<f;++w)m.push(p=b&&void 0!==b[w]?u[a](v[w],b[w]):u[a](v[w])),p.onerror=h;else for(w=0;w<f;++w)m.push(p=u[a](v[w])),p.onerror=h}function _(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(y[t]=e.error)}),e({numFailures:g,failures:y,results:"delete"===a?i:m.map(function(e){return e.result}),lastResult:t})}p.onerror=function(e){h(e),_(e)},p.onsuccess=_})},getMany:function(e){var r=e.trans,n=e.keys;return new Promise(function(e,a){e=eN(e);for(var i,o=r.objectStore(t),s=n.length,l=Array(s),u=0,c=0,d=function(t){l[(t=t.target)._pos]=t.result,++c===u&&e(l)},p=tE(a),f=0;f<s;++f)null!=n[f]&&((i=o.get(n[f]))._pos=f,i.onsuccess=d,i.onerror=p,++u);0===u&&e(l)})},get:function(e){var r=e.trans,n=e.key;return new Promise(function(e,a){e=eN(e);var i=r.objectStore(t).get(n);i.onsuccess=function(t){return e(t.target.result)},i.onerror=tE(a)})},query:function(e){return new Promise(function(r,a){r=eN(r);var i,o,s,u=e.trans,c=e.values,d=e.limit,p=e.query,f=d===1/0?void 0:d,h=p.index,p=p.range,u=u.objectStore(t),h=h.isPrimaryKey?u:u.index(h.name),p=n(p);if(0===d)return r({result:[]});l?((f=c?h.getAll(p,f):h.getAllKeys(p,f)).onsuccess=function(e){return r({result:e.target.result})},f.onerror=tE(a)):(i=0,o=!c&&"openKeyCursor"in h?h.openKeyCursor(p):h.openCursor(p),s=[],o.onsuccess=function(e){var t=o.result;return t?(s.push(c?t.value:t.primaryKey),++i===d?r({result:s}):void t.continue()):r({result:s})},o.onerror=tE(a))})},openCursor:function(e){var r=e.trans,a=e.values,i=e.query,o=e.reverse,s=e.unique;return new Promise(function(e,l){e=eN(e);var u=i.index,c=i.range,d=r.objectStore(t),d=u.isPrimaryKey?d:d.index(u.name),u=o?s?"prevunique":"prev":s?"nextunique":"next",p=!a&&"openKeyCursor"in d?d.openKeyCursor(n(c),u):d.openCursor(n(c),u);p.onerror=tE(l),p.onsuccess=eN(function(t){var n,a,i,o,s=p.result;s?(s.___id=++t$,s.done=!1,n=s.continue.bind(s),a=(a=s.continuePrimaryKey)&&a.bind(s),i=s.advance.bind(s),o=function(){throw Error("Cursor not stopped")},s.trans=r,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw Error("Cursor not started")},s.fail=eN(l),s.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},s.start=function(e){function t(){if(p.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw Error("Cursor behind last entry")},s.stop()}var r=new Promise(function(e,t){e=eN(e),p.onerror=tE(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=o,e(t)}});return p.onsuccess=eN(function(e){p.onsuccess=t,t()}),s.continue=n,s.continuePrimaryKey=a,s.advance=i,t(),r},e(s)):e(null)},l)})},count:function(e){var r=e.query,a=e.trans,i=r.index,o=r.range;return new Promise(function(e,r){var s=a.objectStore(t),l=i.isPrimaryKey?s:s.index(i.name),s=n(o),l=s?l.count(s):l.count();l.onsuccess=eN(function(t){return e(t.target.result)}),l.onerror=tE(r)})}}}),u={};return s.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:tP(t),schema:r}}(l,s,o),n.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},o))});e.core=r.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tL(e,t,r,n){r.forEach(function(r){var a=n[r];t.forEach(function(t){var n=function e(t,r){return h(t,r)||(t=s(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,r,{get:function(){return this.table(r)},set:function(e){d(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,a))})})}function tZ(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function tB(e,t){return e._cfg.version-t._cfg.version}function tU(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],i=t[r];if(a){var o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto)o.recreate=!0,n.change.push(o);else{var s=a.idxByName,l=i.idxByName,u=void 0;for(u in s)l[u]||o.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&o.change.push(d):o.add.push(d)}(0<o.del.length||0<o.add.length||0<o.change.length)&&n.change.push(o)}}else n.add.push([r,i])}return n}function tq(e,t,r,n){var a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return tV(a,e)}),a}function tK(e,t){a(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(en&&console.debug("Dexie: Creating missing table",r),tq(t,r,e[r].primKey,e[r].indexes))})}function tV(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tG(e,t,r){var n={};return y(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),a=tj(tC(l=t.keyPath),l||"",!0,!1,!!t.autoIncrement,l&&"string"!=typeof l,!0),i=[],o=0;o<t.indexNames.length;++o){var s=t.index(t.indexNames[o]),l=s.keyPath,s=tj(s.name,l,!!s.unique,!!s.multiEntry,!1,l&&"string"!=typeof l,!1);i.push(s)}n[e]=tR(e,a,i)}),n}function tW(e,t,r){for(var a=r.db.objectStoreNames,i=0;i<a.length;++i){var o=a[i],s=r.objectStore(o);e._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,d="string"==typeof c?c:"["+y(c).join("+")+"]";!t[o]||(c=t[o].idxByName[d])&&(c.name=u,delete t[o].idxByName[d],t[o].idxByName[u]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function tJ(e){return e.split(",").map(function(e,t){var r=e.split(":"),n=null==(a=r[1])?void 0:a.trim(),a=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return tj(a,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),0===t,n)})}var tQ=(tY.prototype._createTableSchema=tR,tY.prototype._parseIndexSyntax=tJ,tY.prototype._parseStoresSpec=function(e,t){var r=this;a(e).forEach(function(n){if(null!==e[n]){var a=r._parseIndexSyntax(e[n]),i=a.shift();if(!i)throw new K.Schema("Invalid schema for table "+n+": "+e[n]);if(i.unique=!0,i.multi)throw new K.Schema("Primary key cannot be multiEntry*");a.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),a=r._createTableSchema(n,i,a),t[n]=a}})},tY.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;var e=t._versions,r={},n={};return e.forEach(function(e){o(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,tZ(t,[t._allTables,t,t.Transaction.prototype]),tL(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(n),n),t._storeNames=a(n),this},tY.prototype.upgrade=function(e){return this._cfg.contentUpgrade=er(this._cfg.contentUpgrade||W,e),this},tY);function tY(){}function tH(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rE(eH,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function tX(e){return e&&"function"==typeof e.databases}function t0(e){return e$(function(){return eh.letThrough=!0,e()})}function t1(e){return!("from"in e)}var t2=function(e,t){if(!this){var r=new t2;return e&&"d"in e&&o(r,e),r}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function t4(e,t,r){var n=e9(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(t1(e))return o(e,{from:t,to:r,d:1});var a=e.l,n=e.r;if(0>e9(r,e.from))return a?t4(a,t,r):e.l={from:t,to:r,d:1,l:null,r:null},t3(e);if(0<e9(t,e.to))return n?t4(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},t3(e);0>e9(t,e.from)&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<e9(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,a&&!e.l&&t5(e,a),n&&r&&t5(e,n)}}function t5(e,t){t1(t)||function e(t,r){var n=r.from,a=r.to,i=r.l,r=r.r;t4(t,n,a),i&&e(t,i),r&&e(t,r)}(e,t)}function t9(e,t){var r=t6(t),n=r.next();if(n.done)return!1;for(var a=n.value,i=t6(e),o=i.next(a.from),s=o.value;!n.done&&!o.done;){if(0>=e9(s.from,a.to)&&0<=e9(s.to,a.from))return!0;0>e9(a.from,s.from)?a=(n=r.next(s.from)).value:s=(o=i.next(a.from)).value}return!1}function t6(e){var t=t1(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&0>e9(e,t.n.from);)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||0>=e9(e,t.n.to))return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function t3(e){var r,n,a=((null==(r=e.r)?void 0:r.d)||0)-((null==(n=e.l)?void 0:n.d)||0),i=1<a?"r":a<-1?"l":"";i&&(r="r"==i?"l":"r",n=t({},e),a=e[i],e.from=a.from,e.to=a.to,e[i]=a[i],n[i]=a[r],(e[r]=n).d=t8(n)),e.d=t8(e)}function t8(e){var t=e.r,e=e.l;return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function t7(e,t){return a(t).forEach(function(r){e[r]?t5(e[r],t[r]):e[r]=function e(t){var r,n,a={};for(r in t)u(t,r)&&(n=t[r],a[r]=!n||"object"!=typeof n||T.has(n.constructor)?n:e(n));return a}(t[r])}),e}function re(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&t9(t[r],e[r])})}c(t2.prototype,((D={add:function(e){return t5(this,e),this},addKey:function(e){return t4(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return t4(t,e,e)}),this},hasKey:function(e){var t=t6(this).next(e).value;return t&&0>=e9(t.from,e)&&0<=e9(t.to,e)}})[j]=function(){return t6(this)},D));var rt={},rr={},rn=!1;function ra(e){t7(rr,e),rn||(rn=!0,setTimeout(function(){rn=!1,ri(rr,(rr={},!1))},0))}function ri(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,a=Object.values(rt);n<a.length;n++)ro(o=a[n],e,r,t);else for(var i in e){var o,s=/^idb\:\/\/(.*)\/(.*)\//.exec(i);s&&(i=s[1],s=s[2],(o=rt["idb://".concat(i,"/").concat(s)])&&ro(o,e,r,t))}r.forEach(function(e){return e()})}function ro(e,t,r,n){for(var a=[],i=0,o=Object.entries(e.queries.query);i<o.length;i++){for(var s=o[i],l=s[0],u=[],c=0,d=s[1];c<d.length;c++){var p=d[c];re(t,p.obsSet)?p.subscribers.forEach(function(e){return r.add(e)}):n&&u.push(p)}n&&a.push([l,u])}if(n)for(var f=0;f<a.length;f++){var h=a[f],l=h[0],u=h[1];e.queries.query[l]=u}}function rs(e){function t(t){return e.next(t)}var r=a(t),n=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t),t=a.value;return a.done?t:t&&"function"==typeof t.then?t.then(r,n):i(t)?Promise.all(t).then(r,n):r(t)}}return a(t)()}function rl(e,t,r){for(var n=i(e)?e.slice():[e],a=0;a<r;++a)n.push(t);return n}var ru={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),a=n.schema,i={},o=[];function s(e,r,n){var a=tD(e),l=i[a]=i[a]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<r,c=t(t({},n),{name:c?"".concat(a,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:r,keyLength:u,extractKey:tz(e),unique:!c&&n.unique});return l.push(c),c.isPrimaryKey||o.push(c),1<u&&s(2===u?e[0]:e.slice(0,u-1),r+1,n),l.sort(function(e,t){return e.keyTail-t.keyTail}),c}r=s(a.primaryKey.keyPath,0,a.primaryKey),i[":id"]=[r];for(var l=0,u=a.indexes;l<u.length;l++){var c=u[l];s(c.keyPath,0,c)}function d(r){var n,a=r.query.index;return a.isVirtual?t(t({},r),{query:{index:a.lowLevelIndex,range:(n=r.query.range,a=a.keyTail,{type:1===n.type?2:n.type,lower:rl(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:rl(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},a),{primaryKey:r,indexes:o,getIndexByKeyPath:function(e){return(e=i[tD(e)])&&e[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,a=r.keyTail,i=r.isVirtual,o=r.keyLength;return i?n.openCursor(d(t)).then(function(r){var n;return r&&Object.create(n=r,{continue:{value:function(r){null!=r?n.continue(rl(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(rl(t,e.MAX_KEY,a),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}):n.openCursor(t)}})}})}};function rc(e,t,r,n){return r=r||{},n=n||"",a(e).forEach(function(a){var i,o,s;u(t,a)?(i=e[a],o=t[a],"object"==typeof i&&"object"==typeof o&&i&&o?(s=N(i))!==N(o)?r[n+a]=t[a]:"Object"===s?rc(i,o,r,n+a+"."):i!==o&&(r[n+a]=t[a]):i!==o&&(r[n+a]=t[a])):r[n+a]=void 0}),a(t).forEach(function(a){u(e,a)||(r[n+a]=t[a])}),r}function rd(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var rp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var a=e.table(n),i=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var o=eh.trans,s=o.table(n).hook,l=s.deleting,c=s.creating,d=s.updating;switch(e.type){case"add":if(c.fire===W)break;return o._promise("readwrite",function(){return p(e)},!0);case"put":if(c.fire===W&&d.fire===W)break;return o._promise("readwrite",function(){return p(e)},!0);case"delete":if(l.fire===W)break;return o._promise("readwrite",function(){return p(e)},!0);case"deleteRange":if(l.fire===W)break;return o._promise("readwrite",function(){return function e(r,n,o){return a.query({trans:r,values:!1,query:{index:i,range:n},limit:o}).then(function(a){var i=a.result;return p({type:"delete",keys:i,trans:r}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):i.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:i[i.length-1],lowerOpen:!0}),o)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function p(e){var n,o=eh.trans,s=e.keys||rd(i,e);if(!s)throw Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:s}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),("add"===(n=e).type?Promise.resolve([]):a.getMany({trans:n.trans,keys:s,cache:"immutable"})).then(function(t){var r=s.map(function(r,n){var a,s,p,f=t[n],h={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(h,r,f,o):"add"===e.type||void 0===f?(a=c.fire.call(h,r,e.values[n],o),null==r&&null!=a&&(e.keys[n]=r=a,i.outbound||_(e.values[n],i.keyPath,r))):(a=rc(f,e.values[n]),(s=d.fire.call(h,a,r,f,o))&&(p=e.values[n],Object.keys(s).forEach(function(e){u(p,e)?p[e]=s[e]:_(p,e,s[e])}))),h});return a.mutate(e).then(function(n){for(var a=n.failures,i=n.results,o=n.numFailures,n=n.lastResult,l=0;l<s.length;++l){var u=(i||s)[l],c=r[l];null==u?c.onerror&&c.onerror(a[l]):c.onsuccess&&c.onsuccess("put"===e.type&&t[l]?e.values[l]:u)}return{failures:a,results:i,numFailures:o,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function rf(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],a=0,i=0;a<t.keys.length&&i<e.length;++a)0===e9(t.keys[a],e[i])&&(n.push(r?O(t.values[a]):t.values[a]),++i);return n.length===e.length?n:null}catch(e){return null}}var rh={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=rf(e.keys,e.trans._cache,"clone"===e.cache);return t?ev.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?O(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function rm(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function ry(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rg={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new t2(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(eh.subscr&&"readonly"!==r)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(eh.querier));return e.transaction(t,r,n)},table:function(o){var s=e.table(o),l=s.schema,u=l.primaryKey,c=l.indexes,d=u.extractKey,p=u.outbound,f=u.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(u.keyPath)}),h=t(t({},s),{mutate:function(t){function a(e){return h[e="idb://".concat(r,"/").concat(o,"/").concat(e)]||(h[e]=new t2)}var c,d,p=t.trans,h=t.mutatedParts||(t.mutatedParts={}),m=a(""),y=a(":dels"),g=t.type,v="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[rd(u,t).filter(function(e){return e}),t.values]:[],b=v[0],w=v[1],v=t.trans._cache;return i(b)?(m.addKeys(b),(v="delete"===g||b.length===w.length?rf(b,v):null)||y.addKeys(b),(v||w)&&(c=v,d=w,l.indexes.forEach(function(e){var t=a(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&i(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(c||d).forEach(function(e,t){var a=c&&r(c[t]),t=d&&r(d[t]);0!==e9(a,t)&&(null!=a&&n(a),null!=t&&n(t))})}))):b?(w={from:null!=(w=b.lower)?w:e.MIN_KEY,to:null!=(w=b.upper)?w:e.MAX_KEY},y.add(w),m.add(w)):(m.add(n),y.add(n),l.indexes.forEach(function(e){return a(e.name).add(n)})),s.mutate(t).then(function(e){return!b||"add"!==t.type&&"put"!==t.type||(m.addKeys(e.results),f&&f.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),i=r.keyPath.findIndex(function(e){return e===u.keyPath}),o=0,s=e.results.length;o<s;++o)n[o][i]=e.results[o];a(r.name).addKeys(n)})),p.mutatedParts=t7(p.mutatedParts||{},h),e})}}),c=function(t){var r=t.query,t=r.index,r=r.range;return[t,new t2(null!=(t=r.lower)?t:e.MIN_KEY,null!=(r=r.upper)?r:e.MAX_KEY)]},m={get:function(e){return[u,new t2(e.key)]},getMany:function(e){return[u,(new t2).addKeys(e.keys)]},count:c,query:c,openCursor:c};return a(m).forEach(function(e){h[e]=function(a){var i=eh.subscr,l=!!i,u=rm(eh,s)&&ry(e,a)?a.obsSet={}:i;if(l){var c=function(e){return u[e="idb://".concat(r,"/").concat(o,"/").concat(e)]||(u[e]=new t2)},f=c(""),h=c(":dels"),i=m[e](a),l=i[0],i=i[1];if(("query"===e&&l.isPrimaryKey&&!a.values?h:c(l.name||"")).add(i),!l.isPrimaryKey){if("count"!==e){var y="query"===e&&p&&a.values&&s.query(t(t({},a),{values:!1}));return s[e].apply(this,arguments).then(function(t){if("query"===e){if(p&&a.values)return y.then(function(e){return e=e.result,f.addKeys(e),t});var r=a.values?t.result.map(d):t.result;(a.values?f:h).addKeys(r)}else if("openCursor"===e){var n=a.values;return t&&Object.create(t,{key:{get:function(){return h.addKey(t.primaryKey),t.key}},primaryKey:{get:function(){var e=t.primaryKey;return h.addKey(e),e}},value:{get:function(){return n&&f.addKey(t.primaryKey),t.value}}})}return t})}h.add(n)}}return s[e].apply(this,arguments)}}),h}})}};function rv(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===a?null:(i((r=t({},r)).keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&i(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function rb(e,t){return(void 0===t.lower||(t.lowerOpen?0<e9(e,t.lower):0<=e9(e,t.lower)))&&(void 0===t.upper||(t.upperOpen?0>e9(e,t.upper):0>=e9(e,t.upper)))}function rw(e,t,r,n,a,o){if(!r||0===r.length)return e;var s=t.query.index,l=s.multiEntry,u=t.query.range,c=n.schema.primaryKey.extractKey,d=s.extractKey,p=(s.lowLevelIndex||s).extractKey,r=r.reduce(function(e,r){var n=e,a=[];if("add"===r.type||"put"===r.type)for(var o=new t2,s=r.values.length-1;0<=s;--s){var p,f=r.values[s],h=c(f);o.hasKey(h)||(p=d(f),(l&&i(p)?p.some(function(e){return rb(e,u)}):rb(p,u))&&(o.addKey(h),a.push(f)))}switch(r.type){case"add":var m=(new t2).addKeys(t.values?e.map(function(e){return c(e)}):e),n=e.concat(t.values?a.filter(function(e){return e=c(e),!m.hasKey(e)&&(m.addKey(e),!0)}):a.map(function(e){return c(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var y=(new t2).addKeys(r.values.map(function(e){return c(e)}));n=e.filter(function(e){return!y.hasKey(t.values?c(e):e)}).concat(t.values?a:a.map(function(e){return c(e)}));break;case"delete":var g=(new t2).addKeys(r.keys);n=e.filter(function(e){return!g.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=r.range;n=e.filter(function(e){return!rb(c(e),v)})}return n},e);return r===e?e:(r.sort(function(e,t){return e9(p(e),p(t))||e9(c(e),c(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(a.dirty=!0)),o?Object.freeze(r):r)}function r_(e,t){return 0===e9(e.lower,t.lower)&&0===e9(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var rx={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,a){var i,o,s=e.transaction(t,n,a);return"readwrite"===n&&(o=(i=new AbortController).signal,a=function(a){return function(){if(i.abort(),"readwrite"===n){for(var o=new Set,l=0;l<t.length;l++){var u=t[l],c=rt["idb://".concat(r,"/").concat(u)];if(c){var d=e.table(u),p=c.optimisticOps.filter(function(e){return e.trans===s});if(s._explicit&&a&&s.mutatedParts)for(var f=0,h=Object.values(c.queries.query);f<h.length;f++)for(var m=0,y=(b=h[f]).slice();m<y.length;m++)re((w=y[m]).obsSet,s.mutatedParts)&&(R(b,w),w.subscribers.forEach(function(e){return o.add(e)}));else if(0<p.length){c.optimisticOps=c.optimisticOps.filter(function(e){return e.trans!==s});for(var g=0,v=Object.values(c.queries.query);g<v.length;g++)for(var b,w,_,x=0,k=(b=v[g]).slice();x<k.length;x++)null!=(w=k[x]).res&&s.mutatedParts&&(a&&!w.dirty?(_=Object.isFrozen(w.res),_=rw(w.res,w.req,p,d,w,_),w.dirty?(R(b,w),w.subscribers.forEach(function(e){return o.add(e)})):_!==w.res&&(w.res=_,w.promise=ev.resolve({result:_}))):(w.dirty&&R(b,w),w.subscribers.forEach(function(e){return o.add(e)})))}}}o.forEach(function(e){return e()})}}},s.addEventListener("abort",a(!1),{signal:o}),s.addEventListener("error",a(!1),{signal:o}),s.addEventListener("complete",a(!0),{signal:o})),s},table:function(n){var a=e.table(n),i=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var o=eh.trans;if(i.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return a.mutate(e);var s=rt["idb://".concat(r,"/").concat(n)];return s?(o=a.mutate(e),("add"===e.type||"put"===e.type)&&(50<=e.values.length||rd(i,e).some(function(e){return null==e}))?o.then(function(r){var n=rv(0,t(t({},e),{values:e.values.map(function(e,n){var a;return r.failures[n]||_(e=null!=(a=i.keyPath)&&a.includes(".")?O(e):t({},e),i.keyPath,r.results[n]),e})}),r);s.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&ra(e.mutatedParts)})}):(s.optimisticOps.push(e),e.mutatedParts&&ra(e.mutatedParts),o.then(function(t){0<t.numFailures&&(R(s.optimisticOps,e),(t=rv(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&ra(e.mutatedParts))}),o.catch(function(){R(s.optimisticOps,e),e.mutatedParts&&ra(e.mutatedParts)})),o):a.mutate(e)},query:function(e){if(!rm(eh,a)||!ry("query",e))return a.query(e);var t,i,o="immutable"===(null==(c=eh.trans)?void 0:c.db._options.cache),s=eh,l=s.requery,u=s.signal,c=function(e,t,r,n){var a=rt["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[r]))return[null,!1,a,null];var i=t[(n.query?n.query.index.name:null)||""];if(!i)return[null,!1,a,null];switch(r){case"query":var o=i.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&r_(e.req.query.range,n.query.range)});return o?[o,!0,a,i]:[i.find(function(e){var t,r;return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&(t=e.req.query.range,r=n.query.range,0>=function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=e9(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return -1}return t}(t.lower,r.lower,t.lowerOpen,r.lowerOpen)&&0<=function(e,t,r,n){if(void 0===e)return+(void 0!==t);if(void 0===t)return -1;if(0===(t=e9(e,t))){if(r&&n)return 0;if(r)return -1;if(n)return 1}return t}(t.upper,r.upper,t.upperOpen,r.upperOpen))}),!1,a,i];case"count":return[o=i.find(function(e){return r_(e.req.query.range,n.query.range)}),!!o,a,i]}}(r,n,"query",e),d=c[0],s=c[1],p=c[2],f=c[3];return d&&s?d.obsSet=e.obsSet:(s=a.query(e).then(function(e){var t=e.result;if(d&&(d.res=t),o){for(var r=0,n=t.length;r<n;++r)Object.freeze(t[r]);Object.freeze(t)}else e.result=O(t);return e}).catch(function(e){return f&&d&&R(f,d),Promise.reject(e)}),d={obsSet:e.obsSet,promise:s,subscribers:new Set,type:"query",req:e,dirty:!1},f?f.push(d):(f=[d],(p=p||(rt["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=f)),t=d,i=f,t.subscribers.add(l),u.addEventListener("abort",function(){t.subscribers.delete(l),0===t.subscribers.size&&setTimeout(function(){0===t.subscribers.size&&R(i,t)},3e3)}),d.promise.then(function(t){return{result:rw(t.result,e,null==p?void 0:p.optimisticOps,a,d,o)}})}})}})}};function rk(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rE=(rI.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(tB),r.stores({}),this._state.autoSchema=!1,r)},rI.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||eh.letThrough||this._vip)?e():new ev(function(e,r){if(t._state.openComplete)return r(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new K.DatabaseClosed);t.open().catch(W)}t._state.dbReadyPromise.then(e,r)}).then(e)},rI.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:a}),e.sort(function(e,t){return e.level-t.level}),this},rI.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},rI.prototype.open=function(){var e=this;return eq(ef,function(){return function(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?eG(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,i=Math.round(10*e.verno),o=!1;function s(){if(t.openCanceller!==n)throw new K.DatabaseClosed("db.open() was cancelled")}var l,u=t.dbReadyResolve,c=null,d=!1;return ev.race([n,("undefined"==typeof navigator?ev.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}l=setInterval(t,100),t()}).finally(function(){return clearInterval(l)}):Promise.resolve()).then(function n(){return new ev(function(l,u){if(s(),!r)throw new K.MissingAPI;var p=e.name,f=t.autoSchema||!i?r.open(p):r.open(p,i);if(!f)throw new K.MissingAPI;f.onerror=tE(u),f.onblocked=eN(e._fireOnBlocked),f.onupgradeneeded=eN(function(n){var i,s,l,h,m,y,g;c=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=tI,c.abort(),f.result.close(),(i=r.deleteDatabase(p)).onsuccess=i.onerror=eN(function(){u(new K.NoSuchDatabase("Database ".concat(p," doesnt exist")))})):(c.onerror=tE(u),d=(n=n.oldVersion>0x4000000000000000?0:n.oldVersion)<1,e.idbdb=f.result,o&&function(e,t){tK(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=tG(0,e.idbdb,t);tW(e,e._dbSchema,t);for(var n=0,a=tU(r,e._dbSchema).change;n<a.length;n++){var i=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){en&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),tV(r,t)})}(a[n]);if("object"==typeof i)return i.value}}(e,c),s=n/10,l=c,h=e._dbSchema,l.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=tR("$meta",tJ("")[0],[]),e._storeNames.push("$meta")),(m=e._createTransaction("readwrite",e._storeNames,h)).create(l),m._completion.catch(u),y=m._reject.bind(m),g=eh.transless||eh,e$(function(){return eh.trans=m,eh.transless=g,0!==s?(tF(e,l),(m.storeNames.includes("$meta")?m.table("$meta").get("version").then(function(e){return null!=e?e:s}):ev.resolve(s)).then(function(t){var r,n,i;return r=t,n=[],t=e._versions,i=e._dbSchema=tG(0,e.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=r})).length?(t.forEach(function(t){n.push(function(){var n=i,o=t._cfg.dbschema;tW(e,n,l),tW(e,o,l),i=e._dbSchema=o;var s=tU(n,o);s.add.forEach(function(e){tq(l,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return tV(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),tV(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var u=t._cfg.contentUpgrade;if(u&&t._cfg.version>r){tF(e,l),m._memoizedTables={};var c=x(o);s.del.forEach(function(e){c[e]=n[e]}),tZ(e,[e.Transaction.prototype]),tL(e,[e.Transaction.prototype],a(c),c),m.schema=c;var d,p=M(u);return p&&eD(),s=ev.follow(function(){var e;(d=u(m))&&p&&(e=eF.bind(null,null),d.then(e,e))}),d&&"function"==typeof d.then?ev.resolve(d):s.then(function(){return d})}}),n.push(function(r){var n=t._cfg.dbschema;[].slice.call(r.db.objectStoreNames).forEach(function(e){return null==n[e]&&r.db.deleteObjectStore(e)}),tZ(e,[e.Transaction.prototype]),tL(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),m.schema=e._dbSchema}),n.push(function(r){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===t._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):r.objectStore("$meta").put(t._cfg.version,"version"))})}),(function e(){return n.length?ev.resolve(n.shift()(m.idbtrans)).then(e):ev.resolve()})().then(function(){tK(i,l)})):ev.resolve()}).catch(y)):(a(h).forEach(function(e){tq(l,e,h[e].primKey,h[e].indexes)}),tF(e,l),void ev.follow(function(){return e.on.populate.fire(m)}).catch(y))}))},u),f.onsuccess=eN(function(){c=null;var r,s,u,h=e.idbdb=f.result,m=y(h.objectStoreNames);if(0<m.length)try{var g=h.transaction(1===m.length?m[0]:m,"readonly");if(t.autoSchema)r=h,s=g,e.verno=r.version/10,s=e._dbSchema=tG(0,r,s),e._storeNames=y(r.objectStoreNames,0),tL(e,[e._allTables],a(s),s);else if(tW(e,e._dbSchema,g),((u=tU(tG(0,(u=e).idbdb,g),u._dbSchema)).add.length||u.change.some(function(e){return e.add.length||e.change.length}))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),h.close(),i=h.version+1,o=!0,l(n());tF(e,g)}catch(e){}eY.push(e),h.onversionchange=eN(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),h.onclose=eN(function(t){e.on("close").fire(t)}),d&&(u=e._deps,g=p,h=u.indexedDB,u=u.IDBKeyRange,tX(h)||g===eH||tH(h,u).put({name:g}).catch(W)),l()},u)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<i)return i=0,n()}return ev.reject(e)})})]).then(function(){return s(),t.onReadyBeingFired=[],ev.resolve(t0(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(er,W);return t.onReadyBeingFired=[],ev.resolve(t0(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{c&&c.abort()}catch(e){}return n===t.openCanceller&&e._close(),eG(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return d&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new t2(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new t2(-1/0,[[[]]])}),tO(tT).fire(t),ri(t,!0)),e})}(e)})},rI.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=eY.indexOf(this);if(0<=t&&eY.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ev(function(t){e.dbReadyResolve=t}),e.openCanceller=new ev(function(t,r){e.cancelOpen=r}))},rI.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,e=this._state;t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},rI.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new ev(function(a,i){function o(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=eN(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,tX(n)||r===eH||tH(n,e).delete(r).catch(W),a()}),r.onerror=tE(i),r.onblocked=t._fireOnBlocked}if(r)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})},rI.prototype.backendDB=function(){return this.idbdb},rI.prototype.isOpen=function(){return null!==this.idbdb},rI.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},rI.prototype.hasFailed=function(){return null!==this._state.dbOpenError},rI.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rI.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rI.prototype.transaction=function(){var e=(function(e,t,r){var n=arguments.length;if(n<2)throw new K.InvalidArgument("Too few arguments");for(var a=Array(n-1);--n;)a[n-1]=arguments[n];return r=a.pop(),[e,E(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},rI.prototype._transaction=function(e,t,r){var n=this,a=eh.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var i,o,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map(function(e){if(e=e instanceof n.Table?e.name:e,"string"!=typeof e)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===eX)i=eX;else{if("rw"!=e&&e!=e0)throw new K.InvalidArgument("Invalid transaction mode: "+e);i=e0}if(a){if(a.mode===eX&&i===e0){if(!s)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&o.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!s)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),s&&a&&!a.active&&(a=null)}}catch(e){return a?a._promise(null,function(t,r){r(e)}):eG(e)}var l=(function e(t,r,n,a,i){return ev.resolve().then(function(){var o=eh.transless||eh,s=t._createTransaction(r,n,t._dbSchema,a);if(s.explicit=!0,o={trans:s,transless:o},a)s.idbtrans=a.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,i)})):eG(a)}var l,u=M(i);return u&&eD(),o=ev.follow(function(){var e;(l=i.call(s,s))&&(u?(e=eF.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=rs(l)))},o),(l&&"function"==typeof l.then?ev.resolve(l).then(function(e){return s.active?e:eG(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):o.then(function(){return l})).then(function(e){return a&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),eG(e)})})}).bind(null,this,i,o,a,r);return a?a._promise(i,l,"lock"):eh.trans?eq(eh.transless,function(){return n._whenReady(l)}):this._whenReady(l)},rI.prototype.table=function(e){if(!u(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rI);function rI(e,r){var n=this;this._middlewares={},this.verno=0;var a=rI.dependencies;this._options=r=t({addons:rI.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,o,s,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:W,dbReadyPromise:null,cancelOpen:W,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};c.dbReadyPromise=new ev(function(e){c.dbReadyResolve=e}),c.openCanceller=new ev(function(e,t){c.cancelOpen=t}),this._state=c,this.name=e,this.on=tt(this,"populate","blocked","versionchange","close",{ready:[er,W]}),this.once=function(e,t){var r=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];n.on(e).unsubscribe(r),t.apply(n,a)};return n.on(e,r)},this.on.ready.subscribe=g(this.on.ready.subscribe,function(e){return function(t,r){rI.vip(function(){var a=n._state;a.openComplete?(a.dbOpenError||ev.resolve().then(t),r&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),r&&e(t)):(e(t),r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)}))})}}),this.Collection=(i=this,tr(tp.prototype,function(e,t){this.db=i;var r=e2,n=null;if(t)try{r=t()}catch(e){n=e}var a=e._ctx,t=a.table,e=t.hook.reading.fire;this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:a.or,valueMapper:e!==J?e:null}})),this.Table=(o=this,tr(e7.prototype,function(e,t,r){this.db=o,this._tx=r,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:tt(null,{creating:[H,W],reading:[Q,J],updating:[ee,W],deleting:[X,W]})})),this.Transaction=(s=this,tr(tA.prototype,function(e,t,r,n,a){var i=this;"readonly"!==e&&t.forEach(function(e){(e=null==(e=r[e])?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=s,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=tt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ev(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),eG(e)})})),this.Version=(l=this,tr(tQ.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(u=this,tr(tx.prototype,function(e,t,r){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=e9,this._descending=function(e,t){return e9(t,e)},this._max=function(e,t){return 0<e9(e,t)?e:t},this._min=function(e,t){return 0>e9(e,t)?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=tP(r.IDBKeyRange),this._createTransaction=function(e,t,r,a){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),eY.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(rh),this.use(rx),this.use(rg),this.use(ru),this.use(rp);var d=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return rk(n.table(e),d)};var a=Reflect.get(e,t,r);return a instanceof e7?rk(a,d):"tables"===t?a.map(function(e){return rk(e,d)}):"_createTransaction"===t?function(){return rk(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(n)})}var rT,D="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",rS=(rO.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},rO.prototype[D]=function(){return this},rO);function rO(e){this._subscribe=e}try{rT={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(e){rT={indexedDB:null,IDBKeyRange:null}}function rA(e){var t,r=!1,n=new rS(function(n){var a,i=M(e),o=!1,s={},l={},c={get closed(){return o},unsubscribe:function(){o||(o=!0,a&&a.abort(),d&&tO.storagemutated.unsubscribe(f))}};n.start&&n.start(c);var d=!1,p=function(){return eV(h)},f=function(e){t7(s,e),re(l,s)&&p()},h=function(){var c,h;!o&&rT.indexedDB&&(s={},c={},a&&a.abort(),Promise.resolve(function(t){var r=eT();try{i&&eD();var n=e$(e,t);return n=i?n.finally(eF):n}finally{r&&eS()}}(h={subscr:c,signal:(a=new AbortController).signal,requery:p,querier:e,trans:null})).then(function(e){r=!0,t=e,o||h.signal.aborted||(s={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||(tO(tT,f),d=!0),eV(function(){return!o&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||eV(function(){o||n.error&&n.error(e)})}))};return setTimeout(p,0),c});return n.hasValue=function(){return r},n.getValue=function(){return t},n}function rN(e){var t=rC;try{rC=!0,tO.storagemutated.fire(e),ri(e,!0)}finally{rC=t}}c(rE,t(t({},G),{delete:function(e){return new rE(e,{addons:[]}).delete()},exists:function(e){return new rE(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){var t,r;try{return r=(t=rE.dependencies).indexedDB,t=t.IDBKeyRange,(tX(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==eH})}):tH(r,t).toCollection().primaryKeys()).then(e)}catch(e){return eG(new K.MissingAPI)}},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return eh.trans?eq(eh.transless,e):e()},vip:t0,async:function(e){return function(){try{var t=rs(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ev.resolve(t)}catch(e){return eG(e)}}},spawn:function(e,t,r){try{var n=rs(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:ev.resolve(n)}catch(e){return eG(e)}},currentTransaction:{get:function(){return eh.trans||null}},waitFor:function(e,t){return t=ev.resolve("function"==typeof e?rE.ignoreTransaction(e):e).timeout(t||6e4),eh.trans?eh.trans.waitFor(t):t},Promise:ev,debug:{get:function(){return en},set:function(e){en=e}},derive:f,extend:o,props:c,override:g,Events:tt,on:tO,liveQuery:rA,extendObservabilitySet:t7,getByKeyPath:w,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,function(t){_(e,t,void 0)})},shallowClone:x,deepClone:O,getObjectDiff:rc,cmp:e9,asap:b,minKey:-1/0,addons:[],connections:eY,errnames:q,dependencies:rT,cache:rt,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rE.maxKey=tP(rE.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(tO(tT,function(e){rC||(e=new CustomEvent(tS,{detail:e}),rC=!0,dispatchEvent(e),rC=!1)}),addEventListener(tS,function(e){e=e.detail,rC||rN(e)}));var rj,rC=!1,rR=function(){};return"undefined"!=typeof BroadcastChannel&&((rR=function(){(rj=new BroadcastChannel(tS)).onmessage=function(e){return e.data&&rN(e.data)}})(),"function"==typeof rj.unref&&rj.unref(),tO(tT,function(e){rC||rj.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rE.disableBfCache&&e.persisted){en&&console.debug("Dexie: handling persisted pagehide"),null!=rj&&rj.close();for(var t=0;t<eY.length;t++)eY[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rE.disableBfCache&&e.persisted&&(en&&console.debug("Dexie: handling persisted pageshow"),rR(),rN({all:new t2(-1/0,[[]])}))})),ev.rejectionMapper=function(e,t){return!e||e instanceof L||e instanceof TypeError||e instanceof SyntaxError||!e.name||!V[e.name]?e:(t=new V[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},t(rE,Object.freeze({__proto__:null,Dexie:rE,liveQuery:rA,Entity:e5,cmp:e9,PropModification:tc,replacePrefix:function(e,t){return new tc({replacePrefix:[e,t]})},add:function(e){return new tc({add:e})},remove:function(e){return new tc({remove:e})},default:rE,RangeSet:t2,mergeRanges:t5,rangesOverlap:t9}),{default:rE}),rE}()},1569:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7020).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1572:(e,t,r)=>{Promise.resolve().then(r.bind(r,4294))},2009:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,q:()=>i});var n=r(488),a=r(644);function i(e,t){let r=n.createContext(t),i=e=>{let{children:t,...i}=e,o=n.useMemo(()=>i,Object.values(i));return(0,a.jsx)(r.Provider,{value:o,children:t})};return i.displayName=e+"Provider",[i,function(a){let i=n.useContext(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function o(e,t=[]){let r=[],i=()=>{let t=r.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return i.scopeName=e,[function(t,i){let o=n.createContext(i),s=r.length;r=[...r,i];let l=t=>{let{scope:r,children:i,...l}=t,u=r?.[e]?.[s]||o,c=n.useMemo(()=>l,Object.values(l));return(0,a.jsx)(u.Provider,{value:c,children:i})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[s]||o,u=n.useContext(l);if(u)return u;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(i,...t)]}},2047:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>m,EN:()=>h,Eh:()=>c,F$:()=>f,GU:()=>S,MK:()=>d,S$:()=>a,ZM:()=>T,ZZ:()=>E,Zw:()=>o,d2:()=>u,f8:()=>g,gn:()=>s,hT:()=>I,j3:()=>l,lQ:()=>i,nJ:()=>p,pl:()=>x,y9:()=>k,yy:()=>_});var n=r(8292),a="undefined"==typeof window||"Deno"in globalThis;function i(){}function o(e,t){return"function"==typeof e?e(t):e}function s(e){return"number"==typeof e&&e>=0&&e!==1/0}function l(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t){return"function"==typeof e?e(t):e}function c(e,t){return"function"==typeof e?e(t):e}function d(e,t){let{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:s}=e;if(o){if(n){if(t.queryHash!==f(o,t.options))return!1}else if(!m(t.queryKey,o))return!1}if("all"!==r){let e=t.isActive();if("active"===r&&!e||"inactive"===r&&e)return!1}return("boolean"!=typeof s||t.isStale()===s)&&(!a||a===t.state.fetchStatus)&&(!i||!!i(t))}function p(e,t){let{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(h(t.options.mutationKey)!==h(i))return!1}else if(!m(t.options.mutationKey,i))return!1}return(!n||t.state.status===n)&&(!a||!!a(t))}function f(e,t){return(t?.queryKeyHashFn||h)(e)}function h(e){return JSON.stringify(e,(e,t)=>b(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function m(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).every(r=>m(e[r],t[r]))}var y=Object.prototype.hasOwnProperty;function g(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}function v(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function b(e){if(!w(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!w(r)&&!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return new Promise(t=>{n.zs.setTimeout(t,e)})}function x(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?function e(t,r){if(t===r)return t;let n=v(t)&&v(r);if(!n&&!(b(t)&&b(r)))return r;let a=(n?t:Object.keys(t)).length,i=n?r:Object.keys(r),o=i.length,s=n?Array(o):{},l=0;for(let u=0;u<o;u++){let o=n?u:i[u],c=t[o],d=r[o];if(c===d){s[o]=c,(n?u<a:y.call(t,o))&&l++;continue}if(null===c||null===d||"object"!=typeof c||"object"!=typeof d){s[o]=d;continue}let p=e(c,d);s[o]=p,p===c&&l++}return a===o&&l===a?t:s}(e,t):t}function k(e,t,r=0){let n=[...e,t];return r&&n.length>r?n.slice(1):n}function E(e,t,r=0){let n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var I=Symbol();function T(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==I?e.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${e.queryHash}'`))}function S(e,t){return"function"==typeof e?e(...t):!!e}},2603:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,t:()=>i});var n=r(488);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function o(...e){return n.useCallback(i(...e),e)}},2692:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(5151),a=r(2047),i=new class extends n.Q{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!a.S$&&window.addEventListener){let t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#e}}},3079:e=>{!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,i=l(e),o=i[0],s=i[1],u=new a((o+s)*3/4-s),c=0,d=s>0?o-4:o;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=0,s=n-a;o<s;o+=16383)i.push(function(e,t,n){for(var a,i=[],o=t;o<n;o+=3)a=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(r[a>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}(e,o,o+16383>s?s:o+16383));return 1===a?i.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===a&&i.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),i.join("")};for(var r=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=i.length;o<s;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),a=r(783),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,a=t;if(("string"!=typeof a||""===a)&&(a="utf8"),!s.isEncoding(a))throw TypeError("Unknown encoding: "+a);var i=0|f(n,a),l=o(i),u=l.write(n,a);return u!==i&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),s.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return s.from(c,t,r);var h=function(e){if(s.isBuffer(e)){var t=0|p(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(h)return h;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|p(e))}function d(e){for(var t=e.length<0?0:0|p(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,r){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)};function p(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return S(e).length;default:if(a)return n?-1:I(e).length;t=(""+t).toLowerCase(),a=!0}}function h(e,t,r){var a,i,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=N[e[i]];return a}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}(this,t,r);case"base64":return a=this,i=t,o=r,0===i&&o===a.length?n.fromByteArray(a):n.fromByteArray(a.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}(this,t,r);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,a){var i;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(i=r*=1)!=i&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(a)return -1;else r=e.length-1;else if(r<0)if(!a)return -1;else r=0;if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,a);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(a)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return g(e,[t],r,n,a)}throw TypeError("val must be string, number or Buffer")}function g(e,t,r,n,a){var i,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*o}else -1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var d=!0,p=0;p<l;p++)if(u(e,i+p)!==u(t,p)){d=!1;break}if(d)return i}return -1}s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:+(n<r)},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=s.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(A(i,Uint8Array)&&(i=s.from(i)),!s.isBuffer(i))throw TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):h.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(e,t,r,n,a){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var i=a-n,o=r-t,l=Math.min(i,o),u=this.slice(n,a),c=e.slice(t,r),d=0;d<l;++d)if(u[d]!==c[d]){i=u[d],o=c[d];break}return i<o?-1:+(o<i)},s.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i,o,s,l,u=e[a],c=null,d=u>239?4:u>223?3:u>191?2:1;if(a+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:(192&(i=e[a+1]))==128&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[a+1],o=e[a+2],(192&i)==128&&(192&o)==128&&(l=(15&u)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],(192&i)==128&&(192&o)==128&&(192&s)==128&&(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=d}var p=n,f=p.length;if(f<=4096)return String.fromCharCode.apply(String,p);for(var h="",m=0;m<f;)h+=String.fromCharCode.apply(String,p.slice(m,m+=4096));return h}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,a,i){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,a,i){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,n,i){return t*=1,r>>>=0,i||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t*=1,r>>>=0,i||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,r,n,52,8),r+8}s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a,i,o,s,l,u,c,d,p=this.length-t;if((void 0===r||r>p)&&(r=p),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var s,l=parseInt(t.substr(2*o,2),16);if((s=l)!=s)break;e[r+o]=l}return o}(this,e,t,r);case"utf8":case"utf-8":return a=t,i=r,O(I(e,this.length-a),this,a,i);case"ascii":return o=t,s=r,O(T(e),this,o,s);case"latin1":case"binary":return function(e,t,r,n){return O(T(t),e,r,n)}(this,e,t,r);case"base64":return l=t,u=r,O(S(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,O(function(e,t){for(var r,n,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,a.push(r%256),a.push(n);return a}(e,this.length-c),this,c,d);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var a=Math.pow(2,8*r)-1;w(this,e,t,r,a,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var a=Math.pow(2,8*r)-1;w(this,e,t,r,a,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var a=Math.pow(2,8*r-1);w(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var a=Math.pow(2,8*r-1);w(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=a-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return a},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var a,i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=s.isBuffer(e)?e:s.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=o[a%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var r,n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319||o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return i}function T(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function S(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length)&&!(a>=e.length);++a)t[a+r]=e[a];return a}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var N=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,a=0;a<16;++a)t[n+a]=e[r]+e[a];return t}()},783:function(e,t){t.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?a-1:0,p=r?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=p,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=256*o+e[t+d],d+=p,c-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),i-=u}return(f?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,s,l,u=8*i-a-1,c=(1<<u)-1,d=c>>1,p=5960464477539062e-23*(23===a),f=n?0:i-1,h=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?t+=p/l:t+=p*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,a),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[r+f]=255&s,f+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[r+f]=255&o,f+=h,o/=256,u-=8);e[r+f-h]|=128*m}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}},o=!0;try{t[e](i,i.exports,n),o=!1}finally{o&&delete r[e]}return i.exports}n.ab="//",e.exports=n(72)}()},3439:(e,t,r)=>{"use strict";r.d(t,{cn:()=>er,Yq:()=>ea,v7:()=>en});var n=r(693);let a=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],n=t.nextPart.get(r),i=n?a(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;let o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},i=/^\[(.+)\]$/,o=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:s(t,e)).classGroupId=r;return}if("function"==typeof e)return l(e)?void o(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,a])=>{o(a,s(t,e),r,n)})})},s=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},l=e=>e.isThemeGetter,u=/\s+/;function c(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=d(e))&&(n&&(n+=" "),n+=t);return n}let d=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=d(e[n]))&&(r&&(r+=" "),r+=t);return r},p=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},f=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,h=/^\((?:(\w[\w-]*):)?(.+)\)$/i,m=/^\d+\/\d+$/,y=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,g=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,b=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,w=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_=e=>m.test(e),x=e=>!!e&&!Number.isNaN(Number(e)),k=e=>!!e&&Number.isInteger(Number(e)),E=e=>e.endsWith("%")&&x(e.slice(0,-1)),I=e=>y.test(e),T=()=>!0,S=e=>g.test(e)&&!v.test(e),O=()=>!1,A=e=>b.test(e),N=e=>w.test(e),j=e=>!R(e)&&!F(e),C=e=>V(e,Q,O),R=e=>f.test(e),P=e=>V(e,Y,S),z=e=>V(e,H,x),M=e=>V(e,W,O),$=e=>V(e,J,N),D=e=>V(e,ee,A),F=e=>h.test(e),L=e=>G(e,Y),Z=e=>G(e,X),B=e=>G(e,W),U=e=>G(e,Q),q=e=>G(e,J),K=e=>G(e,ee,!0),V=(e,t,r)=>{let n=f.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},G=(e,t,r=!1)=>{let n=h.exec(e);return!!n&&(n[1]?t(n[1]):r)},W=e=>"position"===e||"percentage"===e,J=e=>"image"===e||"url"===e,Q=e=>"length"===e||"size"===e||"bg-size"===e,Y=e=>"length"===e,H=e=>"number"===e,X=e=>"family-name"===e,ee=e=>"shadow"===e;Symbol.toStringTag;let et=function(e,...t){let r,n,s,l=function(u){let c;return n=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,n=new Map,a=(a,i)=>{r.set(a,i),++t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}})((c=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,n=e=>{let t,r,n=[],a=0,i=0,o=0;for(let r=0;r<e.length;r++){let s=e[r];if(0===a&&0===i){if(":"===s){n.push(e.slice(o,r)),o=r+1;continue}if("/"===s){t=r;continue}}"["===s?a++:"]"===s?a--:"("===s?i++:")"===s&&i--}let s=0===n.length?e:e.substring(o),l=(r=s).endsWith("!")?r.substring(0,r.length-1):r.startsWith("!")?r.substring(1):r;return{modifiers:n,hasImportantModifier:l!==s,baseClassName:l,maybePostfixModifierPosition:t&&t>o?t-o:void 0}};if(t){let e=t+":",r=n;n=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){let e=n;n=t=>r({className:t,parseClassName:e})}return n})(c),sortModifiers:(e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let r=[],n=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...n.sort(),e),n=[]):n.push(e)}),r.push(...n.sort()),r}})(c),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(let e in r)o(r[e],n,e,t);return n})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),a(r,t)||(e=>{if(i.test(e)){let t=i.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}})(e)},getConflictingClassGroupIds:(e,t)=>{let a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}})(c)}).cache.get,s=r.cache.set,l=d,d(u)};function d(e){let t=n(e);if(t)return t;let a=((e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(u),l="";for(let e=s.length-1;e>=0;e-=1){let t=s[e],{isExternal:u,modifiers:c,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:f}=r(t);if(u){l=t+(l.length>0?" "+l:l);continue}let h=!!f,m=n(h?p.substring(0,f):p);if(!m){if(!h||!(m=n(p))){l=t+(l.length>0?" "+l:l);continue}h=!1}let y=i(c).join(":"),g=d?y+"!":y,v=g+m;if(o.includes(v))continue;o.push(v);let b=a(m,h);for(let e=0;e<b.length;++e){let t=b[e];o.push(g+t)}l=t+(l.length>0?" "+l:l)}return l})(e,r);return s(e,a),a}return function(){return l(c.apply(null,arguments))}}(()=>{let e=p("color"),t=p("font"),r=p("text"),n=p("font-weight"),a=p("tracking"),i=p("leading"),o=p("breakpoint"),s=p("container"),l=p("spacing"),u=p("radius"),c=p("shadow"),d=p("inset-shadow"),f=p("text-shadow"),h=p("drop-shadow"),m=p("blur"),y=p("perspective"),g=p("aspect"),v=p("ease"),b=p("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...S(),F,R],A=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],V=()=>[F,R,l],G=()=>[_,"full","auto",...V()],W=()=>[k,"none","subgrid",F,R],J=()=>["auto",{span:["full",k,F,R]},k,F,R],Q=()=>[k,"auto",F,R],Y=()=>["auto","min","max","fr",F,R],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],ee=()=>["auto",...V()],et=()=>[_,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...V()],er=()=>[e,F,R],en=()=>[...S(),B,M,{position:[F,R]}],ea=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ei=()=>["auto","cover","contain",U,C,{size:[F,R]}],eo=()=>[E,L,P],es=()=>["","none","full",u,F,R],el=()=>["",x,L,P],eu=()=>["solid","dashed","dotted","double"],ec=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ed=()=>[x,E,B,M],ep=()=>["","none",m,F,R],ef=()=>["none",x,F,R],eh=()=>["none",x,F,R],em=()=>[x,F,R],ey=()=>[_,"full",...V()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[I],breakpoint:[I],color:[T],container:[I],"drop-shadow":[I],ease:["in","out","in-out"],font:[j],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[I],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[I],shadow:[I],spacing:["px",x],text:[I],"text-shadow":[I],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_,R,F,g]}],container:["container"],columns:[{columns:[x,R,F,s]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[k,"auto",F,R]}],basis:[{basis:[_,"full","auto",s,...V()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[x,_,"auto","initial","none",R]}],grow:[{grow:["",x,F,R]}],shrink:[{shrink:["",x,F,R]}],order:[{order:[k,"first","last","none",F,R]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:V()}],px:[{px:V()}],py:[{py:V()}],ps:[{ps:V()}],pe:[{pe:V()}],pt:[{pt:V()}],pr:[{pr:V()}],pb:[{pb:V()}],pl:[{pl:V()}],m:[{m:ee()}],mx:[{mx:ee()}],my:[{my:ee()}],ms:[{ms:ee()}],me:[{me:ee()}],mt:[{mt:ee()}],mr:[{mr:ee()}],mb:[{mb:ee()}],ml:[{ml:ee()}],"space-x":[{"space-x":V()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":V()}],"space-y-reverse":["space-y-reverse"],size:[{size:et()}],w:[{w:[s,"screen",...et()]}],"min-w":[{"min-w":[s,"screen","none",...et()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...et()]}],h:[{h:["screen","lh",...et()]}],"min-h":[{"min-h":["screen","lh","none",...et()]}],"max-h":[{"max-h":["screen","lh",...et()]}],"font-size":[{text:["base",r,L,P]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,F,z]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",E,R]}],"font-family":[{font:[Z,R,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,F,R]}],"line-clamp":[{"line-clamp":[x,"none",F,z]}],leading:[{leading:[i,...V()]}],"list-image":[{"list-image":["none",F,R]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",F,R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:er()}],"text-color":[{text:er()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...eu(),"wavy"]}],"text-decoration-thickness":[{decoration:[x,"from-font","auto",F,P]}],"text-decoration-color":[{decoration:er()}],"underline-offset":[{"underline-offset":[x,"auto",F,R]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F,R]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F,R]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:en()}],"bg-repeat":[{bg:ea()}],"bg-size":[{bg:ei()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},k,F,R],radial:["",F,R],conic:[k,F,R]},q,$]}],"bg-color":[{bg:er()}],"gradient-from-pos":[{from:eo()}],"gradient-via-pos":[{via:eo()}],"gradient-to-pos":[{to:eo()}],"gradient-from":[{from:er()}],"gradient-via":[{via:er()}],"gradient-to":[{to:er()}],rounded:[{rounded:es()}],"rounded-s":[{"rounded-s":es()}],"rounded-e":[{"rounded-e":es()}],"rounded-t":[{"rounded-t":es()}],"rounded-r":[{"rounded-r":es()}],"rounded-b":[{"rounded-b":es()}],"rounded-l":[{"rounded-l":es()}],"rounded-ss":[{"rounded-ss":es()}],"rounded-se":[{"rounded-se":es()}],"rounded-ee":[{"rounded-ee":es()}],"rounded-es":[{"rounded-es":es()}],"rounded-tl":[{"rounded-tl":es()}],"rounded-tr":[{"rounded-tr":es()}],"rounded-br":[{"rounded-br":es()}],"rounded-bl":[{"rounded-bl":es()}],"border-w":[{border:el()}],"border-w-x":[{"border-x":el()}],"border-w-y":[{"border-y":el()}],"border-w-s":[{"border-s":el()}],"border-w-e":[{"border-e":el()}],"border-w-t":[{"border-t":el()}],"border-w-r":[{"border-r":el()}],"border-w-b":[{"border-b":el()}],"border-w-l":[{"border-l":el()}],"divide-x":[{"divide-x":el()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":el()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...eu(),"hidden","none"]}],"divide-style":[{divide:[...eu(),"hidden","none"]}],"border-color":[{border:er()}],"border-color-x":[{"border-x":er()}],"border-color-y":[{"border-y":er()}],"border-color-s":[{"border-s":er()}],"border-color-e":[{"border-e":er()}],"border-color-t":[{"border-t":er()}],"border-color-r":[{"border-r":er()}],"border-color-b":[{"border-b":er()}],"border-color-l":[{"border-l":er()}],"divide-color":[{divide:er()}],"outline-style":[{outline:[...eu(),"none","hidden"]}],"outline-offset":[{"outline-offset":[x,F,R]}],"outline-w":[{outline:["",x,L,P]}],"outline-color":[{outline:er()}],shadow:[{shadow:["","none",c,K,D]}],"shadow-color":[{shadow:er()}],"inset-shadow":[{"inset-shadow":["none",d,K,D]}],"inset-shadow-color":[{"inset-shadow":er()}],"ring-w":[{ring:el()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:er()}],"ring-offset-w":[{"ring-offset":[x,P]}],"ring-offset-color":[{"ring-offset":er()}],"inset-ring-w":[{"inset-ring":el()}],"inset-ring-color":[{"inset-ring":er()}],"text-shadow":[{"text-shadow":["none",f,K,D]}],"text-shadow-color":[{"text-shadow":er()}],opacity:[{opacity:[x,F,R]}],"mix-blend":[{"mix-blend":[...ec(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ec()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[x]}],"mask-image-linear-from-pos":[{"mask-linear-from":ed()}],"mask-image-linear-to-pos":[{"mask-linear-to":ed()}],"mask-image-linear-from-color":[{"mask-linear-from":er()}],"mask-image-linear-to-color":[{"mask-linear-to":er()}],"mask-image-t-from-pos":[{"mask-t-from":ed()}],"mask-image-t-to-pos":[{"mask-t-to":ed()}],"mask-image-t-from-color":[{"mask-t-from":er()}],"mask-image-t-to-color":[{"mask-t-to":er()}],"mask-image-r-from-pos":[{"mask-r-from":ed()}],"mask-image-r-to-pos":[{"mask-r-to":ed()}],"mask-image-r-from-color":[{"mask-r-from":er()}],"mask-image-r-to-color":[{"mask-r-to":er()}],"mask-image-b-from-pos":[{"mask-b-from":ed()}],"mask-image-b-to-pos":[{"mask-b-to":ed()}],"mask-image-b-from-color":[{"mask-b-from":er()}],"mask-image-b-to-color":[{"mask-b-to":er()}],"mask-image-l-from-pos":[{"mask-l-from":ed()}],"mask-image-l-to-pos":[{"mask-l-to":ed()}],"mask-image-l-from-color":[{"mask-l-from":er()}],"mask-image-l-to-color":[{"mask-l-to":er()}],"mask-image-x-from-pos":[{"mask-x-from":ed()}],"mask-image-x-to-pos":[{"mask-x-to":ed()}],"mask-image-x-from-color":[{"mask-x-from":er()}],"mask-image-x-to-color":[{"mask-x-to":er()}],"mask-image-y-from-pos":[{"mask-y-from":ed()}],"mask-image-y-to-pos":[{"mask-y-to":ed()}],"mask-image-y-from-color":[{"mask-y-from":er()}],"mask-image-y-to-color":[{"mask-y-to":er()}],"mask-image-radial":[{"mask-radial":[F,R]}],"mask-image-radial-from-pos":[{"mask-radial-from":ed()}],"mask-image-radial-to-pos":[{"mask-radial-to":ed()}],"mask-image-radial-from-color":[{"mask-radial-from":er()}],"mask-image-radial-to-color":[{"mask-radial-to":er()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[x]}],"mask-image-conic-from-pos":[{"mask-conic-from":ed()}],"mask-image-conic-to-pos":[{"mask-conic-to":ed()}],"mask-image-conic-from-color":[{"mask-conic-from":er()}],"mask-image-conic-to-color":[{"mask-conic-to":er()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:en()}],"mask-repeat":[{mask:ea()}],"mask-size":[{mask:ei()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",F,R]}],filter:[{filter:["","none",F,R]}],blur:[{blur:ep()}],brightness:[{brightness:[x,F,R]}],contrast:[{contrast:[x,F,R]}],"drop-shadow":[{"drop-shadow":["","none",h,K,D]}],"drop-shadow-color":[{"drop-shadow":er()}],grayscale:[{grayscale:["",x,F,R]}],"hue-rotate":[{"hue-rotate":[x,F,R]}],invert:[{invert:["",x,F,R]}],saturate:[{saturate:[x,F,R]}],sepia:[{sepia:["",x,F,R]}],"backdrop-filter":[{"backdrop-filter":["","none",F,R]}],"backdrop-blur":[{"backdrop-blur":ep()}],"backdrop-brightness":[{"backdrop-brightness":[x,F,R]}],"backdrop-contrast":[{"backdrop-contrast":[x,F,R]}],"backdrop-grayscale":[{"backdrop-grayscale":["",x,F,R]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x,F,R]}],"backdrop-invert":[{"backdrop-invert":["",x,F,R]}],"backdrop-opacity":[{"backdrop-opacity":[x,F,R]}],"backdrop-saturate":[{"backdrop-saturate":[x,F,R]}],"backdrop-sepia":[{"backdrop-sepia":["",x,F,R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":V()}],"border-spacing-x":[{"border-spacing-x":V()}],"border-spacing-y":[{"border-spacing-y":V()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",F,R]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[x,"initial",F,R]}],ease:[{ease:["linear","initial",v,F,R]}],delay:[{delay:[x,F,R]}],animate:[{animate:["none",b,F,R]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,F,R]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:ef()}],"rotate-x":[{"rotate-x":ef()}],"rotate-y":[{"rotate-y":ef()}],"rotate-z":[{"rotate-z":ef()}],scale:[{scale:eh()}],"scale-x":[{"scale-x":eh()}],"scale-y":[{"scale-y":eh()}],"scale-z":[{"scale-z":eh()}],"scale-3d":["scale-3d"],skew:[{skew:em()}],"skew-x":[{"skew-x":em()}],"skew-y":[{"skew-y":em()}],transform:[{transform:[F,R,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ey()}],"translate-x":[{"translate-x":ey()}],"translate-y":[{"translate-y":ey()}],"translate-z":[{"translate-z":ey()}],"translate-none":["translate-none"],accent:[{accent:er()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:er()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F,R]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F,R]}],fill:[{fill:["none",...er()]}],"stroke-w":[{stroke:[x,L,P,z]}],stroke:[{stroke:["none",...er()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function er(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return et((0,n.$)(t))}function en(e){if(0===e)return"0 B";if(e<1024)return"".concat(e," B");let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/1024**t).toFixed(2))," ").concat(["B","KB","MB","GB"][t])}function ea(e){let t=new Date(e);if(isNaN(t.getTime()))return"无效日期";let r=Math.floor((new Date().getTime()-t.getTime())/864e5);return 0===r?t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):1===r?"昨天":r<7?t.toLocaleDateString("zh-CN",{weekday:"short"}):r<365?t.toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):t.toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"})}},3491:(e,t,r)=>{"use strict";r.d(t,{I:()=>w});var n=r(3749),a=r(7190),i=r(7162),o=r(5151),s=r(5585),l=r(2047),u=r(8292),c=class extends o.Q{constructor(e,t){super(),this.options=t,this.#n=e,this.#a=null,this.#i=(0,s.T)(),this.bindMethods(),this.setOptions(t)}#n;#o=void 0;#s=void 0;#l=void 0;#u;#c;#i;#a;#d;#p;#f;#h;#m;#y;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#o.addObserver(this),d(this.#o,this.options)?this.#v():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return p(this.#o,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return p(this.#o,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#_(),this.#o.removeObserver(this)}setOptions(e){let t=this.options,r=this.#o;if(this.options=this.#n.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#o))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#o.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#o,observer:this});let n=this.hasListeners();n&&f(this.#o,r,this.options,t)&&this.#v(),this.updateResult(),n&&(this.#o!==r||(0,l.Eh)(this.options.enabled,this.#o)!==(0,l.Eh)(t.enabled,this.#o)||(0,l.d2)(this.options.staleTime,this.#o)!==(0,l.d2)(t.staleTime,this.#o))&&this.#k();let a=this.#E();n&&(this.#o!==r||(0,l.Eh)(this.options.enabled,this.#o)!==(0,l.Eh)(t.enabled,this.#o)||a!==this.#y)&&this.#I(a)}getOptimisticResult(e){var t,r;let n=this.#n.getQueryCache().build(this.#n,e),a=this.createResult(n,e);return t=this,r=a,(0,l.f8)(t.getCurrentResult(),r)||(this.#l=a,this.#c=this.options,this.#u=this.#o.state),a}getCurrentResult(){return this.#l}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==this.#i.status||this.#i.reject(Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){this.#g.add(e)}getCurrentQuery(){return this.#o}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#n.defaultQueryOptions(e),r=this.#n.getQueryCache().build(this.#n,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#v({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#l))}#v(e){this.#x();let t=this.#o.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#k(){this.#w();let e=(0,l.d2)(this.options.staleTime,this.#o);if(l.S$||this.#l.isStale||!(0,l.gn)(e))return;let t=(0,l.j3)(this.#l.dataUpdatedAt,e);this.#h=u.zs.setTimeout(()=>{this.#l.isStale||this.updateResult()},t+1)}#E(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#o):this.options.refetchInterval)??!1}#I(e){this.#_(),this.#y=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#o)&&(0,l.gn)(this.#y)&&0!==this.#y&&(this.#m=u.zs.setInterval(()=>{(this.options.refetchIntervalInBackground||n.m.isFocused())&&this.#v()},this.#y))}#b(){this.#k(),this.#I(this.#E())}#w(){this.#h&&(u.zs.clearTimeout(this.#h),this.#h=void 0)}#_(){this.#m&&(u.zs.clearInterval(this.#m),this.#m=void 0)}createResult(e,t){let r,n=this.#o,a=this.options,o=this.#l,u=this.#u,c=this.#c,p=e!==n?e.state:this.#s,{state:m}=e,y={...m},g=!1;if(t._optimisticResults){let r=this.hasListeners(),o=!r&&d(e,t),s=r&&f(e,n,t,a);(o||s)&&(y={...y,...(0,i.k)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(y.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:w}=y;r=y.data;let _=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===w){let e;o?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(e=o.data,_=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,void 0!==e&&(w="success",r=(0,l.pl)(o?.data,e,t),g=!0)}if(t.select&&void 0!==r&&!_)if(o&&r===u?.data&&t.select===this.#d)r=this.#p;else try{this.#d=t.select,r=t.select(r),r=(0,l.pl)(o?.data,r,t),this.#p=r,this.#a=null}catch(e){this.#a=e}this.#a&&(v=this.#a,r=this.#p,b=Date.now(),w="error");let x="fetching"===y.fetchStatus,k="pending"===w,E="error"===w,I=k&&x,T=void 0!==r,S={status:w,fetchStatus:y.fetchStatus,isPending:k,isSuccess:"success"===w,isError:E,isInitialLoading:I,isLoading:I,data:r,dataUpdatedAt:y.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:x,isRefetching:x&&!k,isLoadingError:E&&!T,isPaused:"paused"===y.fetchStatus,isPlaceholderData:g,isRefetchError:E&&T,isStale:h(e,t),refetch:this.refetch,promise:this.#i,isEnabled:!1!==(0,l.Eh)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},r=()=>{t(this.#i=S.promise=(0,s.T)())},a=this.#i;switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":("error"===S.status||S.data!==a.value)&&r();break;case"rejected":("error"!==S.status||S.error!==a.reason)&&r()}}return S}updateResult(){let e=this.#l,t=this.createResult(this.#o,this.options);if(this.#u=this.#o.state,this.#c=this.options,void 0!==this.#u.data&&(this.#f=this.#o),(0,l.f8)(t,e))return;this.#l=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#g.size)return!0;let n=new Set(r??this.#g);return this.options.throwOnError&&n.add("error"),Object.keys(this.#l).some(t=>this.#l[t]!==e[t]&&n.has(t))};this.#T({listeners:r()})}#x(){let e=this.#n.getQueryCache().build(this.#n,this.options);if(e===this.#o)return;let t=this.#o;this.#o=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#T(e){a.jG.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#l)}),this.#n.getQueryCache().notify({query:this.#o,type:"observerResultsUpdated"})})}};function d(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&p(e,t,t.refetchOnMount)}function p(e,t,r){if(!1!==(0,l.Eh)(t.enabled,e)&&"static"!==(0,l.d2)(t.staleTime,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&h(e,t)}return!1}function f(e,t,r,n){return(e!==t||!1===(0,l.Eh)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&h(e,r)}function h(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var m=r(488),y=r(3670);r(644);var g=m.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),v=m.createContext(!1);v.Provider;var b=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function w(e,t){return function(e,t,r){var n,i,o,s,u;let c=m.useContext(v),d=m.useContext(g),p=(0,y.jE)(r),f=p.defaultQueryOptions(e);if(null==(i=p.getDefaultOptions().queries)||null==(n=i._experimental_beforeQuery)||n.call(i,f),f._optimisticResults=c?"isRestoring":"optimistic",f.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=f.staleTime;f.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof f.gcTime&&(f.gcTime=Math.max(f.gcTime,1e3))}(f.suspense||f.throwOnError||f.experimental_prefetchInRender)&&!d.isReset()&&(f.retryOnMount=!1),m.useEffect(()=>{d.clearReset()},[d]);let h=!p.getQueryCache().get(f.queryHash),[w]=m.useState(()=>new t(p,f)),_=w.getOptimisticResult(f),x=!c&&!1!==e.subscribed;if(m.useSyncExternalStore(m.useCallback(e=>{let t=x?w.subscribe(a.jG.batchCalls(e)):l.lQ;return w.updateResult(),t},[w,x]),()=>w.getCurrentResult(),()=>w.getCurrentResult()),m.useEffect(()=>{w.setOptions(f)},[f,w]),f?.suspense&&_.isPending)throw b(f,w,d);if((e=>{let{result:t,errorResetBoundary:r,throwOnError:n,query:a,suspense:i}=e;return t.isError&&!r.isReset()&&!t.isFetching&&a&&(i&&void 0===t.data||(0,l.GU)(n,[t.error,a]))})({result:_,errorResetBoundary:d,throwOnError:f.throwOnError,query:p.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw _.error;if(null==(s=p.getDefaultOptions().queries)||null==(o=s._experimental_afterQuery)||o.call(s,f,_),f.experimental_prefetchInRender&&!l.S$&&_.isLoading&&_.isFetching&&!c){let e=h?b(f,w,d):null==(u=p.getQueryCache().get(f.queryHash))?void 0:u.promise;null==e||e.catch(l.lQ).finally(()=>{w.updateResult()})}return f.notifyOnChangeProps?_:w.trackResult(_)}(e,c,t)}},3648:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(644),a=r(8208),i=r.n(a),o=r(5605);let s={HOME:"/",SETTINGS:"/settings",ACCOUNT:"/account"};var l=r(7020);let u=(0,l.A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),c=(0,l.A)("contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]),d=(0,l.A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),p=(0,l.A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var f=r(5543);function h(){let{theme:e,toggleTheme:t}=(0,f.D)();return(0,n.jsxs)("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full p-2 text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",title:"切换主题",children:["system"===e?(0,n.jsx)(u,{className:"h-5 w-5"}):"high-contrast"===e?(0,n.jsx)(c,{className:"h-5 w-5"}):"dark"===e?(0,n.jsx)(d,{className:"h-5 w-5"}):(0,n.jsx)(p,{className:"h-5 w-5"}),(0,n.jsx)("span",{className:"sr-only",children:"切换主题"})]})}function m(){let e=(0,o.usePathname)(),t=[{id:"files",label:"文件",icon:"folder",href:s.HOME},{id:"account",label:"用户中心",icon:"account_circle",href:s.ACCOUNT},{id:"settings",label:"设置",icon:"settings",href:s.SETTINGS}];return(0,n.jsx)("nav",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-20",children:(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-full bg-surface/90 backdrop-blur-sm p-1.5 shadow-lg border-2 border-border/80",children:[t.map(t=>{let r=e===t.href.replace(/#.*/,"")||t.href.startsWith("/")&&e.startsWith("/player")&&"/"===t.href;return(0,n.jsx)(i(),{href:t.href,className:"flex h-11 w-11 items-center justify-center rounded-full text-[var(--color-primary)]/80 hover:bg-[var(--color-primary)]/10 transition-colors ".concat(r?"bg-[var(--color-primary)]/10":""),"aria-label":t.label,"aria-current":r?"page":void 0,children:(0,n.jsx)("span",{className:"material-symbols-outlined text-2xl",children:t.icon})},t.id)}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(h,{})})]})})}},3670:(e,t,r)=>{"use strict";r.d(t,{Ht:()=>s,jE:()=>o});var n=r(488),a=r(644),i=n.createContext(void 0),o=e=>{let t=n.useContext(i);if(e)return e;if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},s=e=>{let{client:t,children:r}=e;return n.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,a.jsx)(i.Provider,{value:t,children:r})}},3749:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(5151),a=r(2047),i=new class extends n.Q{#S;#t;#r;constructor(){super(),this.#r=e=>{if(!a.S$&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#S!==e&&(this.#S=e,this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#S?this.#S:globalThis.document?.visibilityState!=="hidden"}}},3845:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,s:()=>o});var n=r(7190),a=r(5615),i=r(7751),o=class extends a.k{#n;#O;#A;#N;constructor(e){super(),this.#n=e.client,this.mutationId=e.mutationId,this.#A=e.mutationCache,this.#O=[],this.state=e.state||s(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#O.includes(e)||(this.#O.push(e),this.clearGcTimeout(),this.#A.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#O=this.#O.filter(t=>t!==e),this.scheduleGc(),this.#A.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#O.length||("pending"===this.state.status?this.scheduleGc():this.#A.remove(this))}continue(){return this.#N?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#j({type:"continue"})},r={client:this.#n,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#N=(0,i.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#j({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#j({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#A.canRun(this)});let n="pending"===this.state.status,a=!this.#N.canStart();try{if(n)t();else{this.#j({type:"pending",variables:e,isPaused:a}),await this.#A.config.onMutate?.(e,this,r);let t=await this.options.onMutate?.(e,r);t!==this.state.context&&this.#j({type:"pending",context:t,variables:e,isPaused:a})}let i=await this.#N.start();return await this.#A.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#A.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#j({type:"success",data:i}),i}catch(t){try{throw await this.#A.config.onError?.(t,e,this.state.context,this,r),await this.options.onError?.(t,e,this.state.context,r),await this.#A.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,t,e,this.state.context,r),t}finally{this.#j({type:"error",error:t})}}finally{this.#A.runNext(this)}}#j(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),n.jG.batch(()=>{this.#O.forEach(t=>{t.onMutationUpdate(e)}),this.#A.notify({mutation:this,type:"updated",action:e})})}};function s(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},3863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return i},formatWithValidation:function(){return s},urlObjectKeys:function(){return o}});let n=r(4295)._(r(8661)),a=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,i=e.protocol||"",o=e.pathname||"",s=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let c=e.search||l&&"?"+l||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||a.test(i))&&!1!==u?(u="//"+(u||""),o&&"/"!==o[0]&&(o="/"+o)):u||(u=""),s&&"#"!==s[0]&&(s="#"+s),c&&"?"!==c[0]&&(c="?"+c),""+i+u+(o=o.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+s}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function s(e){return i(e)}},4294:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>dt});var a,i,o,s,l,u,c,d,p,f,h,m,y,g,v,b,w,_,x,k,E,I,T,S,O,A,N,j,C,R,P,z,M,$,D,F,L,Z,B,U,q,K,V={};r.r(V),r.d(V,{base64:()=>rd,base64url:()=>rp,bigint:()=>rx,boolean:()=>rI,browserEmail:()=>ri,cidrv4:()=>ru,cidrv6:()=>rc,cuid:()=>tY,cuid2:()=>tH,date:()=>rg,datetime:()=>rw,domain:()=>rh,duration:()=>t4,e164:()=>rm,email:()=>re,emoji:()=>ro,extendedDuration:()=>t5,guid:()=>t9,hex:()=>rN,hostname:()=>rf,html5Email:()=>rt,idnEmail:()=>ra,integer:()=>rk,ipv4:()=>rs,ipv6:()=>rl,ksuid:()=>t1,lowercase:()=>rO,md5_base64:()=>rP,md5_base64url:()=>rz,md5_hex:()=>rR,nanoid:()=>t2,null:()=>rT,number:()=>rE,rfc5322Email:()=>rr,sha1_base64:()=>r$,sha1_base64url:()=>rD,sha1_hex:()=>rM,sha256_base64:()=>rL,sha256_base64url:()=>rZ,sha256_hex:()=>rF,sha384_base64:()=>rU,sha384_base64url:()=>rq,sha384_hex:()=>rB,sha512_base64:()=>rV,sha512_base64url:()=>rG,sha512_hex:()=>rK,string:()=>r_,time:()=>rb,ulid:()=>tX,undefined:()=>rS,unicodeEmail:()=>rn,uppercase:()=>rA,uuid:()=>t6,uuid4:()=>t3,uuid6:()=>t8,uuid7:()=>t7,xid:()=>t0});var G=r(644),W=r(5605),J=r(7431),Q=r(7020);let Y=(0,Q.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var H=r(488),X=r(4456);class ee extends H.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(0,G.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:(0,G.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,G.jsxs)("div",{className:"mb-6",children:[(0,G.jsx)("div",{className:"mb-4 text-6xl",children:"\uD83D\uDE35"}),(0,G.jsx)("h1",{className:"mb-2 font-bold text-2xl text-foreground",children:"播放器遇到了问题"}),(0,G.jsx)("p",{className:"mb-6 text-muted-foreground",children:(null==(e=this.state.error)?void 0:e.message)||"发生了未知错误"})]}),(0,G.jsxs)("div",{className:"flex flex-col justify-center gap-3 sm:flex-row",children:[(0,G.jsxs)(X.$,{variant:"outline",onClick:()=>window.location.reload(),className:"flex items-center gap-2",children:[(0,G.jsx)(J.A,{className:"h-4 w-4"}),"刷新页面"]}),(0,G.jsxs)(X.$,{onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[(0,G.jsx)(Y,{className:"h-4 w-4"}),"返回上一页"]})]}),!1]})})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}}var et=r(8371);let er=(0,Q.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function en(){return(0,G.jsxs)("div",{className:"player-card flex min-h-[40vh] flex-col items-center justify-center gap-4 text-sm text-[var(--secondary-text-color)] dark:text-[var(--text-color)]/70",children:[(0,G.jsx)(et.A,{className:"h-10 w-10 animate-spin text-[var(--player-accent-color)]"}),(0,G.jsx)("p",{children:"加载播放器中..."})]})}function ea(e){let{message:t,onRetry:r,onBack:n}=e;return(0,G.jsxs)("div",{className:"player-card flex flex-col gap-4 text-sm",children:[(0,G.jsxs)("div",{className:"flex items-center gap-3 text-[var(--state-error-text)]",children:[(0,G.jsx)(er,{className:"h-5 w-5"}),(0,G.jsx)("h2",{className:"text-lg font-semibold",children:"加载失败"})]}),(0,G.jsx)("p",{className:"text-[var(--secondary-text-color)] dark:text-[var(--text-color)]/70",children:t}),(0,G.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,G.jsx)(es,{onClick:r,variant:"outline",fullWidth:!0,children:"重试"}),(0,G.jsx)(es,{onClick:n,variant:"primary",fullWidth:!0,children:"返回"})]})]})}function ei(e){let{onBack:t}=e;return(0,G.jsxs)("div",{className:"player-card flex flex-col gap-4 text-sm text-[var(--secondary-text-color)] dark:text-[var(--text-color)]/70",children:[(0,G.jsxs)("div",{className:"flex items-center gap-3 text-[var(--text-color)]",children:[(0,G.jsx)(er,{className:"h-5 w-5"}),(0,G.jsx)("h2",{className:"text-lg font-semibold",children:"文件不存在"})]}),(0,G.jsx)("p",{children:"找不到指定的音频文件"}),(0,G.jsx)(es,{onClick:t,variant:"primary",fullWidth:!0,children:"返回主页"})]})}function eo(e){let{onBack:t,onStartTranscription:r}=e;return(0,G.jsxs)("div",{className:"player-card flex flex-col items-center gap-4 py-12 text-center text-sm text-[var(--secondary-text-color)] dark:text-[var(--text-color)]/70",children:[(0,G.jsx)("p",{children:"该文件尚未转录，点击下方按钮开始转录处理"}),(0,G.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[r&&(0,G.jsx)(es,{onClick:r,variant:"primary",fullWidth:!0,children:"开始转录"}),(0,G.jsx)(es,{onClick:t,variant:"outline",fullWidth:!0,children:"返回主页"})]})]})}function es(e){let{children:t,onClick:r,variant:n,fullWidth:a=!1}=e;return(0,G.jsx)("button",{type:"button",onClick:r,className:"".concat("inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-semibold transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--player-accent-color)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--background-color)]").concat(a?" flex-1":""," ").concat("primary"===n?"bg-[var(--player-accent-color)] text-[var(--player-tooltip-text)] shadow hover:brightness-110":"border border-[var(--border-muted)] text-[var(--text-color)]/80 hover:bg-[var(--state-info-surface)]"),children:t})}let el=[.5,.75,1,1.5];function eu(e){let{audioPlayerState:t,onSeek:r,onTogglePlay:n,onSkipBack:a,onSkipForward:i,onClearLoop:o,loopStart:s,loopEnd:l,playbackRate:u,onPlaybackRateChange:c,volume:d,onVolumeChange:p}=e,[f,h]=(0,H.useState)(!1),[m,y]=(0,H.useState)(!1),g=(0,H.useMemo)(()=>{let{currentTime:e,duration:r}=t;return r?Math.min(100,Math.max(0,e/r*100)):0},[t]),v=void 0!==s&&void 0!==l,b=v?"".concat(ec(null!=s?s:0)," – ").concat(ec(null!=l?l:0)):null;return(0,G.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-[var(--background-color)] via-[var(--background-color)] to-transparent",children:(0,G.jsx)("div",{className:"mx-auto max-w-4xl",children:(0,G.jsxs)("div",{className:"player-card flex flex-col gap-4 !rounded-2xl",children:[(0,G.jsxs)("div",{className:"flex items-center gap-3",children:[(0,G.jsx)("p",{className:"text-xs font-medium text-[var(--text-color)]/70",children:ec(t.currentTime)}),(0,G.jsxs)("div",{className:"group relative h-2 flex-1",children:[(0,G.jsx)("div",{className:"h-full rounded-full bg-[var(--border-muted)]",children:(0,G.jsx)("div",{className:"absolute top-0 left-0 h-full rounded-full bg-[var(--primary-color)]",style:{width:"".concat(g,"%")}})}),(0,G.jsx)("input",{type:"range",min:"0",max:t.duration||100,value:t.currentTime,onChange:e=>r(parseFloat(e.target.value)),className:"absolute inset-0 h-full w-full cursor-pointer appearance-none opacity-0 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4"}),(0,G.jsx)("div",{className:"pointer-events-none absolute top-1/2 -ml-2 h-4 w-4 -translate-y-1/2 rounded-full border-2 border-[var(--surface-card)] bg-[var(--primary-color)] shadow",style:{left:"".concat(g,"%")}})]}),(0,G.jsx)("p",{className:"text-xs font-medium text-[var(--text-color)]/70",children:ec(t.duration||0)})]}),(0,G.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,G.jsx)("div",{className:"flex w-1/3 items-center gap-2",children:(0,G.jsxs)("div",{className:"group relative",children:[(0,G.jsx)("button",{type:"button",className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full text-[var(--text-color)]/70 transition-colors hover:bg-[var(--primary-color)]/10",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:(0,G.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"volume_up"})}),(0,G.jsx)("div",{className:"player-card absolute bottom-16 left-1/2 w-8 -translate-x-1/2 rounded-full bg-[var(--card-background)] p-2 shadow-lg ".concat(m?"block":"hidden"),style:{height:"120px"},children:(0,G.jsx)("div",{className:"relative h-full w-full",children:(0,G.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:d,onChange:e=>p(parseFloat(e.target.value)),className:"h-full w-full cursor-pointer appearance-none bg-transparent [&::-webkit-slider-runnable-track]:rounded-full [&::-webkit-slider-runnable-track]:bg-gray-200 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--primary-color)]",style:{writingMode:"vertical-lr"}})})})]})}),(0,G.jsxs)("div",{className:"flex w-1/3 items-center justify-center gap-3",children:[(0,G.jsx)("button",{type:"button",onClick:()=>null==a?void 0:a(),disabled:!a,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full text-[var(--text-color)]/70 transition-colors hover:bg-[var(--primary-color)]/10 disabled:cursor-not-allowed disabled:opacity-40","aria-label":"后退10秒",children:(0,G.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"replay_10"})}),(0,G.jsx)("button",{type:"button",onClick:n,className:"flex h-16 w-16 shrink-0 items-center justify-center rounded-full bg-[var(--primary-color)] text-white shadow-md","aria-label":t.isPlaying?"暂停":"播放",children:(0,G.jsx)("span",{className:"material-symbols-outlined text-4xl",children:t.isPlaying?"pause":"play_arrow"})}),(0,G.jsx)("button",{type:"button",onClick:()=>null==i?void 0:i(),disabled:!i,className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full text-[var(--text-color)]/70 transition-colors hover:bg-[var(--primary-color)]/10 disabled:cursor-not-allowed disabled:opacity-40","aria-label":"前进10秒",children:(0,G.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"forward_10"})}),(0,G.jsx)("button",{type:"button",className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-[var(--state-error-text)] text-white shadow-md transition-colors hover:bg-[var(--state-error-strong)]",children:(0,G.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"mic"})})]}),(0,G.jsxs)("div",{className:"flex w-1/3 items-center justify-end gap-3",children:[v?(0,G.jsxs)("div",{className:"flex flex-col items-end gap-1 text-right text-xs text-[var(--text-color)]/70",children:[b?(0,G.jsx)("span",{children:b}):null,(0,G.jsx)("button",{type:"button",onClick:()=>null==o?void 0:o(),disabled:!o,className:"rounded-full border border-[var(--border-muted)] px-3 py-1 text-[0.7rem] font-semibold uppercase tracking-[0.3em] text-[var(--text-color)]/80 transition-colors hover:bg-[var(--state-info-surface)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-color)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--background-color)] disabled:cursor-not-allowed disabled:opacity-50",children:"清除循环"})]}):null,(0,G.jsxs)("div",{className:"group relative",children:[(0,G.jsx)("button",{type:"button",className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full text-[var(--text-color)]/70 transition-colors hover:bg-[var(--primary-color)]/10",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,G.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"speed"})}),(0,G.jsx)("div",{className:"player-card absolute bottom-14 right-0 w-32 flex-col gap-1 rounded-lg bg-[var(--card-background)] p-2 text-sm shadow-lg ".concat(f?"flex":"hidden"),children:el.map(e=>(0,G.jsxs)("button",{type:"button",onClick:()=>{c(e),h(!1)},className:"rounded-md px-3 py-1.5 text-left transition-colors ".concat(u===e?"bg-[var(--primary-color)]/10 text-[var(--primary-color)]":"text-[var(--text-color)]/80 hover:bg-[var(--primary-color)]/10"),children:[e,"x"]},e))})]})]})]})]})})})}function ec(e){if(!Number.isFinite(e)||e<0)return"00:00";let t=Math.floor(e/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)}var ed=r(3648);function ep(e){let{subtitleContainerId:t,children:r,footer:n,showFooter:a=!1}=e;return(0,G.jsxs)("div",{className:"relative flex min-h-screen w-full flex-col",children:[(0,G.jsx)("header",{className:"fixed top-3 sm:top-4 left-1/2 z-20 -translate-x-1/2",children:(0,G.jsx)(ed.default,{})}),(0,G.jsx)("main",{id:t,className:"flex-1 overflow-y-auto safe-area-inset-top",style:{paddingBottom:a?"var(--space-player-controls)":"var(--space-player-content)"},children:(0,G.jsx)("div",{className:"flex-1 px-4 py-8 sm:px-6 lg:px-8 mt-24",children:(0,G.jsx)("div",{className:"mx-auto max-w-4xl",children:(0,G.jsx)("div",{className:"space-y-8",children:r})})})}),a&&n&&(0,G.jsx)("footer",{className:"flex-shrink-0 safe-area-inset-bottom",children:n})]})}var ef=r(3439);function eh(e){let{transcript:t,isTranscribing:r,transcriptionProgress:n}=e;if(r)return(0,G.jsxs)("div",{className:"player-card bg-[var(--state-info-surface)] text-[var(--state-info-text)] mb-4",style:{borderColor:"var(--state-info-border)"},children:[(0,G.jsxs)("div",{className:"flex items-center gap-3 text-sm mb-2",children:[(0,G.jsx)(et.A,{className:"h-4 w-4 animate-spin"}),(0,G.jsxs)("span",{children:["正在转录音频... ",n||0,"%"]})]}),(0,G.jsx)("div",{className:"w-full bg-[var(--border-muted)] rounded-full h-2",children:(0,G.jsx)("div",{className:"bg-[var(--button-color)] h-2 rounded-full transition-all duration-300",style:{width:"".concat(n||0,"%")}})})]});if(!t||"completed"===t.status)return null;let a="failed"===t.status,i=function(e){switch(e){case"pending":return"等待转录...";case"processing":return"正在转录...";case"failed":return"转录失败";default:return""}}(t.status);return(0,G.jsxs)("div",{className:(0,ef.cn)("player-card flex items-center gap-3 text-sm mb-4",a?"bg-[var(--state-error-surface)] text-[var(--state-error-text)]":"bg-[var(--state-info-surface)] text-[var(--state-info-text)]"),style:{borderColor:a?"var(--state-error-border)":"var(--state-info-border)"},children:[a?(0,G.jsx)(er,{className:"h-4 w-4"}):(0,G.jsx)(et.A,{className:"h-4 w-4 animate-spin"}),(0,G.jsx)("span",{children:i})]})}let em=H.memo(e=>{let{segments:t,currentTime:r,isPlaying:n,onSegmentClick:a,className:i}=e,o=(0,H.useRef)(null),s=(0,H.useRef)(null),l=(0,H.useRef)(-1),u=(0,H.useRef)(void 0),c=Number.isFinite(r)&&!Number.isNaN(r)?r:0,d=(0,H.useCallback)(()=>t.findIndex(e=>c>=e.start&&c<=e.end),[t,c]);(0,H.useEffect)(()=>{let e=d();if(e!==l.current&&-1!==e)return l.current=e,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{if(!o.current||!s.current)return;let e=o.current,t=s.current,r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=a.top-r.top,l=r.height,u=a.height,c=i-l/2+u/2,d=e.scrollTop;c>=d&&c+u<=d+l||e.scrollTo({top:Math.max(0,c),behavior:n?"smooth":"auto"})},100*!!n),()=>{u.current&&clearTimeout(u.current)}},[d,n]);let p=d(),f=(0,H.useMemo)(()=>t.map(e=>{let t=function e(t){if(!t)return[];if(Array.isArray(t))return t.map(e=>{if("string"==typeof e){let t=e.trim();return t?{text:t,reading:t}:null}if(e&&"object"==typeof e){let n="string"==typeof e.text?e.text:void 0,a="string"==typeof e.reading?e.reading:void 0;if(n||a){var t,r;let e=(null!=(t=null!=n?n:a)?t:"").trim(),i=(null!=(r=null!=a?a:n)?r:"").trim();if(e&&i)return{text:e,reading:i}}}return null}).filter(e=>!!e);if("string"==typeof t){let r=t.trim();if(!r)return[];try{let t=JSON.parse(r);return e(t)}catch(e){return r.split(/\s+/).filter(Boolean).map(e=>({text:e,reading:e}))}}return"object"==typeof t?e(Object.values(null!=t?t:{})):[]}(e.furigana);if(Array.isArray(e.wordTimestamps)&&e.wordTimestamps.length>0)return e.wordTimestamps.map((e,r)=>{var n,a;return{word:e.word,reading:null==(n=t[r])?void 0:n.reading,romaji:null==(a=t[r])?void 0:a.reading,start:e.start,end:e.end}});if(t.length>0)return t.map(e=>({word:e.text,reading:e.reading,romaji:e.reading}));if(e.text){let t=e.text.split(/\s+/).filter(Boolean);if(t.length>1)return t.map(e=>({word:e}))}return[]}),[t]);return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("div",{ref:o,className:(0,ef.cn)("player-subtitle-container space-y-[var(--space-subtitle-gap)]",i),"data-testid":"subtitle-scroll-container",children:0===t.length?(0,G.jsx)("div",{className:"flex min-h-[12rem] items-center justify-center text-sm text-muted-foreground",children:(0,G.jsx)("p",{children:"暂无字幕内容"})}):t.map((e,t)=>{var r;let n=t===p,i=f[t]||[],o=i.length>0,l=e.normalizedText||e.text,u=l.split(/\n+/).map(e=>e.trim()).filter(Boolean);return(0,G.jsx)("button",{type:"button",ref:n?s:null,onClick:()=>null==a?void 0:a(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),null==a||a(e))},"data-testid":"subtitle-card","data-active":n,className:(0,ef.cn)("subtitle-line mb-[var(--space-subtitle-gap)]",n&&"highlight"),style:{marginBottom:n?"var(--space-status-gap)":"var(--space-subtitle-gap)"},children:o?(0,G.jsx)("div",{className:"flex flex-wrap items-end",children:i.map((r,a)=>{var i;let o=n&&"number"==typeof r.start&&"number"==typeof r.end&&c>=r.start&&c<=r.end;return(0,G.jsx)("div",{className:"word-group","data-testid":o?"active-word":void 0,children:(0,G.jsx)("span",{className:"player-word-surface",children:r.word})},"".concat(null!=(i=e.id)?i:t,"-token-").concat(a,"-").concat(r.word))})}):(0,G.jsx)("div",{className:"space-y-2",children:u.length>0?u.map((r,n)=>{var a;return(0,G.jsx)("p",{className:"player-subtitle-plain",children:r},"".concat(null!=(a=e.id)?a:t,"-line-").concat(n))}):(0,G.jsx)("p",{className:"player-subtitle-plain text-base",children:l})})},null!=(r=e.id)?r:"".concat(e.start,"-").concat(e.end,"-").concat(t))})})})});function ey(e){let{onRetry:t}=e;return(0,G.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,G.jsxs)("div",{className:"max-w-md w-full bg-[var(--card-background)] border border-[var(--border-color)] rounded-lg p-6",children:[(0,G.jsxs)("div",{className:"flex items-center gap-3 text-[var(--state-error-text)] mb-4",children:[(0,G.jsx)(er,{className:"h-6 w-6"}),(0,G.jsx)("h2",{className:"text-lg font-semibold",children:"API密钥未配置"})]}),(0,G.jsxs)("div",{className:"space-y-3 text-sm text-[var(--text-primary)]",children:[(0,G.jsx)("p",{children:"转录功能需要 GROQ_API_KEY 环境变量才能正常工作。"}),(0,G.jsxs)("div",{className:"bg-[var(--state-info-surface)] border border-[var(--state-info-border)] rounded p-3",children:[(0,G.jsx)("p",{className:"font-medium mb-2",children:"解决方法："}),(0,G.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,G.jsxs)("li",{children:["在项目根目录创建"," ",(0,G.jsx)("code",{className:"bg-[var(--border-color)] px-1 rounded",children:".env.local"})," 文件"]}),(0,G.jsx)("li",{children:"添加以下内容到文件中："})]}),(0,G.jsx)("div",{className:"mt-2 p-2 bg-[var(--border-color)] rounded text-xs font-mono",children:"GROQ_API_KEY=your_groq_api_key_here"}),(0,G.jsxs)("p",{className:"mt-2 text-xs",children:["获取API密钥：访问"," ",(0,G.jsx)("a",{href:"https://console.groq.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Groq Console"})]})]})]}),(0,G.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,G.jsxs)("button",{type:"button",onClick:()=>{window.location.reload()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--button-color)] text-[var(--button-text)] rounded hover:opacity-90 transition-opacity",children:[(0,G.jsx)(J.A,{className:"h-4 w-4"}),"刷新页面"]}),t&&(0,G.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-[var(--border-color)] text-[var(--text-primary)] rounded hover:opacity-90 transition-opacity",children:"重试"})]})]})})}em.displayName="ScrollableSubtitleDisplay";var eg=r(3491),ev=r(3670),eb=r(4356),ew="vercel.ai.error",e_=Symbol.for(ew),ex=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,ew)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};a=e_;var ek=ex,eE="AI_APICallError",eI=`vercel.ai.error.${eE}`,eT=Symbol.for(eI),eS=class extends ek{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:o,cause:s,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:eE,message:e,cause:s}),this[i]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(e){return ek.hasMarker(e,eI)}};i=eT;var eO="AI_EmptyResponseBodyError",eA=`vercel.ai.error.${eO}`,eN=Symbol.for(eA),ej=class extends ek{constructor({message:e="Empty response body"}={}){super({name:eO,message:e}),this[o]=!0}static isInstance(e){return ek.hasMarker(e,eA)}};function eC(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=eN;var eR="AI_InvalidArgumentError",eP=`vercel.ai.error.${eR}`,ez=Symbol.for(eP),eM=class extends ek{constructor({message:e,cause:t,argument:r}){super({name:eR,message:e,cause:t}),this[s]=!0,this.argument=r}static isInstance(e){return ek.hasMarker(e,eP)}};s=ez;var e$="AI_InvalidPromptError",eD=`vercel.ai.error.${e$}`,eF=Symbol.for(eD),eL=class extends ek{constructor({prompt:e,message:t,cause:r}){super({name:e$,message:`Invalid prompt: ${t}`,cause:r}),this[l]=!0,this.prompt=e}static isInstance(e){return ek.hasMarker(e,eD)}};l=eF;var eZ="AI_InvalidResponseDataError",eB=`vercel.ai.error.${eZ}`,eU=Symbol.for(eB),eq=class extends ek{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:eZ,message:t}),this[u]=!0,this.data=e}static isInstance(e){return ek.hasMarker(e,eB)}};u=eU;var eK="AI_JSONParseError",eV=`vercel.ai.error.${eK}`,eG=Symbol.for(eV),eW=class extends ek{constructor({text:e,cause:t}){super({name:eK,message:`JSON parsing failed: Text: ${e}.
Error message: ${eC(t)}`,cause:t}),this[c]=!0,this.text=e}static isInstance(e){return ek.hasMarker(e,eV)}};c=eG;var eJ="AI_LoadAPIKeyError",eQ=`vercel.ai.error.${eJ}`,eY=Symbol.for(eQ),eH=class extends ek{constructor({message:e}){super({name:eJ,message:e}),this[d]=!0}static isInstance(e){return ek.hasMarker(e,eQ)}};d=eY,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var eX="AI_NoSuchModelError",e0=`vercel.ai.error.${eX}`,e1=Symbol.for(e0),e2=class extends ek{constructor({errorName:e=eX,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[p]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return ek.hasMarker(e,e0)}};p=e1,Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var e4="AI_TypeValidationError",e5=`vercel.ai.error.${e4}`,e9=Symbol.for(e5),e6=class e extends ek{constructor({value:e,cause:t}){super({name:e4,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eC(t)}`,cause:t}),this[f]=!0,this.value=e}static isInstance(e){return ek.hasMarker(e,e5)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};f=e9;var e3="AI_UnsupportedFunctionalityError",e8=`vercel.ai.error.${e3}`,e7=Symbol.for(e8),te=class extends ek{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:e3,message:t}),this[h]=!0,this.functionality=e}static isInstance(e){return ek.hasMarker(e,e8)}};h=e7;class tt extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function tr(e){}class tn extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let n;super({start(a){n=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=tr,onError:r=tr,onRetry:n=tr,onComment:a}=e,i="",o=!0,s,l="",u="";function c(e){if(""===e)return void(l.length>0&&t({id:s,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",u="");if(e.startsWith(":")){a&&a(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),n=" "===e[r+1]?2:1;d(t,e.slice(r+n),e);return}d(e,"",e)}function d(e,t,a){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":s=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?n(parseInt(t,10)):r(new tt(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:a}));break;default:r(new tt(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:a}))}}return{feed:function(e){let t=o?e.replace(/^\xEF\xBB\xBF/,""):e,[r,n]=function(e){let t=[],r="",n=0;for(;n<e.length;){let a=e.indexOf("\r",n),i=e.indexOf(`
`,n),o=-1;if(-1!==a&&-1!==i?o=Math.min(a,i):-1!==a?o=a===e.length-1?-1:a:-1!==i&&(o=i),-1===o){r=e.slice(n);break}{let r=e.slice(n,o);t.push(r),"\r"===e[(n=o+1)-1]&&e[n]===`
`&&n++}}return[t,r]}(`${i}${t}`);for(let e of r)c(e);i=n,o=!1},reset:function(e={}){i&&e.consume&&c(i),o=!0,s=void 0,l="",u="",i=""}}}({onEvent:e=>{a.enqueue(e)},onError(t){"terminate"===e?a.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){n.feed(e)}})}}function ta(e,t,r){function n(r,n){var a;for(let i in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(a=r._zod).traits??(a.traits=new Set),r._zod.traits.add(e),t(r,n),o.prototype)i in r||Object.defineProperty(r,i,{value:o.prototype[i].bind(r)});r._zod.constr=o,r._zod.def=n}let a=r?.Parent??Object;class i extends a{}function o(e){var t;let a=r?.Parent?new i:this;for(let r of(n(a,e),(t=a._zod).deferred??(t.deferred=[]),a._zod.deferred))r();return a}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}Object.freeze({status:"aborted"}),Symbol("zod_brand");class ti extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class to extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let ts={};function tl(e){return e&&Object.assign(ts,e),ts}function tu(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function tc(e,t="|"){return e.map(e=>tN(e)).join(t)}function td(e,t){return"bigint"==typeof t?t.toString():t}function tp(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function tf(e){return null==e}function th(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}let tm=Symbol("evaluating");function ty(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==tm)return void 0===n&&(n=tm,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function tg(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function tv(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function tb(e){return JSON.stringify(e)}let tw="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function t_(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let tx=tp(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function tk(e){if(!1===t_(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==t_(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function tE(e){return tk(e)?{...e}:Array.isArray(e)?[...e]:e}let tI=new Set(["string","number","symbol"]),tT=new Set(["string","number","bigint","boolean","symbol","undefined"]);function tS(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tO(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function tA(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function tN(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}let tj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},tC={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function tR(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function tP(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function tz(e){return"string"==typeof e?e:e?.message}function tM(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=tz(e.inst?._zod.def?.error?.(e))??tz(t?.error?.(e))??tz(r.customError?.(e))??tz(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function t$(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function tD(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function tF(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}let tL=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,td,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tZ=ta("$ZodError",tL),tB=ta("$ZodError",tL,{Parent:Error}),tU=e=>(t,r,n,a)=>{let i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new ti;if(o.issues.length){let t=new(a?.Err??e)(o.issues.map(e=>tM(e,i,tl())));throw tw(t,a?.callee),t}return o.value},tq=tU(tB),tK=e=>async(t,r,n,a)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(a?.Err??e)(o.issues.map(e=>tM(e,i,tl())));throw tw(t,a?.callee),t}return o.value},tV=tK(tB),tG=e=>(t,r,n)=>{let a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new ti;return i.issues.length?{success:!1,error:new(e??tZ)(i.issues.map(e=>tM(e,a,tl())))}:{success:!0,data:i.value}},tW=tG(tB),tJ=e=>async(t,r,n)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>tM(e,a,tl())))}:{success:!0,data:i.value}},tQ=tJ(tB),tY=/^[cC][^\s-]{8,}$/,tH=/^[0-9a-z]+$/,tX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,t0=/^[0-9a-vA-V]{20}$/,t1=/^[A-Za-z0-9]{27}$/,t2=/^[a-zA-Z0-9_-]{21}$/,t4=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,t5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,t9=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,t6=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,t3=t6(4),t8=t6(6),t7=t6(7),re=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,rt=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,rn=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,ra=rn,ri=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ro(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let rs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ru=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,rc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rd=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rp=/^[A-Za-z0-9_-]*$/,rf=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,rh=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,rm=/^\+(?:[0-9]){6,14}[0-9]$/,ry="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rg=RegExp(`^${ry}$`);function rv(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function rb(e){return RegExp(`^${rv(e)}$`)}function rw(e){let t=rv({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${ry}T(?:${n})$`)}let r_=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},rx=/^-?\d+n?$/,rk=/^-?\d+$/,rE=/^-?\d+(?:\.\d+)?/,rI=/^(?:true|false)$/i,rT=/^null$/i,rS=/^undefined$/i,rO=/^[^A-Z]*$/,rA=/^[^a-z]*$/,rN=/^[0-9a-fA-F]*$/;function rj(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function rC(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let rR=/^[0-9a-fA-F]{32}$/,rP=rj(22,"=="),rz=rC(22),rM=/^[0-9a-fA-F]{40}$/,r$=rj(27,"="),rD=rC(27),rF=/^[0-9a-fA-F]{64}$/,rL=rj(43,"="),rZ=rC(43),rB=/^[0-9a-fA-F]{96}$/,rU=rj(64,""),rq=rC(64),rK=/^[0-9a-fA-F]{128}$/,rV=rj(86,"=="),rG=rC(86),rW=ta("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),rJ={number:"number",bigint:"bigint",object:"date"},rQ=ta("$ZodCheckLessThan",(e,t)=>{rW.init(e,t);let r=rJ[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),rY=ta("$ZodCheckGreaterThan",(e,t)=>{rW.init(e,t);let r=rJ[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),rH=ta("$ZodCheckMultipleOf",(e,t)=>{rW.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===function(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),a=(n.split(".")[1]||"").length;if(0===a&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(a=Number.parseInt(e[1]))}let i=r>a?r:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),rX=ta("$ZodCheckNumberFormat",(e,t)=>{rW.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[a,i]=tj[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=a,n.maximum=i,r&&(n.pattern=rk)}),e._zod.check=o=>{let s=o.value;if(r){if(!Number.isInteger(s))return void o.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?o.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}s<a&&o.issues.push({origin:"number",input:s,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),s>i&&o.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),r0=ta("$ZodCheckBigIntFormat",(e,t)=>{rW.init(e,t);let[r,n]=tC[t.format];e._zod.onattach.push(e=>{let a=e._zod.bag;a.format=t.format,a.minimum=r,a.maximum=n}),e._zod.check=a=>{let i=a.value;i<r&&a.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),i>n&&a.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:e})}}),r1=ta("$ZodCheckMaxSize",(e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:t$(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),r2=ta("$ZodCheckMinSize",(e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:t$(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),r4=((e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,a=n.size;if(a===t.size)return;let i=a>t.size;r.issues.push({origin:t$(n),...i?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}},ta("$ZodCheckMaxLength",(e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let a=tD(n);r.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}})),r5=ta("$ZodCheckMinLength",(e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let a=tD(n);r.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),r9=ta("$ZodCheckLengthEquals",(e,t)=>{var r;rW.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tf(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,a=n.length;if(a===t.length)return;let i=tD(n),o=a>t.length;r.issues.push({origin:i,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),r6=ta("$ZodCheckStringFormat",(e,t)=>{var r,n;rW.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),r3=ta("$ZodCheckRegex",(e,t)=>{r6.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),r8=ta("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=rO),r6.init(e,t)}),r7=ta("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=rA),r6.init(e,t)}),ne=ta("$ZodCheckIncludes",(e,t)=>{rW.init(e,t);let r=tS(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),nt=ta("$ZodCheckStartsWith",(e,t)=>{rW.init(e,t);let r=RegExp(`^${tS(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),nr=ta("$ZodCheckEndsWith",(e,t)=>{rW.init(e,t);let r=RegExp(`.*${tS(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});(e,t)=>{rW.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}};let nn=ta("$ZodCheckOverwrite",(e,t)=>{rW.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class na{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let ni={major:4,minor:1,patch:11},no=ta("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ni;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,a=tR(e);for(let i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(a)continue;let t=e.issues.length,o=i._zod.check(e);if(o instanceof Promise&&r?.async===!1)throw new ti;if(n||o instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await o,e.issues.length!==t&&(a||(a=tR(e,t)))});else{if(e.issues.length===t)continue;a||(a=tR(e,t))}}return n?n.then(()=>e):e},r=(r,a,i)=>{if(tR(r))return r.aborted=!0,r;let o=t(a,n,i);if(o instanceof Promise){if(!1===i.async)throw new ti;return o.then(t=>e._zod.parse(t,i))}return e._zod.parse(o,i)};e._zod.run=(a,i)=>{if(i.skipChecks)return e._zod.parse(a,i);if("backward"===i.direction){let t=e._zod.parse({value:a.value,issues:[]},{...i,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,a,i)):r(t,a,i)}let o=e._zod.parse(a,i);if(o instanceof Promise){if(!1===i.async)throw new ti;return o.then(e=>t(e,n,i))}return t(o,n,i)}}e["~standard"]={validate:t=>{try{let r=tW(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return tQ(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),ns=ta("$ZodString",(e,t)=>{no.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??r_(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),nl=ta("$ZodStringFormat",(e,t)=>{r6.init(e,t),ns.init(e,t)}),nu=ta("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=t9),nl.init(e,t)}),nc=ta("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=t6(e))}else t.pattern??(t.pattern=t6());nl.init(e,t)}),nd=ta("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=re),nl.init(e,t)}),np=ta("$ZodURL",(e,t)=>{nl.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),a=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:rf.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),nf=ta("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ro()),nl.init(e,t)}),nh=ta("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=t2),nl.init(e,t)}),nm=ta("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=tY),nl.init(e,t)}),ny=ta("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=tH),nl.init(e,t)}),ng=ta("$ZodULID",(e,t)=>{t.pattern??(t.pattern=tX),nl.init(e,t)}),nv=ta("$ZodXID",(e,t)=>{t.pattern??(t.pattern=t0),nl.init(e,t)}),nb=ta("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=t1),nl.init(e,t)}),nw=ta("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=rw(t)),nl.init(e,t)}),n_=ta("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=rg),nl.init(e,t)}),nx=ta("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=rb(t)),nl.init(e,t)}),nk=ta("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=t4),nl.init(e,t)}),nE=ta("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=rs),nl.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),nI=ta("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=rl),nl.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),nT=ta("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ru),nl.init(e,t)}),nS=ta("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=rc),nl.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function nO(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let nA=ta("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=rd),nl.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{nO(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}}),nN=ta("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=rp),nl.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{!function(e){if(!rp.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return nO(t.padEnd(4*Math.ceil(t.length/4),"="))}(r.value)&&r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),nj=ta("$ZodE164",(e,t)=>{t.pattern??(t.pattern=rm),nl.init(e,t)}),nC=ta("$ZodJWT",(e,t)=>{nl.init(e,t),e._zod.check=r=>{!function(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let a=JSON.parse(atob(n));if("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))return!1;return!0}catch{return!1}}(r.value,t.alg)&&r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),nR=((e,t)=>{nl.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}},ta("$ZodNumber",(e,t)=>{no.init(e,t),e._zod.pattern=e._zod.bag.pattern??rE,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let a=r.value;if("number"==typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return r;let i="number"==typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}})),nP=ta("$ZodNumber",(e,t)=>{rX.init(e,t),nR.init(e,t)}),nz=ta("$ZodBoolean",(e,t)=>{no.init(e,t),e._zod.pattern=rI,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let a=r.value;return"boolean"==typeof a||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),nM=ta("$ZodBigInt",(e,t)=>{no.init(e,t),e._zod.pattern=rx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),n$=((e,t)=>{r0.init(e,t),nM.init(e,t)},ta("$ZodNull",(e,t)=>{no.init(e,t),e._zod.pattern=rT,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}})),nD=ta("$ZodAny",(e,t)=>{no.init(e,t),e._zod.parse=e=>e}),nF=ta("$ZodUnknown",(e,t)=>{no.init(e,t),e._zod.parse=e=>e}),nL=ta("$ZodNever",(e,t)=>{no.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function nZ(e,t,r){e.issues.length&&t.issues.push(...tP(r,e.issues)),t.value[r]=e.value}(e,t)=>{no.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}},(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let a=r.value,i=a instanceof Date;return i&&!Number.isNaN(a.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:a,...i?{received:"Invalid Date"}:{},inst:e}),r}};let nB=ta("$ZodArray",(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{let a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);let i=[];for(let e=0;e<a.length;e++){let o=a[e],s=t.element._zod.run({value:o,issues:[]},n);s instanceof Promise?i.push(s.then(t=>nZ(t,r,e))):nZ(s,r,e)}return i.length?Promise.all(i).then(()=>r):r}});function nU(e,t,r,n){e.issues.length&&t.issues.push(...tP(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function nq(e){var t;let r=Object.keys(e.shape);for(let t of r)if(!e.shape?.[t]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${t}": expected a Zod schema`);let n=Object.keys(t=e.shape).filter(e=>"optional"===t[e]._zod.optin&&"optional"===t[e]._zod.optout);return{...e,keys:r,keySet:new Set(r),numKeys:r.length,optionalKeys:new Set(n)}}function nK(e,t,r,n,a,i){let o=[],s=a.keySet,l=a.catchall._zod,u=l.def.type;for(let a of Object.keys(t)){if(s.has(a))continue;if("never"===u){o.push(a);continue}let i=l.run({value:t[a],issues:[]},n);i instanceof Promise?e.push(i.then(e=>nU(e,r,a,t))):nU(i,r,a,t)}return(o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length)?Promise.all(e).then(()=>r):r}let nV=ta("$ZodObject",(e,t)=>{let r;no.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let a=tp(()=>nq(t));ty(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let i=t.catchall;e._zod.parse=(t,n)=>{r??(r=a.value);let o=t.value;if(!t_(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let s=[],l=r.shape;for(let e of r.keys){let r=l[e]._zod.run({value:o[e],issues:[]},n);r instanceof Promise?s.push(r.then(r=>nU(r,t,e,o))):nU(r,t,e,o)}return i?nK(s,o,t,n,a.value,e):s.length?Promise.all(s).then(()=>t):t}}),nG=ta("$ZodObjectJIT",(e,t)=>{let r,n;nV.init(e,t);let a=e._zod.parse,i=tp(()=>nq(t)),o=!ts.jitless,s=o&&tx.value,l=t.catchall;e._zod.parse=(u,c)=>{n??(n=i.value);let d=u.value;return t_(d)?o&&s&&c?.async===!1&&!0!==c.jitless?(r||(r=(e=>{let t=new na(["shape","payload","ctx"]),r=i.value,n=e=>{let t=tb(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let a=Object.create(null),o=0;for(let e of r.keys)a[e]=`key_${o++}`;for(let e of(t.write("const newResult = {};"),r.keys)){let r=a[e],i=tb(e);t.write(`const ${r} = ${n(e)};`),t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${i}, ...iss.path] : [${i}]
          })));
        }
        
        
        if (${r}.value === undefined) {
          if (${i} in input) {
            newResult[${i}] = undefined;
          }
        } else {
          newResult[${i}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,r)=>s(e,t,r)})(t.shape)),u=r(u,c),l)?nK([],d,u,c,n,e):u:a(u,c):(u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u)}});function nW(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let a=e.filter(e=>!tR(e));return 1===a.length?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>tM(e,n,tl())))}),t)}let nJ=ta("$ZodUnion",(e,t)=>{no.init(e,t),ty(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),ty(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),ty(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),ty(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>th(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(r)return n(a,i);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:a.value,issues:[]},i);if(t instanceof Promise)s.push(t),o=!0;else{if(0===t.issues.length)return t;s.push(t)}}return o?Promise.all(s).then(t=>nW(t,a,e,i)):nW(s,a,e,i)}}),nQ=ta("$ZodDiscriminatedUnion",(e,t)=>{nJ.init(e,t);let r=e._zod.parse;ty(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=tp(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(a,i)=>{let o=a.value;if(!t_(o))return a.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),a;let s=n.value.get(o?.[t.discriminator]);return s?s._zod.run(a,i):t.unionFallback?r(a,i):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),a)}}),nY=ta("$ZodIntersection",(e,t)=>{no.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,a=t.left._zod.run({value:n,issues:[]},r),i=t.right._zod.run({value:n,issues:[]},r);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([t,r])=>nH(e,t,r)):nH(e,a,i)}});function nH(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),tR(e))return e;let n=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(tk(t)&&tk(r)){let n=Object.keys(r),a=Object.keys(t).filter(e=>-1!==n.indexOf(e)),i={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};i[n]=a.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let a=0;a<t.length;a++){let i=e(t[a],r[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}let nX=ta("$ZodTuple",(e,t)=>{no.init(e,t);let r=t.items,n=r.length-[...r].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(a,i)=>{let o=a.value;if(!Array.isArray(o))return a.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),a;a.value=[];let s=[];if(!t.rest){let t=o.length>r.length,i=o.length<n-1;if(t||i)return a.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:o,inst:e,origin:"array"}),a}let l=-1;for(let e of r){if(++l>=o.length&&l>=n)continue;let t=e._zod.run({value:o[l],issues:[]},i);t instanceof Promise?s.push(t.then(e=>n0(e,a,l))):n0(t,a,l)}if(t.rest)for(let e of o.slice(r.length)){l++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?s.push(r.then(e=>n0(e,a,l))):n0(r,a,l)}return s.length?Promise.all(s).then(()=>a):a}});function n0(e,t,r){e.issues.length&&t.issues.push(...tP(r,e.issues)),t.value[r]=e.value}let n1=ta("$ZodRecord",(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{let a=r.value;if(!tk(a))return r.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),r;let i=[];if(t.keyType._zod.values){let o,s=t.keyType._zod.values;for(let e of(r.value={},s))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let o=t.valueType._zod.run({value:a[e],issues:[]},n);o instanceof Promise?i.push(o.then(t=>{t.issues.length&&r.issues.push(...tP(e,t.issues)),r.value[e]=t.value})):(o.issues.length&&r.issues.push(...tP(e,o.issues)),r.value[e]=o.value)}for(let e in a)s.has(e)||(o=o??[]).push(e);o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:o})}else for(let o of(r.value={},Reflect.ownKeys(a))){if("__proto__"===o)continue;let s=t.keyType._zod.run({value:o,issues:[]},n);if(s instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(s.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(e=>tM(e,n,tl())),input:o,path:[o],inst:e}),r.value[s.value]=s.value;continue}let l=t.valueType._zod.run({value:a[o],issues:[]},n);l instanceof Promise?i.push(l.then(e=>{e.issues.length&&r.issues.push(...tP(o,e.issues)),r.value[s.value]=e.value})):(l.issues.length&&r.issues.push(...tP(o,l.issues)),r.value[s.value]=l.value)}return i.length?Promise.all(i).then(()=>r):r}});function n2(e,t,r,n,a,i,o){e.issues.length&&(tI.has(typeof n)?r.issues.push(...tP(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:a,inst:i,issues:e.issues.map(e=>tM(e,o,tl()))})),t.issues.length&&(tI.has(typeof n)?r.issues.push(...tP(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:a,inst:i,key:n,issues:t.issues.map(e=>tM(e,o,tl()))})),r.value.set(e.value,t.value)}function n4(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{let a=r.value;if(!(a instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:a,inst:e}),r;let i=[];for(let[o,s]of(r.value=new Map,a)){let l=t.keyType._zod.run({value:o,issues:[]},n),u=t.valueType._zod.run({value:s,issues:[]},n);l instanceof Promise||u instanceof Promise?i.push(Promise.all([l,u]).then(([t,i])=>{n2(t,i,r,o,a,e,n)})):n2(l,u,r,o,a,e,n)}return i.length?Promise.all(i).then(()=>r):r}},(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{let a=r.value;if(!(a instanceof Set))return r.issues.push({input:a,inst:e,expected:"set",code:"invalid_type"}),r;let i=[];for(let e of(r.value=new Set,a)){let a=t.valueType._zod.run({value:e,issues:[]},n);a instanceof Promise?i.push(a.then(e=>n4(e,r))):n4(a,r)}return i.length?Promise.all(i).then(()=>r):r}};let n5=ta("$ZodEnum",(e,t)=>{no.init(e,t);let r=tu(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>tI.has(typeof e)).map(e=>"string"==typeof e?tS(e):e.toString()).join("|")})$`),e._zod.parse=(t,a)=>{let i=t.value;return n.has(i)||t.issues.push({code:"invalid_value",values:r,input:i,inst:e}),t}}),n9=ta("$ZodLiteral",(e,t)=>{if(no.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?tS(e):e?tS(e.toString()):String(e)).join("|")})$`),e._zod.parse=(r,n)=>{let a=r.value;return e._zod.values.has(a)||r.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),r}}),n6=((e,t)=>{no.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}},ta("$ZodTransform",(e,t)=>{no.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new to(e.constructor.name);let a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(e=>(r.value=e,r));if(a instanceof Promise)throw new ti;return r.value=a,r}}));function n3(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let n8=ta("$ZodOptional",(e,t)=>{no.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ty(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ty(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${th(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>n3(t,e.value)):n3(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),n7=ta("$ZodNullable",(e,t)=>{no.init(e,t),ty(e._zod,"optin",()=>t.innerType._zod.optin),ty(e._zod,"optout",()=>t.innerType._zod.optout),ty(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${th(e.source)}|null)$`):void 0}),ty(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),ae=ta("$ZodDefault",(e,t)=>{no.init(e,t),e._zod.optin="optional",ty(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>at(e,t)):at(n,t)}});function at(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let ar=ta("$ZodPrefault",(e,t)=>{no.init(e,t),e._zod.optin="optional",ty(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),an=ta("$ZodNonOptional",(e,t)=>{no.init(e,t),ty(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(t=>aa(t,e)):aa(a,e)}});function aa(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}(e,t)=>{no.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new to("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}};let ai=ta("$ZodCatch",(e,t)=>{no.init(e,t),ty(e._zod,"optin",()=>t.innerType._zod.optin),ty(e._zod,"optout",()=>t.innerType._zod.optout),ty(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>tM(e,r,tl()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>tM(e,r,tl()))},input:e.value}),e.issues=[]),e)}}),ao=((e,t)=>{no.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)},ta("$ZodPipe",(e,t)=>{no.init(e,t),ty(e._zod,"values",()=>t.in._zod.values),ty(e._zod,"optin",()=>t.in._zod.optin),ty(e._zod,"optout",()=>t.out._zod.optout),ty(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>as(e,t.in,r)):as(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>as(e,t.out,r)):as(n,t.out,r)}}));function as(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}function al(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>au(e,n,t.out,r)):au(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>au(e,n,t.in,r)):au(e,n,t.in,r)}}function au(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}(e,t)=>{no.init(e,t),ty(e._zod,"values",()=>t.in._zod.values),ty(e._zod,"optin",()=>t.in._zod.optin),ty(e._zod,"optout",()=>t.out._zod.optout),ty(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>al(e,t,r)):al(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>al(e,t,r)):al(n,t,r)}}};let ac=ta("$ZodReadonly",(e,t)=>{no.init(e,t),ty(e._zod,"propValues",()=>t.innerType._zod.propValues),ty(e._zod,"values",()=>t.innerType._zod.values),ty(e._zod,"optin",()=>t.innerType._zod.optin),ty(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(ad):ad(n)}});function ad(e){return e.value=Object.freeze(e.value),e}(e,t)=>{no.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),a=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,a))}else if(null===e||tT.has(typeof e))r.push(tS(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)},(e,t)=>{no.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))};let ap=ta("$ZodLazy",(e,t)=>{no.init(e,t),ty(e._zod,"innerType",()=>t.getter()),ty(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),ty(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),ty(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),ty(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),af=ta("$ZodCustom",(e,t)=>{rW.init(e,t),no.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(t=>ah(t,r,n,e));ah(a,r,n,e)}});function ah(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(tF(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class am{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}let ay=new am;function ag(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tA(t)})}function av(e,t){return new rQ({check:"less_than",...tA(t),value:e,inclusive:!1})}function ab(e,t){return new rQ({check:"less_than",...tA(t),value:e,inclusive:!0})}function aw(e,t){return new rY({check:"greater_than",...tA(t),value:e,inclusive:!1})}function a_(e,t){return new rY({check:"greater_than",...tA(t),value:e,inclusive:!0})}function ax(e,t){return new rH({check:"multiple_of",...tA(t),value:e})}function ak(e,t){return new r4({check:"max_length",...tA(t),maximum:e})}function aE(e,t){return new r5({check:"min_length",...tA(t),minimum:e})}function aI(e,t){return new r9({check:"length_equals",...tA(t),length:e})}function aT(e){return new nn({check:"overwrite",tx:e})}class aS{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??ay,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let n=e._zod.def,a=this.seen.get(e);if(a)return a.count++,t.schemaPath.includes(e)&&(a.cycle=t.path),a.schema;let i={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,i);let o=e._zod.toJSONSchema?.();if(o)i.schema=o;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},a=e._zod.parent;if(a)i.ref=a,this.process(a,r),this.seen.get(a).isParent=!0;else{let t=i.schema;switch(n.type){case"string":{t.type="string";let{minimum:r,maximum:n,format:a,patterns:o,contentEncoding:s}=e._zod.bag;if("number"==typeof r&&(t.minLength=r),"number"==typeof n&&(t.maxLength=n),a&&(t.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[a]??a,""===t.format&&delete t.format),s&&(t.contentEncoding=s),o&&o.size>0){let e=[...o];1===e.length?t.pattern=e[0].source:e.length>1&&(i.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let{minimum:r,maximum:n,format:a,multipleOf:i,exclusiveMaximum:o,exclusiveMinimum:s}=e._zod.bag;"string"==typeof a&&a.includes("int")?t.type="integer":t.type="number","number"==typeof s&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.minimum=s,t.exclusiveMinimum=!0):t.exclusiveMinimum=s),"number"==typeof r&&(t.minimum=r,"number"==typeof s&&"draft-4"!==this.target&&(s>=r?delete t.minimum:delete t.exclusiveMinimum)),"number"==typeof o&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.maximum=o,t.exclusiveMaximum=!0):t.exclusiveMaximum=o),"number"==typeof n&&(t.maximum=n,"number"==typeof o&&"draft-4"!==this.target&&(o<=n?delete t.maximum:delete t.exclusiveMaximum)),"number"==typeof i&&(t.multipleOf=i);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:a,maximum:i}=e._zod.bag;"number"==typeof a&&(t.minItems=a),"number"==typeof i&&(t.maxItems=i),t.type="array",t.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{t.type="object",t.properties={};let e=n.shape;for(let n in e)t.properties[n]=this.process(e[n],{...r,path:[...r.path,"properties",n]});let a=new Set([...new Set(Object.keys(e))].filter(e=>{let t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));a.size>0&&(t.required=Array.from(a)),n.catchall?._zod.def.type==="never"?t.additionalProperties=!1:n.catchall?n.catchall&&(t.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(t.additionalProperties=!1);break}case"union":t.anyOf=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{let e=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),a=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),i=e=>"allOf"in e&&1===Object.keys(e).length;t.allOf=[...i(e)?e.allOf:[e],...i(a)?a.allOf:[a]];break}case"tuple":{t.type="array";let a="draft-2020-12"===this.target?"prefixItems":"items",i="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",o=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,a,t]})),s=n.rest?this.process(n.rest,{...r,path:[...r.path,i,..."openapi-3.0"===this.target?[n.items.length]:[]]}):null;"draft-2020-12"===this.target?(t.prefixItems=o,s&&(t.items=s)):"openapi-3.0"===this.target?(t.items={anyOf:o},s&&t.items.anyOf.push(s),t.minItems=o.length,s||(t.maxItems=o.length)):(t.items=o,s&&(t.additionalItems=s));let{minimum:l,maximum:u}=e._zod.bag;"number"==typeof l&&(t.minItems=l),"number"==typeof u&&(t.maxItems=u);break}case"record":t.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(t.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]})),t.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=tu(n.entries);e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),t.enum=e;break}case"literal":{let e=[];for(let t of n.values)if(void 0===t){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else e.push(Number(t));else e.push(t);if(0===e.length);else if(1===e.length){let r=e[0];t.type=null===r?"null":typeof r,"draft-4"===this.target||"openapi-3.0"===this.target?t.enum=[r]:t.const=r}else e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),e.every(e=>"boolean"==typeof e)&&(t.type="string"),e.every(e=>null===e)&&(t.type="null"),t.enum=e;break}case"file":{let r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:n,maximum:a,mime:i}=e._zod.bag;void 0!==n&&(r.minLength=n),void 0!==a&&(r.maxLength=a),i?1===i.length?(r.contentMediaType=i[0],Object.assign(t,r)):t.anyOf=i.map(e=>({...r,contentMediaType:e})):Object.assign(t,r);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(n.innerType,r);"openapi-3.0"===this.target?(i.ref=n.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),i.ref=n.innerType;break;case"default":this.process(n.innerType,r),i.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),i.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),i.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=e._zod.pattern;if(!r)throw Error("Pattern not found in template literal");t.type="string",t.pattern=r.source;break}case"pipe":{let e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),i.ref=e;break}case"readonly":this.process(n.innerType,r),i.ref=n.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),i.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let s=this.metadataRegistry.get(e);return s&&Object.assign(i.schema,s),"input"===this.io&&function e(t,r){let n=r??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let a=t._zod.def;switch(a.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return e(a.element,n);case"object":for(let t in a.shape)if(e(a.shape[t],n))return!0;return!1;case"union":for(let t of a.options)if(e(t,n))return!0;return!1;case"intersection":return e(a.left,n)||e(a.right,n);case"tuple":for(let t of a.items)if(e(t,n))return!0;if(a.rest&&e(a.rest,n))return!0;return!1;case"record":case"map":return e(a.keyType,n)||e(a.valueType,n);case"set":return e(a.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return e(a.innerType,n);case"lazy":return e(a.getter(),n);case"transform":return!0;case"pipe":return e(a.in,n)||e(a.out,n)}throw Error(`Unknown schema type: ${a.type}`)}(e)&&(delete i.schema.examples,delete i.schema.default),"input"===this.io&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let a=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let n=r.external.registry.get(e[0])?.id,a=r.external.uri??(e=>e);if(n)return{ref:a(n)};let i=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=i,{defId:i,ref:`${a("__shared")}#/${t}/${i}`}}if(e[1]===n)return{ref:"#"};let a=`#/${t}/`,i=e[1].schema.id??`__schema${this.counter++}`;return{defId:i,ref:a+i}},i=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=a(e);t.def={...t.schema},n&&(t.defId=n);let i=t.schema;for(let e in i)delete i[e];i.$ref=r};if("throw"===r.cycles)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let n=t[1];if(e===t[0]){i(t);continue}if(r.external){let n=r.external.registry.get(t[0])?.id;if(e!==t[0]&&n){i(t);continue}}if(this.metadataRegistry.get(t[0])?.id||n.cycle||n.count>1&&"ref"===r.reused){i(t);continue}}let o=(e,t)=>{let r=this.seen.get(e),n=r.def??r.schema,a={...n};if(null===r.ref)return;let i=r.ref;if(r.ref=null,i){o(i,t);let e=this.seen.get(i).schema;e.$ref&&("draft-7"===t.target||"draft-4"===t.target||"openapi-3.0"===t.target)?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,a))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())o(e[0],{target:this.target});let s={};if("draft-2020-12"===this.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?s.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");s.$id=r.external.uri(t)}Object.assign(s,n.def);let l=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?s.$defs=l:s.definitions=l);try{return JSON.parse(JSON.stringify(s))}catch(e){throw Error("Error converting schema to JSON.")}}}let aO=ta("ZodISODateTime",(e,t)=>{nw.init(e,t),aQ.init(e,t)}),aA=ta("ZodISODate",(e,t)=>{n_.init(e,t),aQ.init(e,t)}),aN=ta("ZodISOTime",(e,t)=>{nx.init(e,t),aQ.init(e,t)}),aj=ta("ZodISODuration",(e,t)=>{nk.init(e,t),aQ.init(e,t)}),aC=(e,t)=>{tZ.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let r=t||function(e){return e.message},n={_errors:[]},a=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>a({issues:e}));else if("invalid_key"===t.code)a({issues:t.issues});else if("invalid_element"===t.code)a({issues:t.issues});else if(0===t.path.length)n._errors.push(r(t));else{let e=n,a=0;for(;a<t.path.length;){let n=t.path[a];a===t.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(t))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(e),n})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let r={},n=[];for(let a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}})(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,td,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,td,2)}},isEmpty:{get:()=>0===e.issues.length}})};ta("ZodError",aC);let aR=ta("ZodError",aC,{Parent:Error}),aP=tU(aR),az=tK(aR),aM=tG(aR),a$=tJ(aR),aD=(e,t,r)=>{let n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return tU(aR)(e,t,n)},aF=(e,t,r)=>tU(aR)(e,t,r),aL=async(e,t,r)=>{let n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return tK(aR)(e,t,n)},aZ=async(e,t,r)=>tK(aR)(e,t,r),aB=(e,t,r)=>{let n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return tG(aR)(e,t,n)},aU=(e,t,r)=>tG(aR)(e,t,r),aq=async(e,t,r)=>{let n=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return tJ(aR)(e,t,n)},aK=async(e,t,r)=>tJ(aR)(e,t,r),aV=ta("ZodType",(e,t)=>(no.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(tv(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>tO(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>aP(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>aM(e,t,r),e.parseAsync=async(t,r)=>az(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>a$(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>aD(e,t,r),e.decode=(t,r)=>aF(e,t,r),e.encodeAsync=async(t,r)=>aL(e,t,r),e.decodeAsync=async(t,r)=>aZ(e,t,r),e.safeEncode=(t,r)=>aB(e,t,r),e.safeDecode=(t,r)=>aU(e,t,r),e.safeEncodeAsync=async(t,r)=>aq(e,t,r),e.safeDecodeAsync=async(t,r)=>aK(e,t,r),e.refine=(t,r)=>e.check(function(e,t={}){return new iJ({type:"custom",check:"custom",fn:e,...tA(t)})}(t,r)),e.superRefine=t=>e.check(function(e){let t=function(e,t){let r=new rW({check:"custom",...tA(void 0)});return r._zod.check=e,r}(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(tF(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(tF(e)))},e(r.value,r)));return t}(t)),e.overwrite=t=>e.check(aT(t)),e.optional=()=>iD(e),e.nullable=()=>iL(e),e.nullish=()=>iD(iL(e)),e.nonoptional=t=>new iU({type:"nonoptional",innerType:e,...tA(t)}),e.array=()=>ix(e),e.or=t=>iS([e,t]),e.and=t=>new iA({type:"intersection",left:e,right:t}),e.transform=t=>iV(e,new iM({type:"transform",transform:t})),e.default=t=>(function(e,t){return new iZ({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():tE(t)}})})(e,t),e.prefault=t=>(function(e,t){return new iB({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():tE(t)}})})(e,t),e.catch=t=>(function(e,t){return new iq({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})})(e,t),e.pipe=t=>iV(e,t),e.readonly=()=>new iG({type:"readonly",innerType:e}),e.describe=t=>{let r=e.clone();return ay.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>ay.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return ay.get(e);let r=e.clone();return ay.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),aG=ta("_ZodString",(e,t)=>{ns.init(e,t),aV.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new r3({check:"string_format",format:"regex",...tA(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new ne({check:"string_format",format:"includes",...tA(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new nt({check:"string_format",format:"starts_with",...tA(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new nr({check:"string_format",format:"ends_with",...tA(t),suffix:e})}(...t)),e.min=(...t)=>e.check(aE(...t)),e.max=(...t)=>e.check(ak(...t)),e.length=(...t)=>e.check(aI(...t)),e.nonempty=(...t)=>e.check(aE(1,...t)),e.lowercase=t=>e.check(new r8({check:"string_format",format:"lowercase",...tA(t)})),e.uppercase=t=>e.check(new r7({check:"string_format",format:"uppercase",...tA(t)})),e.trim=()=>e.check(aT(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return aT(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(aT(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(aT(e=>e.toUpperCase()))}),aW=ta("ZodString",(e,t)=>{ns.init(e,t),aG.init(e,t),e.email=t=>e.check(new aY({type:"string",format:"email",check:"string_format",abort:!1,...tA(t)})),e.url=t=>e.check(new a0({type:"string",format:"url",check:"string_format",abort:!1,...tA(t)})),e.jwt=t=>e.check(new io({type:"string",format:"jwt",check:"string_format",abort:!1,...tA(t)})),e.emoji=t=>e.check(new a1({type:"string",format:"emoji",check:"string_format",abort:!1,...tA(t)})),e.guid=t=>e.check(ag(aH,t)),e.uuid=t=>e.check(new aX({type:"string",format:"uuid",check:"string_format",abort:!1,...tA(t)})),e.uuidv4=t=>e.check(new aX({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tA(t)})),e.uuidv6=t=>e.check(new aX({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tA(t)})),e.uuidv7=t=>e.check(new aX({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tA(t)})),e.nanoid=t=>e.check(new a2({type:"string",format:"nanoid",check:"string_format",abort:!1,...tA(t)})),e.guid=t=>e.check(ag(aH,t)),e.cuid=t=>e.check(new a4({type:"string",format:"cuid",check:"string_format",abort:!1,...tA(t)})),e.cuid2=t=>e.check(new a5({type:"string",format:"cuid2",check:"string_format",abort:!1,...tA(t)})),e.ulid=t=>e.check(new a9({type:"string",format:"ulid",check:"string_format",abort:!1,...tA(t)})),e.base64=t=>e.check(new ir({type:"string",format:"base64",check:"string_format",abort:!1,...tA(t)})),e.base64url=t=>e.check(new ia({type:"string",format:"base64url",check:"string_format",abort:!1,...tA(t)})),e.xid=t=>e.check(new a6({type:"string",format:"xid",check:"string_format",abort:!1,...tA(t)})),e.ksuid=t=>e.check(new a3({type:"string",format:"ksuid",check:"string_format",abort:!1,...tA(t)})),e.ipv4=t=>e.check(new a8({type:"string",format:"ipv4",check:"string_format",abort:!1,...tA(t)})),e.ipv6=t=>e.check(new a7({type:"string",format:"ipv6",check:"string_format",abort:!1,...tA(t)})),e.cidrv4=t=>e.check(new ie({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tA(t)})),e.cidrv6=t=>e.check(new it({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tA(t)})),e.e164=t=>e.check(new ii({type:"string",format:"e164",check:"string_format",abort:!1,...tA(t)})),e.datetime=t=>e.check(new aO({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tA(t)})),e.date=t=>e.check(new aA({type:"string",format:"date",check:"string_format",...tA(t)})),e.time=t=>e.check(new aN({type:"string",format:"time",check:"string_format",precision:null,...tA(t)})),e.duration=t=>e.check(new aj({type:"string",format:"duration",check:"string_format",...tA(t)}))});function aJ(e){return new aW({type:"string",...tA(e)})}let aQ=ta("ZodStringFormat",(e,t)=>{nl.init(e,t),aG.init(e,t)}),aY=ta("ZodEmail",(e,t)=>{nd.init(e,t),aQ.init(e,t)}),aH=ta("ZodGUID",(e,t)=>{nu.init(e,t),aQ.init(e,t)}),aX=ta("ZodUUID",(e,t)=>{nc.init(e,t),aQ.init(e,t)}),a0=ta("ZodURL",(e,t)=>{np.init(e,t),aQ.init(e,t)}),a1=ta("ZodEmoji",(e,t)=>{nf.init(e,t),aQ.init(e,t)}),a2=ta("ZodNanoID",(e,t)=>{nh.init(e,t),aQ.init(e,t)}),a4=ta("ZodCUID",(e,t)=>{nm.init(e,t),aQ.init(e,t)}),a5=ta("ZodCUID2",(e,t)=>{ny.init(e,t),aQ.init(e,t)}),a9=ta("ZodULID",(e,t)=>{ng.init(e,t),aQ.init(e,t)}),a6=ta("ZodXID",(e,t)=>{nv.init(e,t),aQ.init(e,t)}),a3=ta("ZodKSUID",(e,t)=>{nb.init(e,t),aQ.init(e,t)}),a8=ta("ZodIPv4",(e,t)=>{nE.init(e,t),aQ.init(e,t)}),a7=ta("ZodIPv6",(e,t)=>{nI.init(e,t),aQ.init(e,t)}),ie=ta("ZodCIDRv4",(e,t)=>{nT.init(e,t),aQ.init(e,t)}),it=ta("ZodCIDRv6",(e,t)=>{nS.init(e,t),aQ.init(e,t)}),ir=ta("ZodBase64",(e,t)=>{nA.init(e,t),aQ.init(e,t)}),ia=ta("ZodBase64URL",(e,t)=>{nN.init(e,t),aQ.init(e,t)}),ii=ta("ZodE164",(e,t)=>{nj.init(e,t),aQ.init(e,t)}),io=ta("ZodJWT",(e,t)=>{nC.init(e,t),aQ.init(e,t)}),is=ta("ZodNumber",(e,t)=>{nR.init(e,t),aV.init(e,t),e.gt=(t,r)=>e.check(aw(t,r)),e.gte=(t,r)=>e.check(a_(t,r)),e.min=(t,r)=>e.check(a_(t,r)),e.lt=(t,r)=>e.check(av(t,r)),e.lte=(t,r)=>e.check(ab(t,r)),e.max=(t,r)=>e.check(ab(t,r)),e.int=t=>e.check(ic(t)),e.safe=t=>e.check(ic(t)),e.positive=t=>e.check(aw(0,t)),e.nonnegative=t=>e.check(a_(0,t)),e.negative=t=>e.check(av(0,t)),e.nonpositive=t=>e.check(ab(0,t)),e.multipleOf=(t,r)=>e.check(ax(t,r)),e.step=(t,r)=>e.check(ax(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function il(e){return new is({type:"number",checks:[],...tA(e)})}let iu=ta("ZodNumberFormat",(e,t)=>{nP.init(e,t),is.init(e,t)});function ic(e){return new iu({type:"number",check:"number_format",abort:!1,format:"safeint",...tA(e)})}let id=ta("ZodBoolean",(e,t)=>{nz.init(e,t),aV.init(e,t)});function ip(e){return new id({type:"boolean",...tA(e)})}(e,t)=>{nM.init(e,t),aV.init(e,t),e.gte=(t,r)=>e.check(a_(t,r)),e.min=(t,r)=>e.check(a_(t,r)),e.gt=(t,r)=>e.check(aw(t,r)),e.gte=(t,r)=>e.check(a_(t,r)),e.min=(t,r)=>e.check(a_(t,r)),e.lt=(t,r)=>e.check(av(t,r)),e.lte=(t,r)=>e.check(ab(t,r)),e.max=(t,r)=>e.check(ab(t,r)),e.positive=t=>e.check(aw(BigInt(0),t)),e.negative=t=>e.check(av(BigInt(0),t)),e.nonpositive=t=>e.check(ab(BigInt(0),t)),e.nonnegative=t=>e.check(a_(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(ax(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null};let ih=ta("ZodNull",(e,t)=>{n$.init(e,t),aV.init(e,t)}),im=ta("ZodAny",(e,t)=>{nD.init(e,t),aV.init(e,t)});function iy(){return new im({type:"any"})}let ig=ta("ZodUnknown",(e,t)=>{nF.init(e,t),aV.init(e,t)});function iv(){return new ig({type:"unknown"})}let ib=ta("ZodNever",(e,t)=>{nL.init(e,t),aV.init(e,t)});function iw(e){return new ib({type:"never",...tA(e)})}let i_=ta("ZodArray",(e,t)=>{nB.init(e,t),aV.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(aE(t,r)),e.nonempty=t=>e.check(aE(1,t)),e.max=(t,r)=>e.check(ak(t,r)),e.length=(t,r)=>e.check(aI(t,r)),e.unwrap=()=>e.element});function ix(e,t){return new i_({type:"array",element:e,...tA(t)})}let ik=ta("ZodObject",(e,t)=>{nG.init(e,t),aV.init(e,t),ty(e,"shape",()=>t.shape),e.keyof=()=>iR(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:iv()}),e.loose=()=>e.clone({...e._zod.def,catchall:iv()}),e.strict=()=>e.clone({...e._zod.def,catchall:iw()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!tk(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=tv(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return tg(this,"shape",r),r},checks:[]});return tO(e,n)})(e,t),e.safeExtend=t=>(function(e,t){if(!tk(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return tg(this,"shape",r),r},checks:e._zod.def.checks};return tO(e,r)})(e,t),e.merge=t=>(function(e,t){let r=tv(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return tg(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return tO(e,r)})(e,t),e.pick=t=>(function(e,t){let r=e._zod.def,n=tv(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return tg(this,"shape",e),e},checks:[]});return tO(e,n)})(e,t),e.omit=t=>(function(e,t){let r=e._zod.def,n=tv(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return tg(this,"shape",n),n},checks:[]});return tO(e,n)})(e,t),e.partial=(...t)=>(function(e,t,r){let n=tv(t._zod.def,{get shape(){let n=t._zod.def.shape,a={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(a[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)a[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return tg(this,"shape",a),a},checks:[]});return tO(t,n)})(i$,e,t[0]),e.required=(...t)=>(function(e,t,r){let n=tv(t._zod.def,{get shape(){let n=t._zod.def.shape,a={...n};if(r)for(let t in r){if(!(t in a))throw Error(`Unrecognized key: "${t}"`);r[t]&&(a[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)a[t]=new e({type:"nonoptional",innerType:n[t]});return tg(this,"shape",a),a},checks:[]});return tO(t,n)})(iU,e,t[0])});function iE(e,t){return new ik({type:"object",shape:e??{},...tA(t)})}function iI(e,t){return new ik({type:"object",shape:e,catchall:iw(),...tA(t)})}let iT=ta("ZodUnion",(e,t)=>{nJ.init(e,t),aV.init(e,t),e.options=t.options});function iS(e,t){return new iT({type:"union",options:e,...tA(t)})}let iO=ta("ZodDiscriminatedUnion",(e,t)=>{iT.init(e,t),nQ.init(e,t)}),iA=ta("ZodIntersection",(e,t)=>{nY.init(e,t),aV.init(e,t)}),iN=ta("ZodRecord",(e,t)=>{n1.init(e,t),aV.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function ij(e,t,r){return new iN({type:"record",keyType:e,valueType:t,...tA(r)})}let iC=ta("ZodEnum",(e,t)=>{n5.init(e,t),aV.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let a={};for(let n of e)if(r.has(n))a[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new iC({...t,checks:[],...tA(n),entries:a})},e.exclude=(e,n)=>{let a={...t.entries};for(let t of e)if(r.has(t))delete a[t];else throw Error(`Key ${t} not found in enum`);return new iC({...t,checks:[],...tA(n),entries:a})}});function iR(e,t){return new iC({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...tA(t)})}let iP=ta("ZodLiteral",(e,t)=>{n9.init(e,t),aV.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function iz(e,t){return new iP({type:"literal",values:Array.isArray(e)?e:[e],...tA(t)})}let iM=ta("ZodTransform",(e,t)=>{n6.init(e,t),aV.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new to(e.constructor.name);r.addIssue=n=>{"string"==typeof n?r.issues.push(tF(n,r.value,t)):(n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),r.issues.push(tF(n)))};let a=t.transform(r.value,r);return a instanceof Promise?a.then(e=>(r.value=e,r)):(r.value=a,r)}}),i$=ta("ZodOptional",(e,t)=>{n8.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iD(e){return new i$({type:"optional",innerType:e})}let iF=ta("ZodNullable",(e,t)=>{n7.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iL(e){return new iF({type:"nullable",innerType:e})}let iZ=ta("ZodDefault",(e,t)=>{ae.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),iB=ta("ZodPrefault",(e,t)=>{ar.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iU=ta("ZodNonOptional",(e,t)=>{an.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iq=ta("ZodCatch",(e,t)=>{ai.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),iK=ta("ZodPipe",(e,t)=>{ao.init(e,t),aV.init(e,t),e.in=t.in,e.out=t.out});function iV(e,t){return new iK({type:"pipe",in:e,out:t})}let iG=ta("ZodReadonly",(e,t)=>{ac.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iW=ta("ZodLazy",(e,t)=>{ap.init(e,t),aV.init(e,t),e.unwrap=()=>e._zod.def.getter()}),iJ=ta("ZodCustom",(e,t)=>{af.init(e,t),aV.init(e,t)});function iQ(e,t){let r=tA(t);return r.abort??(r.abort=!0),new iJ({type:"custom",check:"custom",fn:e??(()=>!0),...r})}function iY(e,t={error:`Input not instance of ${e.name}`}){let r=new iJ({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...tA(t)});return r._zod.bag.Class=e,r}m||(m={}),tl({localeError:(()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${tN(r.values[0])}`;return`Invalid option: expected one of ${tc(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Too big: expected ${r.origin??"value"} to have ${t}${r.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${r.origin??"value"} to be ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Too small: expected ${r.origin} to have ${t}${r.minimum.toString()} ${n.unit}`;return`Too small: expected ${r.origin} to be ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Invalid string: must start with "${r.prefix}"`;if("ends_with"===r.format)return`Invalid string: must end with "${r.suffix}"`;if("includes"===r.format)return`Invalid string: must include "${r.includes}"`;if("regex"===r.format)return`Invalid string: must match pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${tc(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`}}})()}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(y||(y={})),(g||(g={})).mergeShapes=(e,t)=>({...e,...t});let iH=y.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),iX=e=>{switch(typeof e){case"undefined":return iH.undefined;case"string":return iH.string;case"number":return Number.isNaN(e)?iH.nan:iH.number;case"boolean":return iH.boolean;case"function":return iH.function;case"bigint":return iH.bigint;case"symbol":return iH.symbol;case"object":if(Array.isArray(e))return iH.array;if(null===e)return iH.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return iH.promise;if("undefined"!=typeof Map&&e instanceof Map)return iH.map;if("undefined"!=typeof Set&&e instanceof Set)return iH.set;if("undefined"!=typeof Date&&e instanceof Date)return iH.date;return iH.object;default:return iH.unknown}},i0=y.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class i1 extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof i1))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,y.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}i1.create=e=>new i1(e);let i2=(e,t)=>{let r;switch(e.code){case i0.invalid_type:r=e.received===iH.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case i0.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,y.jsonStringifyReplacer)}`;break;case i0.unrecognized_keys:r=`Unrecognized key(s) in object: ${y.joinValues(e.keys,", ")}`;break;case i0.invalid_union:r="Invalid input";break;case i0.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${y.joinValues(e.options)}`;break;case i0.invalid_enum_value:r=`Invalid enum value. Expected ${y.joinValues(e.options)}, received '${e.received}'`;break;case i0.invalid_arguments:r="Invalid function arguments";break;case i0.invalid_return_type:r="Invalid function return type";break;case i0.invalid_date:r="Invalid date";break;case i0.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:y.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case i0.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case i0.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case i0.custom:r="Invalid input";break;case i0.invalid_intersection_types:r="Intersection results could not be merged";break;case i0.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case i0.not_finite:r="Number must be finite";break;default:r=t.defaultError,y.assertNever(e)}return{message:r}},i4=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}};function i5(e,t){let r=i4({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i2,void 0].filter(e=>!!e)});e.common.issues.push(r)}class i9{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return i6;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return i9.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return i6;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let i6=Object.freeze({status:"aborted"}),i3=e=>({status:"dirty",value:e}),i8=e=>({status:"valid",value:e}),i7=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(v||(v={}));class oe{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ot=(e,t)=>{if("valid"===t.status)return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new i1(e.common.issues);return this._error=t,this._error}}};function or(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{let{message:i}=e;return"invalid_enum_value"===t.code?{message:i??a.defaultError}:void 0===a.data?{message:i??n??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:i??r??a.defaultError}},description:a}}class on{get description(){return this._def.description}_getType(e){return iX(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:iX(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new i9,ctx:{common:e.parent.common,data:e.data,parsedType:iX(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(i7(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:iX(e)},n=this._parseSync({data:e,path:r.path,parent:r});return ot(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:iX(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return"valid"===r.status?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>"valid"===e.status?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:iX(e)},n=this._parse({data:e,path:r.path,parent:r});return ot(r,await (i7(n)?n:Promise.resolve(n)))}refine(e,t){return this._refinement((r,n)=>{let a=e(r),i=()=>n.addIssue({code:i0.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new oQ({schema:this,typeName:b.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return oY.create(this,this._def)}nullable(){return oH.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oR.create(this)}promise(){return oJ.create(this,this._def)}or(e){return oz.create([this,e],this._def)}and(e){return oD.create(this,e,this._def)}transform(e){return new oQ({...or(this._def),schema:this,typeName:b.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new oX({...or(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:b.ZodDefault})}brand(){return new o2({typeName:b.ZodBranded,type:this,...or(this._def)})}catch(e){return new o0({...or(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:b.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return o4.create(this,e)}readonly(){return o5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let oa=/^c[^\s-]{8,}$/i,oi=/^[0-9a-z]+$/,oo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,os=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ol=/^[a-z0-9_-]{21}$/i,ou=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,oc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,od=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,op=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,of=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,om=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oy=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,og=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ov="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ob=RegExp(`^${ov}$`);function ow(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class o_ extends on{_parse(e){var t,r,a,i;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==iH.string){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.string,received:t.parsedType}),i6}let s=new i9;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(i5(o=this._getOrReturnCtx(e,o),{code:i0.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("max"===l.kind)e.data.length>l.value&&(i5(o=this._getOrReturnCtx(e,o),{code:i0.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?i5(o,{code:i0.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&i5(o,{code:i0.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if("email"===l.kind)od.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"email",code:i0.invalid_string,message:l.message}),s.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:i0.invalid_string,message:l.message}),s.dirty());else if("uuid"===l.kind)os.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:i0.invalid_string,message:l.message}),s.dirty());else if("nanoid"===l.kind)ol.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"nanoid",code:i0.invalid_string,message:l.message}),s.dirty());else if("cuid"===l.kind)oa.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:i0.invalid_string,message:l.message}),s.dirty());else if("cuid2"===l.kind)oi.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:i0.invalid_string,message:l.message}),s.dirty());else if("ulid"===l.kind)oo.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:i0.invalid_string,message:l.message}),s.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{i5(o=this._getOrReturnCtx(e,o),{validation:"url",code:i0.invalid_string,message:l.message}),s.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"regex",code:i0.invalid_string,message:l.message}),s.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):"datetime"===l.kind?(function(e){let t=`${ov}T${ow(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:"datetime",message:l.message}),s.dirty()):"date"===l.kind?ob.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:"date",message:l.message}),s.dirty()):"time"===l.kind?RegExp(`^${ow(l)}$`).test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{code:i0.invalid_string,validation:"time",message:l.message}),s.dirty()):"duration"===l.kind?oc.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"duration",code:i0.invalid_string,message:l.message}),s.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(r=l.version)||!r)&&op.test(t)||("v6"===r||!r)&&oh.test(t))&&1&&(i5(o=this._getOrReturnCtx(e,o),{validation:"ip",code:i0.invalid_string,message:l.message}),s.dirty())):"jwt"===l.kind?!function(e,t){if(!ou.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));if("object"!=typeof a||null===a||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(i5(o=this._getOrReturnCtx(e,o),{validation:"jwt",code:i0.invalid_string,message:l.message}),s.dirty()):"cidr"===l.kind?(a=e.data,!(("v4"===(i=l.version)||!i)&&of.test(a)||("v6"===i||!i)&&om.test(a))&&1&&(i5(o=this._getOrReturnCtx(e,o),{validation:"cidr",code:i0.invalid_string,message:l.message}),s.dirty())):"base64"===l.kind?oy.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"base64",code:i0.invalid_string,message:l.message}),s.dirty()):"base64url"===l.kind?og.test(e.data)||(i5(o=this._getOrReturnCtx(e,o),{validation:"base64url",code:i0.invalid_string,message:l.message}),s.dirty()):y.assertNever(l);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:i0.invalid_string,...v.errToObj(r)})}_addCheck(e){return new o_({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...v.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...v.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...v.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...v.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...v.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...v.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...v.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...v.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...v.errToObj(t)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new o_({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new o_({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new o_({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}o_.create=e=>new o_({checks:[],typeName:b.ZodString,coerce:e?.coerce??!1,...or(e)});class ox extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==iH.number){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.number,received:t.parsedType}),i6}let r=new i9;for(let n of this._def.checks)"int"===n.kind?y.isInteger(e.data)||(i5(t=this._getOrReturnCtx(e,t),{code:i0.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(e.data,n.value)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(i5(t=this._getOrReturnCtx(e,t),{code:i0.not_finite,message:n.message}),r.dirty()):y.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,r,n){return new ox({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:v.toString(n)}]})}_addCheck(e){return new ox({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&y.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}ox.create=e=>new ox({checks:[],typeName:b.ZodNumber,coerce:e?.coerce||!1,...or(e)});class ok extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==iH.bigint)return this._getInvalidInput(e);let r=new i9;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):y.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.bigint,received:t.parsedType}),i6}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,r,n){return new ok({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:v.toString(n)}]})}_addCheck(e){return new ok({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ok.create=e=>new ok({checks:[],typeName:b.ZodBigInt,coerce:e?.coerce??!1,...or(e)});class oE extends on{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==iH.boolean){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.boolean,received:t.parsedType}),i6}return i8(e.data)}}oE.create=e=>new oE({typeName:b.ZodBoolean,coerce:e?.coerce||!1,...or(e)});class oI extends on{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==iH.date){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.date,received:t.parsedType}),i6}if(Number.isNaN(e.data.getTime()))return i5(this._getOrReturnCtx(e),{code:i0.invalid_date}),i6;let r=new i9;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(i5(t=this._getOrReturnCtx(e,t),{code:i0.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):y.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new oI({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}oI.create=e=>new oI({checks:[],coerce:e?.coerce||!1,typeName:b.ZodDate,...or(e)});class oT extends on{_parse(e){if(this._getType(e)!==iH.symbol){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.symbol,received:t.parsedType}),i6}return i8(e.data)}}oT.create=e=>new oT({typeName:b.ZodSymbol,...or(e)});class oS extends on{_parse(e){if(this._getType(e)!==iH.undefined){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.undefined,received:t.parsedType}),i6}return i8(e.data)}}oS.create=e=>new oS({typeName:b.ZodUndefined,...or(e)});class oO extends on{_parse(e){if(this._getType(e)!==iH.null){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.null,received:t.parsedType}),i6}return i8(e.data)}}oO.create=e=>new oO({typeName:b.ZodNull,...or(e)});class oA extends on{constructor(){super(...arguments),this._any=!0}_parse(e){return i8(e.data)}}oA.create=e=>new oA({typeName:b.ZodAny,...or(e)});class oN extends on{constructor(){super(...arguments),this._unknown=!0}_parse(e){return i8(e.data)}}oN.create=e=>new oN({typeName:b.ZodUnknown,...or(e)});class oj extends on{_parse(e){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.never,received:t.parsedType}),i6}}oj.create=e=>new oj({typeName:b.ZodNever,...or(e)});class oC extends on{_parse(e){if(this._getType(e)!==iH.undefined){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.void,received:t.parsedType}),i6}return i8(e.data)}}oC.create=e=>new oC({typeName:b.ZodVoid,...or(e)});class oR extends on{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==iH.array)return i5(t,{code:i0.invalid_type,expected:iH.array,received:t.parsedType}),i6;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(i5(t,{code:e?i0.too_big:i0.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(i5(t,{code:i0.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(i5(t,{code:i0.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new oe(t,e,t.path,r)))).then(e=>i9.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new oe(t,e,t.path,r)));return i9.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new oR({...this._def,minLength:{value:e,message:v.toString(t)}})}max(e,t){return new oR({...this._def,maxLength:{value:e,message:v.toString(t)}})}length(e,t){return new oR({...this._def,exactLength:{value:e,message:v.toString(t)}})}nonempty(e){return this.min(1,e)}}oR.create=(e,t)=>new oR({type:e,minLength:null,maxLength:null,exactLength:null,typeName:b.ZodArray,...or(t)});class oP extends on{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=y.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==iH.object){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.object,received:t.parsedType}),i6}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof oj&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||i.push(e);let o=[];for(let e of a){let t=n[e],a=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new oe(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof oj){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(i5(r,{code:i0.unrecognized_keys,keys:i}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new oe(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>i9.mergeObjectSync(t,e)):i9.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new oP({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:v.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new oP({...this._def,unknownKeys:"strip"})}passthrough(){return new oP({...this._def,unknownKeys:"passthrough"})}extend(e){return new oP({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new oP({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:b.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new oP({...this._def,catchall:e})}pick(e){let t={};for(let r of y.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new oP({...this._def,shape:()=>t})}omit(e){let t={};for(let r of y.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new oP({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof oP){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=oY.create(e(a))}return new oP({...t._def,shape:()=>r})}if(t instanceof oR)return new oR({...t._def,type:e(t.element)});if(t instanceof oY)return oY.create(e(t.unwrap()));if(t instanceof oH)return oH.create(e(t.unwrap()));if(t instanceof oF)return oF.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of y.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new oP({...this._def,shape:()=>t})}required(e){let t={};for(let r of y.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof oY;)e=e._def.innerType;t[r]=e}return new oP({...this._def,shape:()=>t})}keyof(){return oV(y.objectKeys(this.shape))}}oP.create=(e,t)=>new oP({shape:()=>e,unknownKeys:"strip",catchall:oj.create(),typeName:b.ZodObject,...or(t)}),oP.strictCreate=(e,t)=>new oP({shape:()=>e,unknownKeys:"strict",catchall:oj.create(),typeName:b.ZodObject,...or(t)}),oP.lazycreate=(e,t)=>new oP({shape:e,unknownKeys:"strip",catchall:oj.create(),typeName:b.ZodObject,...or(t)});class oz extends on{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new i1(e.ctx.common.issues));return i5(t,{code:i0.invalid_union,unionErrors:r}),i6});{let e,n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new i1(e));return i5(t,{code:i0.invalid_union,unionErrors:a}),i6}}get options(){return this._def.options}}oz.create=(e,t)=>new oz({options:e,typeName:b.ZodUnion,...or(t)});let oM=e=>{if(e instanceof oq)return oM(e.schema);if(e instanceof oQ)return oM(e.innerType());if(e instanceof oK)return[e.value];if(e instanceof oG)return e.options;if(e instanceof oW)return y.objectValues(e.enum);else if(e instanceof oX)return oM(e._def.innerType);else if(e instanceof oS)return[void 0];else if(e instanceof oO)return[null];else if(e instanceof oY)return[void 0,...oM(e.unwrap())];else if(e instanceof oH)return[null,...oM(e.unwrap())];else if(e instanceof o2)return oM(e.unwrap());else if(e instanceof o5)return oM(e.unwrap());else if(e instanceof o0)return oM(e._def.innerType);else return[]};class o$ extends on{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==iH.object)return i5(t,{code:i0.invalid_type,expected:iH.object,received:t.parsedType}),i6;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(i5(t,{code:i0.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),i6)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=oM(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new o$({typeName:b.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...or(r)})}}class oD extends on{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if("aborted"===e.status||"aborted"===n.status)return i6;let a=function e(t,r){let n=iX(t),a=iX(r);if(t===r)return{valid:!0,data:t};if(n===iH.object&&a===iH.object){let n=y.objectKeys(r),a=y.objectKeys(t).filter(e=>-1!==n.indexOf(e)),i={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};i[n]=a.data}return{valid:!0,data:i}}if(n===iH.array&&a===iH.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let i=e(t[a],r[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}if(n===iH.date&&a===iH.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return a.valid?(("dirty"===e.status||"dirty"===n.status)&&t.dirty(),{status:t.value,value:a.data}):(i5(r,{code:i0.invalid_intersection_types}),i6)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}oD.create=(e,t,r)=>new oD({left:e,right:t,typeName:b.ZodIntersection,...or(r)});class oF extends on{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==iH.array)return i5(r,{code:i0.invalid_type,expected:iH.array,received:r.parsedType}),i6;if(r.data.length<this._def.items.length)return i5(r,{code:i0.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i6;!this._def.rest&&r.data.length>this._def.items.length&&(i5(r,{code:i0.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new oe(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>i9.mergeArray(t,e)):i9.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new oF({...this._def,rest:e})}}oF.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new oF({items:e,typeName:b.ZodTuple,rest:null,...or(t)})};class oL extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==iH.object)return i5(r,{code:i0.invalid_type,expected:iH.object,received:r.parsedType}),i6;let n=[],a=this._def.keyType,i=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new oe(r,e,r.path,e)),value:i._parse(new oe(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?i9.mergeObjectAsync(t,n):i9.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new oL(t instanceof on?{keyType:e,valueType:t,typeName:b.ZodRecord,...or(r)}:{keyType:o_.create(),valueType:e,typeName:b.ZodRecord,...or(t)})}}class oZ extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==iH.map)return i5(r,{code:i0.invalid_type,expected:iH.map,received:r.parsedType}),i6;let n=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new oe(r,e,r.path,[i,"key"])),value:a._parse(new oe(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of i){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return i6;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of i){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return i6;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}oZ.create=(e,t,r)=>new oZ({valueType:t,keyType:e,typeName:b.ZodMap,...or(r)});class oB extends on{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==iH.set)return i5(r,{code:i0.invalid_type,expected:iH.set,received:r.parsedType}),i6;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(i5(r,{code:i0.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(i5(r,{code:i0.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let r=new Set;for(let n of e){if("aborted"===n.status)return i6;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>a._parse(new oe(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>i(e)):i(o)}min(e,t){return new oB({...this._def,minSize:{value:e,message:v.toString(t)}})}max(e,t){return new oB({...this._def,maxSize:{value:e,message:v.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}oB.create=(e,t)=>new oB({valueType:e,minSize:null,maxSize:null,typeName:b.ZodSet,...or(t)});class oU extends on{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==iH.function)return i5(t,{code:i0.invalid_type,expected:iH.function,received:t.parsedType}),i6;function r(e,r){return i4({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i2,i2].filter(e=>!!e),issueData:{code:i0.invalid_arguments,argumentsError:r}})}function n(e,r){return i4({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i2,i2].filter(e=>!!e),issueData:{code:i0.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof oJ){let e=this;return i8(async function(...t){let o=new i1([]),s=await e._def.args.parseAsync(t,a).catch(e=>{throw o.addIssue(r(t,e)),o}),l=await Reflect.apply(i,this,s);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw o.addIssue(n(l,e)),o})})}{let e=this;return i8(function(...t){let o=e._def.args.safeParse(t,a);if(!o.success)throw new i1([r(t,o.error)]);let s=Reflect.apply(i,this,o.data),l=e._def.returns.safeParse(s,a);if(!l.success)throw new i1([n(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new oU({...this._def,args:oF.create(e).rest(oN.create())})}returns(e){return new oU({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new oU({args:e||oF.create([]).rest(oN.create()),returns:t||oN.create(),typeName:b.ZodFunction,...or(r)})}}class oq extends on{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}oq.create=(e,t)=>new oq({getter:e,typeName:b.ZodLazy,...or(t)});class oK extends on{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return i5(t,{received:t.data,code:i0.invalid_literal,expected:this._def.value}),i6}return{status:"valid",value:e.data}}get value(){return this._def.value}}function oV(e,t){return new oG({values:e,typeName:b.ZodEnum,...or(t)})}oK.create=(e,t)=>new oK({value:e,typeName:b.ZodLiteral,...or(t)});class oG extends on{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return i5(t,{expected:y.joinValues(r),received:t.parsedType,code:i0.invalid_type}),i6}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return i5(t,{received:t.data,code:i0.invalid_enum_value,options:r}),i6}return i8(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return oG.create(e,{...this._def,...t})}exclude(e,t=this._def){return oG.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}oG.create=oV;class oW extends on{_parse(e){let t=y.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==iH.string&&r.parsedType!==iH.number){let e=y.objectValues(t);return i5(r,{expected:y.joinValues(e),received:r.parsedType,code:i0.invalid_type}),i6}if(this._cache||(this._cache=new Set(y.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=y.objectValues(t);return i5(r,{received:r.data,code:i0.invalid_enum_value,options:e}),i6}return i8(e.data)}get enum(){return this._def.values}}oW.create=(e,t)=>new oW({values:e,typeName:b.ZodNativeEnum,...or(t)});class oJ extends on{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==iH.promise&&!1===t.common.async?(i5(t,{code:i0.invalid_type,expected:iH.promise,received:t.parsedType}),i6):i8((t.parsedType===iH.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}oJ.create=(e,t)=>new oJ({type:e,typeName:b.ZodPromise,...or(t)});class oQ extends on{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===b.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{i5(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return i6;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?i6:"dirty"===n.status||"dirty"===t.value?i3(n.value):n});{if("aborted"===t.value)return i6;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?i6:"dirty"===n.status||"dirty"===t.value?i3(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?i6:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?i6:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>"valid"!==e.status?i6:Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})));else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if("valid"!==e.status)return i6;let i=n.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}y.assertNever(n)}}oQ.create=(e,t,r)=>new oQ({schema:e,typeName:b.ZodEffects,effect:t,...or(r)}),oQ.createWithPreprocess=(e,t,r)=>new oQ({schema:t,effect:{type:"preprocess",transform:e},typeName:b.ZodEffects,...or(r)});class oY extends on{_parse(e){return this._getType(e)===iH.undefined?i8(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oY.create=(e,t)=>new oY({innerType:e,typeName:b.ZodOptional,...or(t)});class oH extends on{_parse(e){return this._getType(e)===iH.null?i8(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oH.create=(e,t)=>new oH({innerType:e,typeName:b.ZodNullable,...or(t)});class oX extends on{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===iH.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}oX.create=(e,t)=>new oX({innerType:e,typeName:b.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...or(t)});class o0 extends on{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return i7(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new i1(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new i1(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}o0.create=(e,t)=>new o0({innerType:e,typeName:b.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...or(t)});class o1 extends on{_parse(e){if(this._getType(e)!==iH.nan){let t=this._getOrReturnCtx(e);return i5(t,{code:i0.invalid_type,expected:iH.nan,received:t.parsedType}),i6}return{status:"valid",value:e.data}}}o1.create=e=>new o1({typeName:b.ZodNaN,...or(e)}),Symbol("zod_brand");class o2 extends on{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class o4 extends on{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?i6:"dirty"===e.status?(t.dirty(),i3(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?i6:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new o4({in:e,out:t,typeName:b.ZodPipeline})}}class o5 extends on{_parse(e){let t=this._def.innerType._parse(e),r=e=>("valid"===e.status&&(e.value=Object.freeze(e.value)),e);return i7(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}o5.create=(e,t)=>new o5({innerType:e,typeName:b.ZodReadonly,...or(t)}),oP.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(b||(b={})),o_.create,ox.create,o1.create,ok.create,oE.create,oI.create,oT.create,oS.create,oO.create,oA.create,oN.create,oj.create,oC.create,oR.create,oP.create,oP.strictCreate,oz.create,o$.create,oD.create,oF.create,oL.create,oZ.create,oB.create,oU.create,oq.create,oK.create,oG.create,oW.create,oJ.create,oQ.create,oY.create,oH.create,oQ.createWithPreprocess,o4.create;var o9=r(9507);function o6(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}async function o3(e,t){if(null==e)return Promise.resolve();let r=null==t?void 0:t.abortSignal;return new Promise((t,n)=>{if(null==r?void 0:r.aborted)return void n(o8());let a=setTimeout(()=>{i(),t()},e),i=()=>{clearTimeout(a),null==r||r.removeEventListener("abort",o)},o=()=>{i(),n(o8())};null==r||r.addEventListener("abort",o)})}function o8(){return new DOMException("Delay was aborted","AbortError")}function o7(e){return Object.fromEntries([...e.headers])}var se=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=()=>{let e=r.length,n=Array(t);for(let a=0;a<t;a++)n[a]=r[Math.random()*e|0];return n.join("")};if(null==e)return a;if(r.includes(n))throw new eM({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${a()}`},st=se();function sr(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function sn(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var sa=["fetch failed","failed to fetch"];function si({error:e,url:t,requestBodyValues:r}){if(sn(e))return e;if(e instanceof TypeError&&sa.includes(e.message.toLowerCase())){let n=e.cause;if(null!=n)return new eS({message:`Cannot connect to API: ${n.message}`,cause:n,url:t,requestBodyValues:r,isRetryable:!0})}return e}function so(e=globalThis){var t,r,n;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(n=null==(r=e.process)?void 0:r.versions)?void 0:n.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function ss(e,...t){let r=new Headers(function(e){if(null==e)return{};let t={};if(e instanceof Headers)e.forEach((e,r)=>{t[r.toLowerCase()]=e});else for(let[r,n]of(Array.isArray(e)||(e=Object.entries(e)),e))null!=n&&(t[r.toLowerCase()]=n);return t}(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var sl="3.0.13",su=()=>globalThis.fetch,sc=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:n,abortSignal:a,fetch:i=su()})=>{try{let o=await i(e,{method:"GET",headers:ss(t,`ai-sdk/provider-utils/${sl}`,so()),signal:a}),s=o7(o);if(!o.ok){let t;try{t=await n({response:o,url:e,requestBodyValues:{}})}catch(t){if(sn(t)||eS.isInstance(t))throw t;throw new eS({message:"Failed to process error response",cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}throw t.value}try{return await r({response:o,url:e,requestBodyValues:{}})}catch(t){if(t instanceof Error&&(sn(t)||eS.isInstance(t)))throw t;throw new eS({message:"Failed to process successful response",cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}}catch(t){throw si({error:t,url:e,requestBodyValues:{}})}};function sd({settingValue:e,environmentVariableName:t}){return"string"==typeof e?e:null!=e||void 0===o9?void 0:null!=(e=o9.env[t])&&"string"==typeof e?e:void 0}var sp=/"__proto__"\s*:/,sf=/"constructor"\s*:/;function sh(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===sp.test(e)&&!1===sf.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let r of(t=[],e)){if(Object.prototype.hasOwnProperty.call(r,"__proto__")||Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in r){let n=r[e];n&&"object"==typeof n&&t.push(n)}}}return e}(t)}finally{Error.stackTraceLimit=t}}var sm=Symbol.for("vercel.ai.validator");function sy(e){let t;return()=>(null==t&&(t=e()),t)}async function sg({value:e,schema:t}){let r=await sv({value:e,schema:t});if(!r.success)throw e6.wrap({value:e,cause:r.error});return r.value}async function sv({value:e,schema:t}){var r;let n="object"==typeof t&&null!==t&&sm in t&&!0===t[sm]&&"validate"in t?t:"function"==typeof t?t():(r=t,{[sm]:!0,validate:async e=>{let t=await r["~standard"].validate(e);return null==t.issues?{success:!0,value:t.value}:{success:!1,error:new e6({value:e,cause:t.issues})}}});try{if(null==n.validate)return{success:!0,value:e,rawValue:e};let t=await n.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:e6.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:e6.wrap({value:e,cause:t}),rawValue:e}}}async function sb({text:e,schema:t}){try{let r=sh(e);if(null==t)return r;return sg({value:r,schema:t})}catch(t){if(eW.isInstance(t)||e6.isInstance(t))throw t;throw new eW({text:e,cause:t})}}async function sw({text:e,schema:t}){try{let r=sh(e);if(null==t)return{success:!0,value:r,rawValue:r};return await sv({value:r,schema:t})}catch(t){return{success:!1,error:eW.isInstance(t)?t:new eW({text:e,cause:t}),rawValue:void 0}}}function s_(e){try{return sh(e),!0}catch(e){return!1}}async function sx({provider:e,providerOptions:t,schema:r}){if((null==t?void 0:t[e])==null)return;let n=await sv({value:t[e],schema:r});if(!n.success)throw new eM({argument:"providerOptions",message:`invalid ${e} provider options`,cause:n.error});return n.value}var sk=()=>globalThis.fetch,sE=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:i,fetch:o})=>sT({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:i,fetch:o}),sI=async({url:e,headers:t,formData:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:i,fetch:o})=>sT({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:i,fetch:o}),sT=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:a,abortSignal:i,fetch:o=sk()})=>{try{let s=await o(e,{method:"POST",headers:ss(t,`ai-sdk/provider-utils/${sl}`,so()),body:r.content,signal:i}),l=o7(s);if(!s.ok){let t;try{t=await a({response:s,url:e,requestBodyValues:r.values})}catch(t){if(sn(t)||eS.isInstance(t))throw t;throw new eS({message:"Failed to process error response",cause:t,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await n({response:s,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(sn(t)||eS.isInstance(t)))throw t;throw new eS({message:"Failed to process successful response",cause:t,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){throw si({error:t,url:e,requestBodyValues:r.values})}};async function sS(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var sO=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:a,requestBodyValues:i})=>{let o=await n.text(),s=o7(n);if(""===o.trim())return{responseHeaders:s,value:new eS({message:n.statusText,url:a,requestBodyValues:i,statusCode:n.status,responseHeaders:s,responseBody:o,isRetryable:null==r?void 0:r(n)})};try{let l=await sb({text:o,schema:e});return{responseHeaders:s,value:new eS({message:t(l),url:a,requestBodyValues:i,statusCode:n.status,responseHeaders:s,responseBody:o,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:s,value:new eS({message:n.statusText,url:a,requestBodyValues:i,statusCode:n.status,responseHeaders:s,responseBody:o,isRetryable:null==r?void 0:r(n)})}}},sA=e=>async({response:t})=>{let r=o7(t);if(null==t.body)throw new ej({});return{responseHeaders:r,value:function({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new tn).pipeThrough(new TransformStream({async transform({data:e},r){"[DONE]"!==e&&r.enqueue(await sw({text:e,schema:t}))}}))}({stream:t.body,schema:e})}},sN=e=>async({response:t,url:r,requestBodyValues:n})=>{let a=await t.text(),i=await sw({text:a,schema:e}),o=o7(t);if(!i.success)throw new eS({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:r,requestBodyValues:n});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},sj=Symbol("Let zodToJsonSchema decide on which parser to use"),sC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function sR(e,t){return sq(e.type._def,t)}var sP=void 0,sz={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===sP&&(sP=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),sP),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function sM(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":sF(r,"email",n.message,t);break;case"format:idn-email":sF(r,"idn-email",n.message,t);break;case"pattern:zod":sL(r,sz.email,n.message,t)}break;case"url":sF(r,"uri",n.message,t);break;case"uuid":sF(r,"uuid",n.message,t);break;case"regex":sL(r,n.regex,n.message,t);break;case"cuid":sL(r,sz.cuid,n.message,t);break;case"cuid2":sL(r,sz.cuid2,n.message,t);break;case"startsWith":sL(r,RegExp(`^${s$(n.value,t)}`),n.message,t);break;case"endsWith":sL(r,RegExp(`${s$(n.value,t)}$`),n.message,t);break;case"datetime":sF(r,"date-time",n.message,t);break;case"date":sF(r,"date",n.message,t);break;case"time":sF(r,"time",n.message,t);break;case"duration":sF(r,"duration",n.message,t);break;case"length":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value;break;case"includes":sL(r,RegExp(s$(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&sF(r,"ipv4",n.message,t),"v4"!==n.version&&sF(r,"ipv6",n.message,t);break;case"base64url":sL(r,sz.base64url,n.message,t);break;case"jwt":sL(r,sz.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&sL(r,sz.ipv4Cidr,n.message,t),"v4"!==n.version&&sL(r,sz.ipv6Cidr,n.message,t);break;case"emoji":sL(r,sz.emoji(),n.message,t);break;case"ulid":sL(r,sz.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":sF(r,"binary",n.message,t);break;case"contentEncoding:base64":r.contentEncoding="base64";break;case"pattern:zod":sL(r,sz.base64,n.message,t)}break;case"nanoid":sL(r,sz.nanoid,n.message,t)}return r}function s$(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)sD.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}var sD=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function sF(e,t,r,n){var a;e.format||(null==(a=e.anyOf)?void 0:a.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function sL(e,t,r,n){var a;e.pattern||(null==(a=e.allOf)?void 0:a.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:sZ(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=sZ(t,n)}function sZ(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=n.i?e.source.toLowerCase():e.source,i="",o=!1,s=!1,l=!1;for(let e=0;e<a.length;e++){if(o){i+=a[e],o=!1;continue}if(n.i){if(s){if(a[e].match(/[a-z]/)){l?(i+=a[e],i+=`${a[e-2]}-${a[e]}`.toUpperCase(),l=!1):"-"===a[e+1]&&(null==(r=a[e+2])?void 0:r.match(/[a-z]/))?(i+=a[e],l=!0):i+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){i+=`[${a[e]}${a[e].toUpperCase()}]`;continue}}if(n.m){if("^"===a[e]){i+=`(^|(?<=[\r
]))`;continue}else if("$"===a[e]){i+=`($|(?=[\r
]))`;continue}}if(n.s&&"."===a[e]){i+=s?`${a[e]}\r
`:`[${a[e]}\r
]`;continue}i+=a[e],"\\"===a[e]?o=!0:s&&"]"===a[e]?s=!1:s||"["!==a[e]||(s=!0)}try{new RegExp(i)}catch(r){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function sB(e,t){var r,n,a,i,o,s;let l={type:"object",additionalProperties:null!=(r=sq(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?r:t.allowedAdditionalProperties};if((null==(n=e.keyType)?void 0:n._def.typeName)===b.ZodString&&(null==(a=e.keyType._def.checks)?void 0:a.length)){let{type:r,...n}=sM(e.keyType._def,t);return{...l,propertyNames:n}}if((null==(i=e.keyType)?void 0:i._def.typeName)===b.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if((null==(o=e.keyType)?void 0:o._def.typeName)===b.ZodBranded&&e.keyType._def.type._def.typeName===b.ZodString&&(null==(s=e.keyType._def.type._def.checks)?void 0:s.length)){let{type:r,...n}=sR(e.keyType._def,t);return{...l,propertyNames:n}}return l}var sU={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function sq(e,t,r=!1){var n;let a=t.seen.get(e);if(t.override){let i=null==(n=t.override)?void 0:n.call(t,e,t,a,r);if(i!==sj)return i}if(a&&!r){let e=sK(a,t);if(void 0!==e)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let o=((e,t,r)=>{switch(t){case b.ZodString:return sM(e,r);case b.ZodNumber:var n,a,i,o,s,l,u=e;let c={type:"number"};if(!u.checks)return c;for(let e of u.checks)switch(e.kind){case"int":c.type="integer";break;case"min":e.inclusive?c.minimum=e.value:c.exclusiveMinimum=e.value;break;case"max":e.inclusive?c.maximum=e.value:c.exclusiveMaximum=e.value;break;case"multipleOf":c.multipleOf=e.value}return c;case b.ZodObject:return function(e,t){let r={type:"object",properties:{}},n=[],a=e.shape();for(let e in a){let i=a[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch(e){return!0}}(i),s=sq(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==s&&(r.properties[e]=s,o||n.push(e))}n.length&&(r.required=n);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return sq(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(r.additionalProperties=i),r}(e,r);case b.ZodBigInt:var d=e;let p={type:"integer",format:"int64"};if(!d.checks)return p;for(let e of d.checks)switch(e.kind){case"min":e.inclusive?p.minimum=e.value:p.exclusiveMinimum=e.value;break;case"max":e.inclusive?p.maximum=e.value:p.exclusiveMaximum=e.value;break;case"multipleOf":p.multipleOf=e.value}return p;case b.ZodBoolean:return{type:"boolean"};case b.ZodDate:return function e(t,r,n){let a=null!=n?n:r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,a)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var i=t;let o={type:"integer",format:"unix-time"};for(let e of i.checks)switch(e.kind){case"min":o.minimum=e.value;break;case"max":o.maximum=e.value}return o}}(e,r);case b.ZodUndefined:return{not:{}};case b.ZodNull:return{type:"null"};case b.ZodArray:var f,h,m,y=e,g=r;let v={type:"array"};return(null==(f=y.type)?void 0:f._def)&&(null==(m=null==(h=y.type)?void 0:h._def)?void 0:m.typeName)!==b.ZodAny&&(v.items=sq(y.type._def,{...g,currentPath:[...g.currentPath,"items"]})),y.minLength&&(v.minItems=y.minLength.value),y.maxLength&&(v.maxItems=y.maxLength.value),y.exactLength&&(v.minItems=y.exactLength.value,v.maxItems=y.exactLength.value),v;case b.ZodUnion:case b.ZodDiscriminatedUnion:return function(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in sU&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=sU[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};var n=e,a=t;let i=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((e,t)=>sq(e._def,{...a,currentPath:[...a.currentPath,"anyOf",`${t}`]})).filter(e=>!!e&&(!a.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return i.length?{anyOf:i}:void 0}(e,r);case b.ZodIntersection:var w=e,_=r;let x=[sq(w.left._def,{..._,currentPath:[..._.currentPath,"allOf","0"]}),sq(w.right._def,{..._,currentPath:[..._.currentPath,"allOf","1"]})].filter(e=>!!e),k=[];return x.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)k.push(...e.allOf);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}k.push(t)}}),k.length?{allOf:k}:void 0;case b.ZodTuple:return R=e,P=r,R.rest?{type:"array",minItems:R.items.length,items:R.items.map((e,t)=>sq(e._def,{...P,currentPath:[...P.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:sq(R.rest._def,{...P,currentPath:[...P.currentPath,"additionalItems"]})}:{type:"array",minItems:R.items.length,maxItems:R.items.length,items:R.items.map((e,t)=>sq(e._def,{...P,currentPath:[...P.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case b.ZodRecord:return sB(e,r);case b.ZodLiteral:var E=e;let I=typeof E.value;return"bigint"!==I&&"number"!==I&&"boolean"!==I&&"string"!==I?{type:Array.isArray(E.value)?"array":"object"}:{type:"bigint"===I?"integer":I,const:E.value};case b.ZodEnum:return{type:"string",enum:Array.from(e.values)};case b.ZodNativeEnum:var T=e;let S=T.values,O=Object.keys(T.values).filter(e=>"number"!=typeof S[S[e]]).map(e=>S[e]),A=Array.from(new Set(O.map(e=>typeof e)));return{type:1===A.length?"string"===A[0]?"string":"number":["string","number"],enum:O};case b.ZodNullable:var N=e,j=r;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(N.innerType._def.typeName)&&(!N.innerType._def.checks||!N.innerType._def.checks.length))return{type:[sU[N.innerType._def.typeName],"null"]};let C=sq(N.innerType._def,{...j,currentPath:[...j.currentPath,"anyOf","0"]});return C&&{anyOf:[C,{type:"null"}]};case b.ZodOptional:var R,P,z,M=e,$=r;if($.currentPath.toString()===(null==(z=$.propertyPath)?void 0:z.toString()))return sq(M.innerType._def,$);let D=sq(M.innerType._def,{...$,currentPath:[...$.currentPath,"anyOf","1"]});return D?{anyOf:[{not:{}},D]}:{};case b.ZodMap:return n=e,"record"===(a=r).mapStrategy?sB(n,a):{type:"array",maxItems:125,items:{type:"array",items:[sq(n.keyType._def,{...a,currentPath:[...a.currentPath,"items","items","0"]})||{},sq(n.valueType._def,{...a,currentPath:[...a.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case b.ZodSet:var F=e,L=r;let Z={type:"array",uniqueItems:!0,items:sq(F.valueType._def,{...L,currentPath:[...L.currentPath,"items"]})};return F.minSize&&(Z.minItems=F.minSize.value),F.maxSize&&(Z.maxItems=F.maxSize.value),Z;case b.ZodLazy:return()=>e.getter()._def;case b.ZodPromise:return sq(e.type._def,r);case b.ZodNaN:case b.ZodNever:return{not:{}};case b.ZodEffects:return i=e,"input"===(o=r).effectStrategy?sq(i.schema._def,o):{};case b.ZodAny:case b.ZodUnknown:return{};case b.ZodDefault:return s=e,l=r,{...sq(s.innerType._def,l),default:s.defaultValue()};case b.ZodBranded:return sR(e,r);case b.ZodReadonly:case b.ZodCatch:return sq(e.innerType._def,r);case b.ZodPipeline:var B=e,U=r;if("input"===U.pipeStrategy)return sq(B.in._def,U);if("output"===U.pipeStrategy)return sq(B.out._def,U);let q=sq(B.in._def,{...U,currentPath:[...U.currentPath,"allOf","0"]}),K=sq(B.out._def,{...U,currentPath:[...U.currentPath,"allOf",q?"1":"0"]});return{allOf:[q,K].filter(e=>void 0!==e)};case b.ZodFunction:case b.ZodVoid:case b.ZodSymbol:default:return}})(e,e.typeName,t),s="function"==typeof o?sq(o(),t):o;if(s&&sV(e,t,s),t.postProcess){let r=t.postProcess(s,e,t);return i.jsonSchema=s,r}return i.jsonSchema=s,s}var sK=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:((e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")})(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},sV=(e,t,r)=>(e.description&&(r.description=e.description),r);function sG(e,t){var r,n;if("_zod"in e){let n=null!=(r=null==t?void 0:t.useReferences)&&r;return sJ(()=>(function(e,t){if(e instanceof am){let r=new aS(t),n={};for(let t of e._idmap.entries()){let[e,n]=t;r.process(n)}let a={},i={registry:e,uri:t?.uri,defs:n};for(let n of e._idmap.entries()){let[e,o]=n;a[e]=r.emit(o,{...t,external:i})}return Object.keys(n).length>0&&(a.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:a}}let r=new aS(t);return r.process(e),r.emit(e,t)})(e,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:async t=>{let r=await a$(e,t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}let a=null!=(n=null==t?void 0:t.useReferences)&&n;return sJ(()=>((e,t)=>{var r;let n=(e=>{let t,r="string"==typeof(t=e)?{...sC,name:t}:{...sC,...t},n=void 0!==r.name?[...r.basePath,r.definitionPath,r.name]:r.basePath;return{...r,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(r.definitions).map(([e,t])=>[t._def,{def:t._def,path:[...r.basePath,r.definitionPath,e],jsonSchema:void 0}]))}})(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>{var a;return{...e,[t]:null!=(a=sq(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0))?a:{}}},{}):void 0,i="string"==typeof t?t:(null==t?void 0:t.nameStrategy)==="title"||null==t?void 0:t.name,o=null!=(r=sq(e._def,void 0===i?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))?r:{},s="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(o.title=s);let l=void 0===i?a?{...o,[n.definitionPath]:a}:o:{$ref:[..."relative"===n.$refStrategy?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...a,[i]:o}};return l.$schema="http://json-schema.org/draft-07/schema#",l})(e,{$refStrategy:a?"root":"none"}),{validate:async t=>{let r=await e.safeParseAsync(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var sW=Symbol.for("vercel.ai.schema");function sJ(e,{validate:t}={}){return{[sW]:!0,_type:void 0,[sm]:!0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}function sQ(e){return null==e?sJ({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&sW in e&&!0===e[sW]&&"jsonSchema"in e&&"validate"in e?e:"function"==typeof e?e():sG(e)}var{btoa:sY,atob:sH}=globalThis;function sX(e){let t=sH(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function s0(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return sY(t)}function s1(e){return null==e?void 0:e.replace(/\/$/,"")}async function*s2({execute:e,input:t,options:r}){let n=e(t,r);if(null!=n&&"function"==typeof n[Symbol.asyncIterator]){let e;for await(let t of n)e=t,yield{type:"preliminary",output:t};yield{type:"final",output:e}}else yield{type:"final",output:await n}}function s4({id:e,model:t,created:r}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=r?new Date(1e3*r):void 0}}var s5=iE({reasoningFormat:iR(["parsed","raw","hidden"]).optional(),reasoningEffort:aJ().optional(),parallelToolCalls:ip().optional(),user:aJ().optional(),structuredOutputs:ip().optional(),serviceTier:iR(["on_demand","flex","auto"]).optional()}),s9=iE({error:iE({message:aJ(),type:aJ()})}),s6=sO({errorSchema:s9,errorToMessage:e=>e.error.message}),s3=["openai/gpt-oss-20b","openai/gpt-oss-120b"];function s8(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var s7=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:n,topK:a,frequencyPenalty:i,presencePenalty:o,stopSequences:s,responseFormat:l,seed:u,stream:c,tools:d,toolChoice:p,providerOptions:f}){var h,m;let y=[],g=await sx({provider:"groq",providerOptions:f,schema:s5}),v=null==(h=null==g?void 0:g.structuredOutputs)||h;null!=a&&y.push({type:"unsupported-setting",setting:"topK"}),(null==l?void 0:l.type)!=="json"||null==l.schema||v||y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{tools:b,toolChoice:w,toolWarnings:_}=function({tools:e,toolChoice:t,modelId:r}){e=(null==e?void 0:e.length)?e:void 0;let n=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let a=[];for(let t of e)if("provider-defined"===t.type)if("groq.browser_search"===t.id)s3.includes(r)?a.push({type:"browser_search"}):n.push({type:"unsupported-tool",tool:t,details:`Browser search is only supported on the following models: ${s3.join(", ")}. Current model: ${r}`});else n.push({type:"unsupported-tool",tool:t});else a.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema}});if(null==t)return{tools:a,toolChoice:void 0,toolWarnings:n};let i=t.type;switch(i){case"auto":case"none":case"required":return{tools:a,toolChoice:i,toolWarnings:n};case"tool":return{tools:a,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:n};default:throw new te({functionality:`tool choice type: ${i}`})}}({tools:d,toolChoice:p,modelId:this.modelId});return{args:{model:this.modelId,user:null==g?void 0:g.user,parallel_tool_calls:null==g?void 0:g.parallelToolCalls,max_tokens:t,temperature:r,top_p:n,frequency_penalty:i,presence_penalty:o,stop:s,seed:u,response_format:(null==l?void 0:l.type)==="json"?v&&null!=l.schema?{type:"json_schema",json_schema:{schema:l.schema,name:null!=(m=l.name)?m:"response",description:l.description}}:{type:"json_object"}:void 0,reasoning_format:null==g?void 0:g.reasoningFormat,reasoning_effort:null==g?void 0:g.reasoningEffort,service_tier:null==g?void 0:g.serviceTier,messages:function(e){let t=[];for(let{role:r,content:n}of e)switch(r){case"system":t.push({role:"system",content:n});break;case"user":if(1===n.length&&"text"===n[0].type){t.push({role:"user",content:n[0].text});break}t.push({role:"user",content:n.map(e=>{switch(e.type){case"text":return{type:"text",text:e.text};case"file":{var t;if(!e.mediaType.startsWith("image/"))throw new te({functionality:"Non-image file content parts"});let r="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${r};base64,${(t=e.data)instanceof Uint8Array?s0(t):t}`}}}}})});break;case"assistant":{let e="",r="",a=[];for(let t of n)switch(t.type){case"reasoning":r+=t.text;break;case"text":e+=t.text;break;case"tool-call":a.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.input)}})}t.push({role:"assistant",content:e,...r.length>0?{reasoning:r}:null,...a.length>0?{tool_calls:a}:null});break}case"tool":for(let e of n){let r,n=e.output;switch(n.type){case"text":case"error-text":r=n.value;break;case"content":case"json":case"error-json":r=JSON.stringify(n.value)}t.push({role:"tool",tool_call_id:e.toolCallId,content:r})}break;default:throw Error(`Unsupported role: ${r}`)}return t}(e),tools:b,tool_choice:w},warnings:[...y,..._]}}async doGenerate(e){var t,r,n,a,i,o,s,l,u,c;let{args:d,warnings:p}=await this.getArgs({...e,stream:!1}),f=JSON.stringify(d),{responseHeaders:h,value:m,rawValue:y}=await sE({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:o6(this.config.headers(),e.headers),body:d,failedResponseHandler:s6,successfulResponseHandler:sN(le),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=m.choices[0],v=[],b=g.message.content;null!=b&&b.length>0&&v.push({type:"text",text:b});let w=g.message.reasoning;if(null!=w&&w.length>0&&v.push({type:"reasoning",text:w}),null!=g.message.tool_calls)for(let e of g.message.tool_calls)v.push({type:"tool-call",toolCallId:null!=(t=e.id)?t:st(),toolName:e.function.name,input:e.function.arguments});return{content:v,finishReason:s8(g.finish_reason),usage:{inputTokens:null!=(n=null==(r=m.usage)?void 0:r.prompt_tokens)?n:void 0,outputTokens:null!=(i=null==(a=m.usage)?void 0:a.completion_tokens)?i:void 0,totalTokens:null!=(s=null==(o=m.usage)?void 0:o.total_tokens)?s:void 0,cachedInputTokens:null!=(c=null==(u=null==(l=m.usage)?void 0:l.prompt_tokens_details)?void 0:u.cached_tokens)?c:void 0},response:{...s4(m),headers:h,body:y},warnings:p,request:{body:f}}}async doStream(e){let t,{args:r,warnings:n}=await this.getArgs({...e,stream:!0}),a=JSON.stringify({...r,stream:!0}),{responseHeaders:i,value:o}=await sE({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:o6(this.config.headers(),e.headers),body:{...r,stream:!0},failedResponseHandler:s6,successfulResponseHandler:sA(lt),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=[],l="unknown",u={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,cachedInputTokens:void 0},c=!0,d=!1,p=!1;return{stream:o.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:n})},transform(t,r){var n,a,i,o,f,h,m,y,g,v,b,w,_,x,k,E,I,T;if(e.includeRawChunks&&r.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){l="error",r.enqueue({type:"error",error:t.error});return}let S=t.value;if("error"in S){l="error",r.enqueue({type:"error",error:S.error});return}c&&(c=!1,r.enqueue({type:"response-metadata",...s4(S)})),(null==(n=S.x_groq)?void 0:n.usage)!=null&&(u.inputTokens=null!=(a=S.x_groq.usage.prompt_tokens)?a:void 0,u.outputTokens=null!=(i=S.x_groq.usage.completion_tokens)?i:void 0,u.totalTokens=null!=(o=S.x_groq.usage.total_tokens)?o:void 0,u.cachedInputTokens=null!=(h=null==(f=S.x_groq.usage.prompt_tokens_details)?void 0:f.cached_tokens)?h:void 0);let O=S.choices[0];if((null==O?void 0:O.finish_reason)!=null&&(l=s8(O.finish_reason)),(null==O?void 0:O.delta)==null)return;let A=O.delta;if(null!=A.reasoning&&A.reasoning.length>0&&(p||(r.enqueue({type:"reasoning-start",id:"reasoning-0"}),p=!0),r.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:A.reasoning})),null!=A.content&&A.content.length>0&&(d||(r.enqueue({type:"text-start",id:"txt-0"}),d=!0),r.enqueue({type:"text-delta",id:"txt-0",delta:A.content})),null!=A.tool_calls)for(let e of A.tool_calls){let t=e.index;if(null==s[t]){if("function"!==e.type)throw new eq({data:e,message:"Expected 'function' type."});if(null==e.id)throw new eq({data:e,message:"Expected 'id' to be a string."});if((null==(m=e.function)?void 0:m.name)==null)throw new eq({data:e,message:"Expected 'function.name' to be a string."});r.enqueue({type:"tool-input-start",id:e.id,toolName:e.function.name}),s[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(y=e.function.arguments)?y:""},hasFinished:!1};let n=s[t];(null==(g=n.function)?void 0:g.name)!=null&&(null==(v=n.function)?void 0:v.arguments)!=null&&(n.function.arguments.length>0&&r.enqueue({type:"tool-input-delta",id:n.id,delta:n.function.arguments}),s_(n.function.arguments)&&(r.enqueue({type:"tool-input-end",id:n.id}),r.enqueue({type:"tool-call",toolCallId:null!=(b=n.id)?b:st(),toolName:n.function.name,input:n.function.arguments}),n.hasFinished=!0));continue}let n=s[t];!n.hasFinished&&((null==(w=e.function)?void 0:w.arguments)!=null&&(n.function.arguments+=null!=(x=null==(_=e.function)?void 0:_.arguments)?x:""),r.enqueue({type:"tool-input-delta",id:n.id,delta:null!=(k=e.function.arguments)?k:""}),(null==(E=n.function)?void 0:E.name)!=null&&(null==(I=n.function)?void 0:I.arguments)!=null&&s_(n.function.arguments)&&(r.enqueue({type:"tool-input-end",id:n.id}),r.enqueue({type:"tool-call",toolCallId:null!=(T=n.id)?T:st(),toolName:n.function.name,input:n.function.arguments}),n.hasFinished=!0))}},flush(e){p&&e.enqueue({type:"reasoning-end",id:"reasoning-0"}),d&&e.enqueue({type:"text-end",id:"txt-0"}),e.enqueue({type:"finish",finishReason:l,usage:u,...null!=t?{providerMetadata:t}:{}})}})),request:{body:a},response:{headers:i}}}},le=iE({id:aJ().nullish(),created:il().nullish(),model:aJ().nullish(),choices:ix(iE({message:iE({content:aJ().nullish(),reasoning:aJ().nullish(),tool_calls:ix(iE({id:aJ().nullish(),type:iz("function"),function:iE({name:aJ(),arguments:aJ()})})).nullish()}),index:il(),finish_reason:aJ().nullish()})),usage:iE({prompt_tokens:il().nullish(),completion_tokens:il().nullish(),total_tokens:il().nullish(),prompt_tokens_details:iE({cached_tokens:il().nullish()}).nullish()}).nullish()}),lt=iS([iE({id:aJ().nullish(),created:il().nullish(),model:aJ().nullish(),choices:ix(iE({delta:iE({content:aJ().nullish(),reasoning:aJ().nullish(),tool_calls:ix(iE({index:il(),id:aJ().nullish(),type:iz("function").optional(),function:iE({name:aJ().nullish(),arguments:aJ().nullish()})})).nullish()}).nullish(),finish_reason:aJ().nullable().optional(),index:il()})),x_groq:iE({usage:iE({prompt_tokens:il().nullish(),completion_tokens:il().nullish(),total_tokens:il().nullish(),prompt_tokens_details:iE({cached_tokens:il().nullish()}).nullish()}).nullish()}).nullish()}),s9]),lr=iE({language:aJ().nullish(),prompt:aJ().nullish(),responseFormat:aJ().nullish(),temperature:il().min(0).max(1).nullish(),timestampGranularities:ix(aJ()).nullish()}),ln=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:r}){var n,a,i,o,s;let l=await sx({provider:"groq",providerOptions:r,schema:lr}),u=new FormData,c=e instanceof Uint8Array?new Blob([e]):new Blob([sX(e)]);u.append("model",this.modelId);let d=function(e){var t;let[r,n=""]=e.toLowerCase().split("/");return null!=(t=({mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"})[n])?t:n}(t);if(u.append("file",new File([c],"audio",{type:t}),`audio.${d}`),l){let e={language:null!=(n=l.language)?n:void 0,prompt:null!=(a=l.prompt)?a:void 0,response_format:null!=(i=l.responseFormat)?i:void 0,temperature:null!=(o=l.temperature)?o:void 0,timestamp_granularities:null!=(s=l.timestampGranularities)?s:void 0};for(let t in e){let r=e[t];void 0!==r&&u.append(t,String(r))}}return{formData:u,warnings:[]}}async doGenerate(e){var t,r,n,a,i,o,s;let l=null!=(n=null==(r=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:r.call(t))?n:new Date,{formData:u,warnings:c}=await this.getArgs(e),{value:d,responseHeaders:p,rawValue:f}=await sI({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:o6(this.config.headers(),e.headers),formData:u,failedResponseHandler:s6,successfulResponseHandler:sN(la),abortSignal:e.abortSignal,fetch:this.config.fetch});return{text:d.text,segments:null!=(i=null==(a=d.segments)?void 0:a.map(e=>({text:e.text,startSecond:e.start,endSecond:e.end})))?i:[],language:null!=(o=d.language)?o:void 0,durationInSeconds:null!=(s=d.duration)?s:void 0,warnings:c,response:{timestamp:l,modelId:this.modelId,headers:p,body:f}}}},la=iE({text:aJ(),x_groq:iE({id:aJ()}),task:aJ().nullish(),language:aJ().nullish(),duration:il().nullish(),segments:ix(iE({id:il(),seek:il(),start:il(),end:il(),text:aJ(),tokens:ix(il()),temperature:il(),avg_logprob:il(),compression_ratio:il(),no_speech_prob:il()})).nullish()}),li={browserSearch:function({id:e,name:t,inputSchema:r}){return({execute:n,outputSchema:a,toModelOutput:i,onInputStart:o,onInputDelta:s,onInputAvailable:l,...u})=>({type:"provider-defined",id:e,name:t,args:u,inputSchema:r,outputSchema:a,execute:n,toModelOutput:i,onInputStart:o,onInputDelta:s,onInputAvailable:l})}({id:"groq.browser_search",name:"browser_search",inputSchema:iE({})})},lo=function(e={}){var t;let r=null!=(t=s1(e.baseURL))?t:"https://api.groq.com/openai/v1",n=()=>ss({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new eH({message:`${n} API key must be a string.`});if(void 0===o9)throw new eH({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=o9.env[t]))throw new eH({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new eH({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"GROQ_API_KEY",description:"Groq"})}`,...e.headers},"ai-sdk/groq/2.0.25"),a=t=>new s7(t,{provider:"groq.chat",url:({path:e})=>`${r}${e}`,headers:n,fetch:e.fetch}),i=e=>{if(new.target)throw Error("The Groq model function cannot be called with the new keyword.");return a(e)},o=t=>new ln(t,{provider:"groq.transcription",url:({path:e})=>`${r}${e}`,headers:n,fetch:e.fetch}),s=function(e){return i(e)};return s.languageModel=i,s.chat=a,s.textEmbeddingModel=e=>{throw new e2({modelId:e,modelType:"textEmbeddingModel"})},s.imageModel=e=>{throw new e2({modelId:e,modelType:"imageModel"})},s.transcription=o,s.transcriptionModel=o,s.tools=li,s}(),ls=r(5789),ll=r(3079).Buffer,lu=Symbol.for("vercel.ai.gateway.error"),lc=class e extends(_=Error,w=lu,_){constructor({message:e,statusCode:t=500,cause:r}){super(e),this[w]=!0,this.statusCode=t,this.cause=r}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return"object"==typeof e&&null!==e&&lu in e&&!0===e[lu]}},ld="GatewayAuthenticationError",lp=Symbol.for(`vercel.ai.gateway.error.${ld}`),lf=class e extends(k=lc,x=lp,k){constructor({message:e="Authentication failed",statusCode:t=401,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[x]=!0,this.name=ld,this.type="authentication_error"}static isInstance(e){return lc.hasMarker(e)&&lp in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:n="Authentication failed",statusCode:a=401,cause:i}){return new e({message:t?`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,statusCode:a,cause:i})}},lh="GatewayInvalidRequestError",lm=Symbol.for(`vercel.ai.gateway.error.${lh}`),ly=class extends(I=lc,E=lm,I){constructor({message:e="Invalid request",statusCode:t=400,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[E]=!0,this.name=lh,this.type="invalid_request_error"}static isInstance(e){return lc.hasMarker(e)&&lm in e}},lg="GatewayRateLimitError",lv=Symbol.for(`vercel.ai.gateway.error.${lg}`),lb=class extends(S=lc,T=lv,S){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[T]=!0,this.name=lg,this.type="rate_limit_exceeded"}static isInstance(e){return lc.hasMarker(e)&&lv in e}},lw="GatewayModelNotFoundError",l_=Symbol.for(`vercel.ai.gateway.error.${lw}`),lx=sy(()=>sG(iE({modelId:aJ()}))),lk=class extends(A=lc,O=l_,A){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[O]=!0,this.name=lw,this.type="model_not_found",this.modelId=r}static isInstance(e){return lc.hasMarker(e)&&l_ in e}},lE="GatewayInternalServerError",lI=Symbol.for(`vercel.ai.gateway.error.${lE}`),lT=class extends(j=lc,N=lI,j){constructor({message:e="Internal server error",statusCode:t=500,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[N]=!0,this.name=lE,this.type="internal_server_error"}static isInstance(e){return lc.hasMarker(e)&&lI in e}},lS="GatewayResponseError",lO=Symbol.for(`vercel.ai.gateway.error.${lS}`),lA=class extends(R=lc,C=lO,R){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:n,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[C]=!0,this.name=lS,this.type="response_error",this.response=r,this.validationError=n}static isInstance(e){return lc.hasMarker(e)&&lO in e}};async function lN({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:n,authMethod:a}){let i=await sv({value:e,schema:lj});if(!i.success)return new lA({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:i.error,cause:n});let o=i.value,s=o.error.type,l=o.error.message;switch(s){case"authentication_error":return lf.createContextualError({apiKeyProvided:"api-key"===a,oidcTokenProvided:"oidc"===a,statusCode:t,cause:n});case"invalid_request_error":return new ly({message:l,statusCode:t,cause:n});case"rate_limit_exceeded":return new lb({message:l,statusCode:t,cause:n});case"model_not_found":{let e=await sv({value:o.error.param,schema:lx});return new lk({message:l,statusCode:t,modelId:e.success?e.value.modelId:void 0,cause:n})}default:return new lT({message:l,statusCode:t,cause:n})}}var lj=sy(()=>sG(iE({error:iE({message:aJ(),type:aJ().nullish(),param:iv().nullish(),code:iS([aJ(),il()]).nullish()})})));function lC(e,t){var r;return lc.isInstance(e)?e:eS.isInstance(e)?lN({response:function(e){if(void 0!==e.data)return e.data;if(null!=e.responseBody)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}(e),statusCode:null!=(r=e.statusCode)?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):lN({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}var lR="ai-gateway-auth-method";async function lP(e){let t=await sv({value:e[lR],schema:lz});return t.success?t.value:void 0}var lz=sy(()=>sG(iS([iz("api-key"),iz("oidc")]))),lM=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await sc({url:`${this.config.baseURL}/config`,headers:await sS(this.config.headers()),successfulResponseHandler:sN(l$),failedResponseHandler:sO({errorSchema:iy(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await lC(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await sc({url:`${e.origin}/v1/credits`,headers:await sS(this.config.headers()),successfulResponseHandler:sN(lD),failedResponseHandler:sO({errorSchema:iy(),errorToMessage:e=>e}),fetch:this.config.fetch});return t}catch(e){throw await lC(e)}}},l$=sy(()=>sG(iE({models:ix(iE({id:aJ(),name:aJ(),description:aJ().nullish(),pricing:iE({input:aJ(),output:aJ(),input_cache_read:aJ().nullish(),input_cache_write:aJ().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:n})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...n?{cacheCreationInputTokens:n}:{}})).nullish(),specification:iE({specificationVersion:iz("v2"),provider:aJ(),modelId:aJ()}),modelType:iR(["language","embedding","image"]).nullish()}))}))),lD=sy(()=>sG(iE({balance:aJ(),total_used:aJ()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),lF=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:n}=e,a=await sS(this.config.headers());try{let{responseHeaders:i,value:o,rawValue:s}=await sE({url:this.getUrl(),headers:o6(a,e.headers,this.getModelConfigHeaders(this.modelId,!1),await sS(this.config.o11yHeaders)),body:t,successfulResponseHandler:sN(iy()),failedResponseHandler:sO({errorSchema:iy(),errorToMessage:e=>e}),...n&&{abortSignal:n},fetch:this.config.fetch});return{...o,request:{body:t},response:{headers:i,body:s},warnings:r}}catch(e){throw await lC(e,await lP(a))}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:n}=e,a=await sS(this.config.headers());try{let{value:i,responseHeaders:o}=await sE({url:this.getUrl(),headers:o6(a,e.headers,this.getModelConfigHeaders(this.modelId,!0),await sS(this.config.o11yHeaders)),body:t,successfulResponseHandler:sA(iy()),failedResponseHandler:sO({errorSchema:iy(),errorToMessage:e=>e}),...n&&{abortSignal:n},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(e){r.length>0&&e.enqueue({type:"stream-start",warnings:r})},transform(t,r){if(t.success){let n=t.value;("raw"!==n.type||e.includeRawChunks)&&("response-metadata"===n.type&&n.timestamp&&"string"==typeof n.timestamp&&(n.timestamp=new Date(n.timestamp)),r.enqueue(n))}else r.error(t.error)}})),request:{body:t},response:{headers:o}}}catch(e){throw await lC(e,await lP(a))}}isFilePart(e){return e&&"object"==typeof e&&"type"in e&&"file"===e.type}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)&&e.data instanceof Uint8Array){let t=Uint8Array.from(e.data),r=ll.from(t).toString("base64");e.data=new URL(`data:${e.mediaType||"application/octet-stream"};base64,${r}`)}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},lL=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:n}){var a;let i=await sS(this.config.headers());try{let{responseHeaders:o,value:s,rawValue:l}=await sE({url:this.getUrl(),headers:o6(i,null!=t?t:{},this.getModelConfigHeaders(),await sS(this.config.o11yHeaders)),body:{input:1===e.length?e[0]:e,...n?{providerOptions:n}:{}},successfulResponseHandler:sN(lZ),failedResponseHandler:sO({errorSchema:iy(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:s.embeddings,usage:null!=(a=s.usage)?a:void 0,providerMetadata:s.providerMetadata,response:{headers:o,body:l}}}catch(e){throw await lC(e,await lP(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},lZ=sy(()=>sG(iE({embeddings:ix(ix(il())),usage:iE({tokens:il()}).nullish(),providerMetadata:ij(aJ(),ij(aJ(),iv())).optional()})));async function lB(){var e;return null==(e=(0,ls.getContext)().headers)?void 0:e["x-vercel-id"]}var lU=function(e={}){var t,r;let n=null,a=null,i=null!=(t=e.metadataCacheRefreshMillis)?t:3e5,o=0,s=null!=(r=s1(e.baseURL))?r:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{let t=await lq(e);if(t)return ss({Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":"0.0.1",[lR]:t.authMethod,...e.headers},"ai-sdk/gateway/2.0.2");throw lf.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},u=()=>{let e=sd({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),t=sd({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),r=sd({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let n=await lB();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...r&&{"ai-o11y-region":r},...n&&{"ai-o11y-request-id":n}}}},c=t=>new lF(t,{provider:"gateway",baseURL:s,headers:l,fetch:e.fetch,o11yHeaders:u()}),d=async()=>new lM({baseURL:s,headers:l,fetch:e.fetch}).getCredits().catch(async e=>{throw await lC(e,await lP(await l()))}),p=function(e){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return c(e)};return p.getAvailableModels=async()=>{var t,r,u;let c=null!=(u=null==(r=null==(t=e._internal)?void 0:t.currentDate)?void 0:r.call(t).getTime())?u:Date.now();return(!n||c-o>i)&&(o=c,n=new lM({baseURL:s,headers:l,fetch:e.fetch}).getAvailableModels().then(e=>(a=e,e)).catch(async e=>{throw await lC(e,await lP(await l()))})),a?Promise.resolve(a):n},p.getCredits=d,p.imageModel=e=>{throw new e2({modelId:e,modelType:"imageModel"})},p.languageModel=c,p.textEmbeddingModel=t=>new lL(t,{provider:"gateway",baseURL:s,headers:l,fetch:e.fetch,o11yHeaders:u()}),p}();async function lq(e){let t=sd({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await (0,ls.getVercelOidcToken)(),authMethod:"oidc"}}catch(e){return null}}var lK="object"==typeof globalThis?globalThis:window,lV="1.9.0",lG=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,lW=function(e){var t=new Set([e]),r=new Set,n=e.match(lG);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(lG);if(!n)return i(e);var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease||a.major!==o.major)return i(e);if(0===a.major)return a.minor===o.minor&&a.patch<=o.patch?(t.add(e),!0):i(e);return a.minor<=o.minor?(t.add(e),!0):i(e)}}(lV),lJ=Symbol.for("opentelemetry.js.api."+lV.split(".")[0]);function lQ(e,t,r,n){void 0===n&&(n=!1);var a,i=lK[lJ]=null!=(a=lK[lJ])?a:{version:lV};if(!n&&i[e]){var o=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(i.version!==lV){var o=Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+lV);return r.error(o.stack||o.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+lV+"."),!0}function lY(e){var t,r,n=null==(t=lK[lJ])?void 0:t.version;if(n&&lW(n))return null==(r=lK[lJ])?void 0:r[e]}function lH(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+lV+".");var r=lK[lJ];r&&delete r[e]}var lX=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var a=new e(r._currentContext);return a._currentContext.set(t,n),a},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},l0=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},l1=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l2=function(){function e(){}return e.prototype.active=function(){return lX},e.prototype.with=function(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];return t.call.apply(t,l1([r],l0(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),l4=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},l5=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l9=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6("verbose",this._namespace,e)},e}();function l6(e,t,r){var n=lY("diag");if(n)return r.unshift(t),n[e].apply(n,l5([],l4(r),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(P||(P={}));var l3=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},l8=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l7=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=lY("diag");if(n)return n[e].apply(n,l8([],l3(t),!1))}}var t=this;t.setLogger=function(e,r){if(void 0===r&&(r={logLevel:P.INFO}),e===t){var n,a,i,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=o.stack)?n:o.message),!1}"number"==typeof r&&(r={logLevel:r});var s=lY("diag"),l=function(e,t){function r(r,n){var a=t[r];return"function"==typeof a&&e>=n?a.bind(t):function(){}}return e<P.NONE?e=P.NONE:e>P.ALL&&(e=P.ALL),t=t||{},{error:r("error",P.ERROR),warn:r("warn",P.WARN),info:r("info",P.INFO),debug:r("debug",P.DEBUG),verbose:r("verbose",P.VERBOSE)}}(null!=(a=r.logLevel)?a:P.INFO,e);if(s&&!r.suppressOverrideMessage){var u=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+u),l.warn("Current logger will overwrite one already registered from "+u)}return lQ("diag",l,t,!0)},t.disable=function(){lH("diag",t)},t.createComponentLogger=function(e){return new l9(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),ue=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},ut=function(e,t,r){if(r||2==arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},ur="context",un=new l2,ua=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return lQ(ur,e,l7.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,ut([e,t,r],ue(a),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return lY(ur)||un},e.prototype.disable=function(){this._getContextManager().disable(),lH(ur,l7.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(z||(z={}));var ui="0000000000000000",uo="00000000000000000000000000000000",us={traceId:uo,spanId:ui,traceFlags:z.NONE},ul=function(){function e(e){void 0===e&&(e=us),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),uu=Symbol.for("OpenTelemetry Context Key SPAN");function uc(e){return e.getValue(uu)||void 0}function ud(){return uc(ua.getInstance().active())}function up(e,t){return e.setValue(uu,t)}function uf(e){return e.deleteValue(uu)}function uh(e,t){return up(e,new ul(t))}function um(e){var t;return null==(t=uc(e))?void 0:t.spanContext()}var uy=/^([0-9a-f]{32})$/i,ug=/^[0-9a-f]{16}$/i;function uv(e){var t,r;return t=e.traceId,uy.test(t)&&t!==uo&&(r=e.spanId,ug.test(r)&&r!==ui)}function ub(e){return new ul(e)}var uw=ua.getInstance(),u_=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=uw.active()),null==t?void 0:t.root)return new ul;var n,a=r&&um(r);return"object"==typeof(n=a)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&uv(a)?new ul(a):new ul},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?o=t:3==arguments.length?(a=t,o=r):(a=t,i=r,o=n);var a,i,o,s=null!=i?i:uw.active(),l=this.startSpan(e,a,s),u=up(s,l);return uw.with(u,o,void 0,l)}},e}(),ux=new u_,uk=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):ux},e}(),uE=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new u_},e}()),uI=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!=(n=this.getDelegateTracer(e,t,r))?n:new uk(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:uE},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)},e}(),uT="trace",uS=(function(){function e(){this._proxyTracerProvider=new uI,this.wrapSpanContext=ub,this.isSpanContextValid=uv,this.deleteSpan=uf,this.getSpan=uc,this.getActiveSpan=ud,this.getSpanContext=um,this.setSpan=up,this.setSpanContext=uh}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=lQ(uT,this._proxyTracerProvider,l7.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return lY(uT)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){lH(uT,l7.instance()),this._proxyTracerProvider=new uI},e})().getInstance();!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(M||(M={}));var uO=Object.defineProperty,uA="AI_NoOutputSpecifiedError",uN=`vercel.ai.error.${uA}`,uj=Symbol.for(uN),uC=class extends ek{constructor({message:e="No output specified."}={}){super({name:uA,message:e}),this[$]=!0}static isInstance(e){return ek.hasMarker(e,uN)}};$=uj;var uR=!1,uP=e=>{if(0===e.length)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==t){if("function"==typeof t)return void t(e);for(let t of(uR||(uR=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),e))console.warn(function(e){let t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let r=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"unsupported-tool":{let r="name"in e.tool?e.tool.name:"unknown tool",n=`${t} The tool "${r}" is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}(t))}},uz="AI_InvalidArgumentError",uM=`vercel.ai.error.${uz}`,u$=Symbol.for(uM),uD=class extends ek{constructor({parameter:e,value:t,message:r}){super({name:uz,message:`Invalid argument for parameter ${e}: ${r}`}),this[D]=!0,this.parameter=e,this.value=t}static isInstance(e){return ek.hasMarker(e,uM)}};D=u$,Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");var uF="AI_InvalidToolInputError",uL=`vercel.ai.error.${uF}`,uZ=Symbol.for(uL),uB=class extends ek{constructor({toolInput:e,toolName:t,cause:r,message:n=`Invalid input for tool ${t}: ${eC(r)}`}){super({name:uF,message:n,cause:r}),this[F]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return ek.hasMarker(e,uL)}};F=uZ,Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");var uU="AI_NoObjectGeneratedError",uq=`vercel.ai.error.${uU}`,uK=Symbol.for(uq),uV=class extends ek{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:a,finishReason:i}){super({name:uU,message:e,cause:t}),this[L]=!0,this.text=r,this.response=n,this.usage=a,this.finishReason=i}static isInstance(e){return ek.hasMarker(e,uq)}};L=uK,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError");var uG="AI_NoSuchToolError",uW=`vercel.ai.error.${uG}`,uJ=Symbol.for(uW),uQ=class extends ek{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:uG,message:r}),this[Z]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ek.hasMarker(e,uW)}};Z=uJ;var uY="AI_ToolCallRepairError",uH=`vercel.ai.error.${uY}`,uX=Symbol.for(uH),u0=class extends ek{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${eC(e)}`}){super({name:uY,message:r,cause:e}),this[B]=!0,this.originalError=t}static isInstance(e){return ek.hasMarker(e,uH)}};B=uX;var u1=class extends ek{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},u2=(Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),"AI_InvalidMessageRoleError"),u4=`vercel.ai.error.${u2}`,u5=Symbol.for(u4),u9=class extends ek{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:u2,message:t}),this[U]=!0,this.role=e}static isInstance(e){return ek.hasMarker(e,u4)}};U=u5,Symbol.for("vercel.ai.error.AI_MessageConversionError");var u6="AI_DownloadError",u3=`vercel.ai.error.${u6}`,u8=Symbol.for(u3),u7=class extends ek{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:u6,message:a,cause:n}),this[q]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return ek.hasMarker(e,u3)}};q=u8;var ce="AI_RetryError",ct=`vercel.ai.error.${ce}`,cr=Symbol.for(ct),cn=class extends ek{constructor({message:e,reason:t,errors:r}){super({name:ce,message:e}),this[K]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return ek.hasMarker(e,ct)}};function ca(e){var t;if("string"!=typeof e){if("v2"!==e.specificationVersion)throw new u1({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return(null!=(t=globalThis.AI_SDK_DEFAULT_PROVIDER)?t:lU).languageModel(e)}K=cr;var ci=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],co="5.0.81",cs=async({url:e})=>{var t;let r=e.toString();try{let e=await fetch(r,{headers:ss({},`ai-sdk/${co}`,so())});if(!e.ok)throw new u7({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(u7.isInstance(e))throw e;throw new u7({url:r,cause:e})}},cl=iS([aJ(),iY(Uint8Array),iY(ArrayBuffer),iQ(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function cu(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if("string"==typeof e)try{e=new URL(e)}catch(e){}if(e instanceof URL&&"data:"===e.protocol){let{mediaType:t,base64Content:r}=function(e){try{let[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mediaType:void 0,base64Content:void 0}}}(e.toString());if(null==t||null==r)throw new ek({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}async function cc({prompt:e,supportedUrls:t,download:r=((e=cs)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t))))()}){let n=await cd(e.messages,r,t);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function({message:e,downloadedAssets:t}){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"user",content:e.content.map(e=>(function(e,t){var r;let n;if("text"===e.type)return{type:"text",text:e.text,providerOptions:e.providerOptions};let a=e.type;switch(a){case"image":n=e.image;break;case"file":n=e.data;break;default:throw Error(`Unsupported part type: ${a}`)}let{data:i,mediaType:o}=cu(n),s=null!=o?o:e.mediaType,l=i;if(l instanceof URL){let e=t[l.toString()];e&&(l=e.data,null!=s||(s=e.mediaType))}switch(a){case"image":return(l instanceof Uint8Array||"string"==typeof l)&&(s=null!=(r=function({data:e,signatures:t}){let r="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?(e=>{let t="string"==typeof e?sX(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)})(e):e,n="string"==typeof r?sX(r.substring(0,Math.min(r.length,24))):r;for(let e of t)if(n.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>null===e||n[t]===e))return e.mediaType}({data:l,signatures:ci}))?r:s),{type:"file",mediaType:null!=s?s:"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":if(null==s)throw Error("Media type is missing for file part");return{type:"file",mediaType:s,filename:e.filename,data:l,providerOptions:e.providerOptions}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerOptions:e.providerOptions};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text||null!=e.providerOptions).map(e=>{let t=e.providerOptions;switch(e.type){case"file":{let{data:r,mediaType:n}=cu(e.data);return{type:"file",data:r,filename:e.filename,mediaType:null!=n?n:e.mediaType,providerOptions:t}}case"reasoning":return{type:"reasoning",text:e.text,providerOptions:t};case"text":return{type:"text",text:e.text,providerOptions:t};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:t}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:e.providerOptions})),providerOptions:e.providerOptions};default:throw new u9({role:r})}})({message:e,downloadedAssets:n}))]}async function cd(e,t,r){let n=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>{var t;let r=null!=(t=e.mediaType)?t:"image"===e.type?"image/*":void 0,n="image"===e.type?e.image:e.data;if("string"==typeof n)try{n=new URL(n)}catch(e){}return{mediaType:r,data:n}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:null!=e.mediaType&&function({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([e,t])=>{let r=e.toLowerCase();return"*"===r||"*/*"===r?{mediaTypePrefix:"",regexes:t}:{mediaTypePrefix:r.replace(/\*/,""),regexes:t}}).filter(({mediaTypePrefix:t})=>e.startsWith(t)).flatMap(({regexes:e})=>e).some(e=>e.test(t))}({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:r})}));return Object.fromEntries((await t(n)).map((e,t)=>null==e?null:[n[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>null!=e))}function cp({maxOutputTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:i,seed:o,stopSequences:s}){if(null!=e){if(!Number.isInteger(e))throw new uD({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new uD({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new uD({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new uD({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new uD({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new uD({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=i&&"number"!=typeof i)throw new uD({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new uD({parameter:"seed",value:o,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}}var cf=new iW({type:"lazy",getter:()=>iS([new ih({type:"null",...tA(void 0)}),aJ(),il(),ip(),ij(aJ(),cf),ix(cf)])}),ch=ij(aJ(),ij(aJ(),cf)),cm=iE({type:iz("text"),text:aJ(),providerOptions:ch.optional()}),cy=iE({type:iz("image"),image:iS([cl,iY(URL)]),mediaType:aJ().optional(),providerOptions:ch.optional()}),cg=iE({type:iz("file"),data:iS([cl,iY(URL)]),filename:aJ().optional(),mediaType:aJ(),providerOptions:ch.optional()}),cv=iE({type:iz("reasoning"),text:aJ(),providerOptions:ch.optional()}),cb=iE({type:iz("tool-call"),toolCallId:aJ(),toolName:aJ(),input:iv(),providerOptions:ch.optional(),providerExecuted:ip().optional()}),cw=new iO({type:"union",options:[iE({type:iz("text"),value:aJ()}),iE({type:iz("json"),value:cf}),iE({type:iz("error-text"),value:aJ()}),iE({type:iz("error-json"),value:cf}),iE({type:iz("content"),value:ix(iS([iE({type:iz("text"),text:aJ()}),iE({type:iz("media"),data:aJ(),mediaType:aJ()})]))})],discriminator:"type",...tA(void 0)}),c_=iE({type:iz("tool-result"),toolCallId:aJ(),toolName:aJ(),output:cw,providerOptions:ch.optional()}),cx=iE({role:iz("system"),content:aJ(),providerOptions:ch.optional()}),ck=iE({role:iz("user"),content:iS([aJ(),ix(iS([cm,cy,cg]))]),providerOptions:ch.optional()}),cE=iE({role:iz("assistant"),content:iS([aJ(),ix(iS([cm,cg,cv,cb,c_]))]),providerOptions:ch.optional()}),cI=iS([cx,ck,cE,iE({role:iz("tool"),content:ix(c_),providerOptions:ch.optional()})]);async function cT(e){let t;if(null==e.prompt&&null==e.messages)throw new eL({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new eL({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new eL({prompt:e,message:"system must be a string"});if(null!=e.prompt&&"string"==typeof e.prompt)t=[{role:"user",content:e.prompt}];else if(null!=e.prompt&&Array.isArray(e.prompt))t=e.prompt;else if(null!=e.messages)t=e.messages;else throw new eL({prompt:e,message:"prompt or messages must be defined"});if(0===t.length)throw new eL({prompt:e,message:"messages must not be empty"});let r=await sv({value:t,schema:ix(cI)});if(!r.success)throw new eL({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:r.error});return{messages:t,system:e.system}}function cS({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var cO={startSpan:()=>cA,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(cA):"function"==typeof r?r(cA):"function"==typeof n?n(cA):void 0},cA={spanContext:()=>cN,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},cN={traceId:"",spanId:"",traceFlags:0};function cj({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{cC(e,t)}finally{e.end()}throw t}})}function cC(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:M.ERROR,message:t.message})):e.setStatus({code:M.ERROR})}function cR({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,n])=>{if(null==n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return null==a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return null==a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}function cP(e,t){return null==e&&null==t?void 0:(null!=e?e:0)+(null!=t?t:0)}async function cz(e,{maxRetries:t,delayInMs:r,backoffFactor:n,abortSignal:a},i=[]){try{return await e()}catch(u){if(sn(u)||0===t)throw u;let o=sr(u),s=[...i,u],l=s.length;if(l>t)throw new cn({message:`Failed after ${l} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(u instanceof Error&&eS.isInstance(u)&&!0===u.isRetryable&&l<=t)return await o3(function({error:e,exponentialBackoffDelay:t}){let r,n=e.responseHeaders;if(!n)return t;let a=n["retry-after-ms"];if(a){let e=parseFloat(a);Number.isNaN(e)||(r=e)}let i=n["retry-after"];if(i&&void 0===r){let e=parseFloat(i);r=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}return null!=r&&!Number.isNaN(r)&&0<=r&&(r<6e4||r<t)?r:t}({error:u,exponentialBackoffDelay:r}),{abortSignal:a}),cz(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n,abortSignal:a},s);if(1===l)throw u;throw new cn({message:`Failed after ${l} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function cM(e){let t=e.filter(e=>"text"===e.type);if(0!==t.length)return t.map(e=>e.text).join("")}var c$=class{constructor({data:e,mediaType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return null==this.base64Data&&(this.base64Data=s0(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=sX(this.base64Data)),this.uint8ArrayData}};async function cD({toolCall:e,tools:t,repairToolCall:r,system:n,messages:a}){try{if(null==t)throw new uQ({toolName:e.toolName});try{return await cF({toolCall:e,tools:t})}catch(o){if(null==r||!(uQ.isInstance(o)||uB.isInstance(o)))throw o;let i=null;try{i=await r({toolCall:e,tools:t,inputSchema:({toolName:e})=>{let{inputSchema:r}=t[e];return sQ(r).jsonSchema},system:n,messages:a,error:o})}catch(e){throw new u0({cause:e,originalError:o})}if(null==i)throw o;return await cF({toolCall:i,tools:t})}}catch(n){let t=await sw({text:e.input}),r=t.success?t.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:n}}}async function cF({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(null==n)throw new uQ({toolName:e.toolName,availableTools:Object.keys(t)});let a=sQ(n.inputSchema),i=""===e.input.trim()?await sv({value:{},schema:a}):await sw({text:e.input,schema:a});if(!1===i.success)throw new uB({toolName:r,toolInput:e.input,cause:i.error});return"dynamic"===n.type?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var cL=class{constructor({content:e,finishReason:t,usage:r,warnings:n,request:a,response:i,providerMetadata:o}){this.content=e,this.finishReason=t,this.usage=r,this.warnings=n,this.request=a,this.response=i,this.providerMetadata=o}get text(){return this.content.filter(e=>"text"===e.type).map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>"reasoning"===e.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>"file"===e.type).map(e=>e.file)}get sources(){return this.content.filter(e=>"source"===e.type)}get toolCalls(){return this.content.filter(e=>"tool-call"===e.type)}get staticToolCalls(){return this.toolCalls.filter(e=>!0!==e.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(e=>!0===e.dynamic)}get toolResults(){return this.content.filter(e=>"tool-result"===e.type)}get staticToolResults(){return this.toolResults.filter(e=>!0!==e.dynamic)}get dynamicToolResults(){return this.toolResults.filter(e=>!0===e.dynamic)}};async function cZ({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}function cB({output:e,tool:t,errorMode:r}){return"text"===r?{type:"error-text",value:eC(e)}:"json"===r?{type:"error-json",value:cU(e)}:(null==t?void 0:t.toModelOutput)?t.toModelOutput(e):"string"==typeof e?{type:"text",value:e}:{type:"json",value:cU(e)}}function cU(e){return void 0===e?null:e}var cq=se({prefix:"aitxt",size:24});async function cK({model:e,tools:t,toolChoice:r,system:n,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:l,stopWhen:u=function(e){return({steps:e})=>1===e.length}(0),experimental_output:c,experimental_telemetry:d,providerOptions:p,experimental_activeTools:f,activeTools:h=f,experimental_prepareStep:m,prepareStep:y=m,experimental_repairToolCall:g,experimental_download:v,experimental_context:b,_internal:{generateId:w=cq,currentDate:_=()=>new Date}={},onStepFinish:x,...k}){let E=ca(e),I=void 0===u?[]:Array.isArray(u)?u:[u],{maxRetries:T,retry:S}=function({maxRetries:e,abortSignal:t}){if(null!=e){if(!Number.isInteger(e))throw new uD({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new uD({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let r=null!=e?e:2;return{maxRetries:r,retry:(({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:n}={})=>async a=>cz(a,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:n}))({maxRetries:r,abortSignal:t})}}({maxRetries:o,abortSignal:s}),O=cp(k),A=ss(null!=l?l:{},`ai/${co}`),N=function({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:E,telemetry:d,headers:A,settings:{...O,maxRetries:T}}),j=await cT({system:n,prompt:a,messages:i}),C=function({isEnabled:e=!1,tracer:t}={}){return e?t||uS.getTracer("ai"):cO}(d);try{return await cj({name:"ai.generateText",attributes:cR({telemetry:d,attributes:{...cS({operationId:"ai.generateText",telemetry:d}),...N,"ai.model.provider":E.provider,"ai.model.id":E.modelId,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:a,messages:i})}}}),tracer:C,fn:async e=>{var a,i,o,l,u,f,m;let T,O,R=cp(k),P=[],z=[],M=[],$=[];do{let e=[...j.messages,...M],I=await (null==y?void 0:y({model:E,steps:$,stepNumber:$.length,messages:e})),O=ca(null!=(a=null==I?void 0:I.model)?a:E),D=await cc({prompt:{system:null!=(i=null==I?void 0:I.system)?i:j.system,messages:null!=(o=null==I?void 0:I.messages)?o:e},supportedUrls:await O.supportedUrls,download:v}),{toolChoice:F,tools:L}=function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"dynamic":case"function":return{type:"function",name:e,description:t.description,inputSchema:sQ(t.inputSchema).jsonSchema,providerOptions:t.providerOptions};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:null!=(l=null==I?void 0:I.toolChoice)?l:r,activeTools:null!=(u=null==I?void 0:I.activeTools)?u:h});T=await S(()=>{var e;return cj({name:"ai.generateText.doGenerate",attributes:cR({telemetry:d,attributes:{...cS({operationId:"ai.generateText.doGenerate",telemetry:d}),...N,"ai.model.provider":O.provider,"ai.model.id":O.modelId,"ai.prompt.messages":{input:()=>JSON.stringify(D.map(e=>({...e,content:"string"==typeof e.content?e.content:e.content.map(e=>{var t;return"file"===e.type?{...e,data:e.data instanceof Uint8Array?"string"==typeof(t=e.data)?t:t instanceof ArrayBuffer?s0(new Uint8Array(t)):s0(t):e.data}:e})})))},"ai.prompt.tools":{input:()=>null==L?void 0:L.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>null!=F?JSON.stringify(F):void 0},"gen_ai.system":O.provider,"gen_ai.request.model":O.modelId,"gen_ai.request.frequency_penalty":k.frequencyPenalty,"gen_ai.request.max_tokens":k.maxOutputTokens,"gen_ai.request.presence_penalty":k.presencePenalty,"gen_ai.request.stop_sequences":k.stopSequences,"gen_ai.request.temperature":null!=(e=k.temperature)?e:void 0,"gen_ai.request.top_k":k.topK,"gen_ai.request.top_p":k.topP}}),tracer:C,fn:async e=>{var t,r,n,a,i,o,l,u;let f=await O.doGenerate({...R,tools:L,toolChoice:F,responseFormat:null==c?void 0:c.responseFormat,prompt:D,providerOptions:p,abortSignal:s,headers:A}),h={id:null!=(r=null==(t=f.response)?void 0:t.id)?r:w(),timestamp:null!=(a=null==(n=f.response)?void 0:n.timestamp)?a:_(),modelId:null!=(o=null==(i=f.response)?void 0:i.modelId)?o:O.modelId,headers:null==(l=f.response)?void 0:l.headers,body:null==(u=f.response)?void 0:u.body};return e.setAttributes(cR({telemetry:d,attributes:{"ai.response.finishReason":f.finishReason,"ai.response.text":{output:()=>cM(f.content)},"ai.response.toolCalls":{output:()=>{let e=cW(f.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.id":h.id,"ai.response.model":h.modelId,"ai.response.timestamp":h.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(f.providerMetadata),"ai.usage.promptTokens":f.usage.inputTokens,"ai.usage.completionTokens":f.usage.outputTokens,"gen_ai.response.finish_reasons":[f.finishReason],"gen_ai.response.id":h.id,"gen_ai.response.model":h.modelId,"gen_ai.usage.input_tokens":f.usage.inputTokens,"gen_ai.usage.output_tokens":f.usage.outputTokens}})),{...f,response:h}}})});let Z=await Promise.all(T.content.filter(e=>"tool-call"===e.type).map(r=>cD({toolCall:r,tools:t,repairToolCall:g,system:n,messages:e})));for(let r of Z){if(r.invalid)continue;let n=t[r.toolName];(null==n?void 0:n.onInputAvailable)!=null&&await n.onInputAvailable({input:r.input,toolCallId:r.toolCallId,messages:e,abortSignal:s,experimental_context:b})}let B=Z.filter(e=>e.invalid&&e.dynamic);for(let e of(z=[],B))z.push({type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,error:sr(e.error),dynamic:!0});P=Z.filter(e=>!e.providerExecuted),null!=t&&z.push(...await cV({toolCalls:P.filter(e=>!e.invalid),tools:t,tracer:C,telemetry:d,messages:e,abortSignal:s,experimental_context:b}));let U=function({content:e,toolCalls:t,toolOutputs:r}){return[...e.map(e=>{switch(e.type){case"text":case"reasoning":case"source":return e;case"file":return{type:"file",file:new c$(e)};case"tool-call":return t.find(t=>t.toolCallId===e.toolCallId);case"tool-result":{let r=t.find(t=>t.toolCallId===e.toolCallId);if(null==r)throw Error(`Tool call ${e.toolCallId} not found.`);if(e.isError)return{type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,error:e.result,providerExecuted:!0,dynamic:r.dynamic};return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,output:e.result,providerExecuted:!0,dynamic:r.dynamic}}}}),...r]}({content:T.content,toolCalls:Z,toolOutputs:z});M.push(...function({content:e,tools:t}){let r=[],n=e.filter(e=>"source"!==e.type).filter(e=>("tool-result"!==e.type||e.providerExecuted)&&("tool-error"!==e.type||e.providerExecuted)).filter(e=>"text"!==e.type||e.text.length>0).map(e=>{switch(e.type){case"text":return{type:"text",text:e.text,providerOptions:e.providerMetadata};case"reasoning":return{type:"reasoning",text:e.text,providerOptions:e.providerMetadata};case"file":return{type:"file",data:e.file.base64,mediaType:e.file.mediaType,providerOptions:e.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:e.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:cB({tool:null==t?void 0:t[e.toolName],output:e.output,errorMode:"none"}),providerExecuted:!0,providerOptions:e.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:cB({tool:null==t?void 0:t[e.toolName],output:e.error,errorMode:"json"}),providerOptions:e.providerMetadata}}});n.length>0&&r.push({role:"assistant",content:n});let a=e.filter(e=>"tool-result"===e.type||"tool-error"===e.type).filter(e=>!e.providerExecuted).map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:cB({tool:null==t?void 0:t[e.toolName],output:"tool-result"===e.type?e.output:e.error,errorMode:"tool-error"===e.type?"text":"none"})}));return a.length>0&&r.push({role:"tool",content:a}),r}({content:U,tools:t}));let q=new cL({content:U,finishReason:T.finishReason,usage:T.usage,warnings:T.warnings,providerMetadata:T.providerMetadata,request:null!=(f=T.request)?f:{},response:{...T.response,messages:structuredClone(M)}});uP(null!=(m=T.warnings)?m:[]),$.push(q),await (null==x?void 0:x(q))}while(P.length>0&&z.length===P.length&&!await cZ({stopConditions:I,steps:$}));e.setAttributes(cR({telemetry:d,attributes:{"ai.response.finishReason":T.finishReason,"ai.response.text":{output:()=>cM(T.content)},"ai.response.toolCalls":{output:()=>{let e=cW(T.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.providerMetadata":JSON.stringify(T.providerMetadata),"ai.usage.promptTokens":T.usage.inputTokens,"ai.usage.completionTokens":T.usage.outputTokens}}));let D=$[$.length-1];return"stop"===D.finishReason&&(O=await (null==c?void 0:c.parseOutput({text:D.text},{response:D.response,usage:D.usage,finishReason:D.finishReason}))),new cG({steps:$,resolvedOutput:O})}})}catch(e){throw lf.isInstance(e)||lk.isInstance(e)?new ek({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}}async function cV({toolCalls:e,tools:t,tracer:r,telemetry:n,messages:a,abortSignal:i,experimental_context:o}){return(await Promise.all(e.map(async({toolCallId:e,toolName:s,input:l})=>{let u=t[s];if((null==u?void 0:u.execute)!=null)return cj({name:"ai.toolCall",attributes:cR({telemetry:n,attributes:{...cS({operationId:"ai.toolCall",telemetry:n}),"ai.toolCall.name":s,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(l)}}}),tracer:r,fn:async t=>{try{let r;for await(let t of s2({execute:u.execute.bind(u),input:l,options:{toolCallId:e,messages:a,abortSignal:i,experimental_context:o}}))"final"===t.type&&(r=t.output);try{t.setAttributes(cR({telemetry:n,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return{type:"tool-result",toolCallId:e,toolName:s,input:l,output:r,dynamic:"dynamic"===u.type}}catch(r){return cC(t,r),{type:"tool-error",toolCallId:e,toolName:s,input:l,error:r,dynamic:"dynamic"===u.type}}}})}))).filter(e=>null!=e)}var cG=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>{var r;return r=t.usage,{inputTokens:cP(e.inputTokens,r.inputTokens),outputTokens:cP(e.outputTokens,r.outputTokens),totalTokens:cP(e.totalTokens,r.totalTokens),reasoningTokens:cP(e.reasoningTokens,r.reasoningTokens),cachedInputTokens:cP(e.cachedInputTokens,r.cachedInputTokens)}},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(null==this.resolvedOutput)throw new uC;return this.resolvedOutput}};function cW(e){let t=e.filter(e=>"tool-call"===e.type);if(0!==t.length)return t.map(e=>({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input}))}async function cJ(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await sw({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await sw({text:function(e){let t=["ROOT"],r=-1,n=null;function a(e,a,i){switch(e){case'"':r=a,t.pop(),t.push(i),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=a,n=a,t.pop(),t.push(i),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(i),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=a,t.pop(),t.push(i),t.push("INSIDE_NUMBER");break;case"{":r=a,t.pop(),t.push(i),t.push("INSIDE_OBJECT_START");break;case"[":r=a,t.pop(),t.push(i),t.push("INSIDE_ARRAY_START")}}function i(e,n){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=n,t.pop()}}function o(e,n){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=n,t.pop()}}for(let s=0;s<e.length;s++){let l=e[s];switch(t[t.length-1]){case"ROOT":a(l,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":a(l,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":i(l,s);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=s}break;case"INSIDE_ARRAY_START":"]"===l?(r=s,t.pop()):(r=s,a(l,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=s,t.pop();break;default:r=s}break;case"INSIDE_ARRAY_AFTER_COMMA":a(l,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=s;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&i(l,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&i(l,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let a=e.substring(n,s+1);"false".startsWith(a)||"true".startsWith(a)||"null".startsWith(a)?r=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?i(l,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s))}}}let s=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(n,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}TransformStream,sy(()=>sG(iS([iI({type:iz("text-start"),id:aJ(),providerMetadata:ch.optional()}),iI({type:iz("text-delta"),id:aJ(),delta:aJ(),providerMetadata:ch.optional()}),iI({type:iz("text-end"),id:aJ(),providerMetadata:ch.optional()}),iI({type:iz("error"),errorText:aJ()}),iI({type:iz("tool-input-start"),toolCallId:aJ(),toolName:aJ(),providerExecuted:ip().optional(),dynamic:ip().optional()}),iI({type:iz("tool-input-delta"),toolCallId:aJ(),inputTextDelta:aJ()}),iI({type:iz("tool-input-available"),toolCallId:aJ(),toolName:aJ(),input:iv(),providerExecuted:ip().optional(),providerMetadata:ch.optional(),dynamic:ip().optional()}),iI({type:iz("tool-input-error"),toolCallId:aJ(),toolName:aJ(),input:iv(),providerExecuted:ip().optional(),providerMetadata:ch.optional(),dynamic:ip().optional(),errorText:aJ()}),iI({type:iz("tool-output-available"),toolCallId:aJ(),output:iv(),providerExecuted:ip().optional(),dynamic:ip().optional(),preliminary:ip().optional()}),iI({type:iz("tool-output-error"),toolCallId:aJ(),errorText:aJ(),providerExecuted:ip().optional(),dynamic:ip().optional()}),iI({type:iz("reasoning-start"),id:aJ(),providerMetadata:ch.optional()}),iI({type:iz("reasoning-delta"),id:aJ(),delta:aJ(),providerMetadata:ch.optional()}),iI({type:iz("reasoning-end"),id:aJ(),providerMetadata:ch.optional()}),iI({type:iz("source-url"),sourceId:aJ(),url:aJ(),title:aJ().optional(),providerMetadata:ch.optional()}),iI({type:iz("source-document"),sourceId:aJ(),mediaType:aJ(),title:aJ(),filename:aJ().optional(),providerMetadata:ch.optional()}),iI({type:iz("file"),url:aJ(),mediaType:aJ(),providerMetadata:ch.optional()}),iI({type:iQ(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:aJ().optional(),data:iv(),transient:ip().optional()}),iI({type:iz("start-step")}),iI({type:iz("finish-step")}),iI({type:iz("start"),messageId:aJ().optional(),messageMetadata:iv().optional()}),iI({type:iz("finish"),messageMetadata:iv().optional()}),iI({type:iz("abort")}),iI({type:iz("message-metadata"),messageMetadata:iv()})]))),se({prefix:"aitxt",size:24}),se({prefix:"aiobj",size:24}),se({prefix:"aiobj",size:24}),((e,t)=>{for(var r in t)uO(e,r,{get:t[r],enumerable:!0})})({},{object:()=>cY,text:()=>cQ});var cQ=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:e})=>({partial:e}),parseOutput:async({text:e})=>e}),cY=({schema:e})=>{let t=sQ(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:e}){let t=await cJ(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},r){let n=await sw({text:e});if(!n.success)throw new uV({message:"No object generated: could not parse the response.",cause:n.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let a=await sv({value:n.value,schema:t});if(!a.success)throw new uV({message:"No object generated: response did not match schema.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return a.value}}};async function cH(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let{text:t}=await cK({model:lo("openai/gpt-oss-20b"),temperature:.3,system:"你是一个专业的日语文本处理助手，专门为日语学习材料添加罗马音和中文翻译。请严格按照JSON格式返回结果。",prompt:'请对以下日语文本进行处理，为每段文本添加：\n1. 罗马音注音 (romaji)\n2. 中文翻译\n\n请以JSON格式返回，格式如下：\n{\n  "segments": [\n    {\n      "text": "原始日语文本",\n      "romaji": "罗马音注音",\n      "chineseTranslation": "中文翻译",\n      "start": 0,\n      "end": 2.5\n    }\n  ]\n}\n\n文本内容：\n'.concat(e),maxRetries:1});if(!t)throw Error("未收到有效的响应内容");try{let r=JSON.parse(t);return{originalText:e,processedText:e,segments:r.segments||[]}}catch(e){throw console.error("解析响应内容失败:",e),Error("解析处理结果失败")}}catch(e){throw console.error("文本后处理失败:",e),Error("文本处理失败: ".concat(e instanceof Error?e.message:"未知错误"))}}Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),sy(()=>sG(ix(iE({id:aJ(),role:iR(["system","user","assistant"]),metadata:iv().optional(),parts:ix(iS([iE({type:iz("text"),text:aJ(),state:iR(["streaming","done"]).optional(),providerMetadata:ch.optional()}),iE({type:iz("reasoning"),text:aJ(),state:iR(["streaming","done"]).optional(),providerMetadata:ch.optional()}),iE({type:iz("source-url"),sourceId:aJ(),url:aJ(),title:aJ().optional(),providerMetadata:ch.optional()}),iE({type:iz("source-document"),sourceId:aJ(),mediaType:aJ(),title:aJ(),filename:aJ().optional(),providerMetadata:ch.optional()}),iE({type:iz("file"),mediaType:aJ(),filename:aJ().optional(),url:aJ(),providerMetadata:ch.optional()}),iE({type:iz("step-start")}),iE({type:aJ().startsWith("data-"),id:aJ().optional(),data:iv()}),iE({type:iz("dynamic-tool"),toolName:aJ(),toolCallId:aJ(),state:iz("input-streaming"),input:iv().optional(),output:iw().optional(),errorText:iw().optional()}),iE({type:iz("dynamic-tool"),toolName:aJ(),toolCallId:aJ(),state:iz("input-available"),input:iv(),output:iw().optional(),errorText:iw().optional(),callProviderMetadata:ch.optional()}),iE({type:iz("dynamic-tool"),toolName:aJ(),toolCallId:aJ(),state:iz("output-available"),input:iv(),output:iv(),errorText:iw().optional(),callProviderMetadata:ch.optional(),preliminary:ip().optional()}),iE({type:iz("dynamic-tool"),toolName:aJ(),toolCallId:aJ(),state:iz("output-error"),input:iv(),output:iw().optional(),errorText:aJ(),callProviderMetadata:ch.optional()}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("input-streaming"),providerExecuted:ip().optional(),input:iv().optional(),output:iw().optional(),errorText:iw().optional(),approval:iw().optional()}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("input-available"),providerExecuted:ip().optional(),input:iv(),output:iw().optional(),errorText:iw().optional(),callProviderMetadata:ch.optional(),approval:iw().optional()}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("approval-requested"),input:iv(),providerExecuted:ip().optional(),output:iw().optional(),errorText:iw().optional(),callProviderMetadata:ch.optional(),approval:iE({id:aJ(),approved:iw().optional(),reason:iw().optional()})}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("approval-responded"),input:iv(),providerExecuted:ip().optional(),output:iw().optional(),errorText:iw().optional(),callProviderMetadata:ch.optional(),approval:iE({id:aJ(),approved:ip(),reason:aJ().optional()})}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("output-available"),providerExecuted:ip().optional(),input:iv(),output:iv(),errorText:iw().optional(),callProviderMetadata:ch.optional(),preliminary:ip().optional(),approval:iE({id:aJ(),approved:iz(!0),reason:aJ().optional()}).optional()}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("output-error"),providerExecuted:ip().optional(),input:iv(),output:iw().optional(),errorText:aJ(),callProviderMetadata:ch.optional(),approval:iE({id:aJ(),approved:iz(!0),reason:aJ().optional()}).optional()}),iE({type:aJ().startsWith("tool-"),toolCallId:aJ(),state:iz("output-denied"),providerExecuted:ip().optional(),input:iv(),output:iw().optional(),errorText:iw().optional(),callProviderMetadata:ch.optional(),approval:iE({id:aJ(),approved:iz(!1),reason:aJ().optional()})})]))}))));var cX=r(6337);let c0=new WeakMap,c1={all:["player"],file:e=>[...c1.all,"file",e]};function c2(e){var t,r,n,a,i,o;let[s,l]=(0,H.useState)(0),[u,c]=(0,H.useState)(!1),d=(0,ev.jE)(),p=parseInt(e,10),f=!Number.isNaN(p),h=(0,eg.I)({queryKey:c1.file(p),queryFn:async()=>{let e=await cX.db.files.get(p);if(!e)throw Error("文件不存在");let t=null;return e.blob&&(t=function(e){if(c0.has(e))return c0.get(e);let t=URL.createObjectURL(e);return c0.set(e,t),setTimeout(()=>{URL.revokeObjectURL(t),c0.delete(e)},3e5),t}(e.blob)),{file:e,audioUrl:t}},staleTime:6e5,gcTime:18e5}),m=(null==(t=h.data)?void 0:t.file)||null,y=(null==(r=h.data)?void 0:r.audioUrl)||null,g=(0,eb.qH)(p),v=(null==(n=g.data)?void 0:n.transcript)||null,b=(null==(a=g.data)?void 0:a.segments)||[],w=(0,eb.Gq)(),_=h.isLoading||g.isLoading,x=(null==(i=h.error)?void 0:i.message)||(null==(o=g.error)?void 0:o.message)||null,k=w.isPending,E=(0,H.useMemo)(()=>(w.isPending,f&&!_&&m&&!v&&!w.isPending),[f,_,m,v,w.isPending]);(0,H.useEffect)(()=>()=>{console.log("\uD83E\uDDF9 清理音频URL缓存")},[]);let I=(0,H.useCallback)(async()=>{if(!E)return void console.log("❌ 转录条件不满足，跳过转录:",{hasFile:!!m,hasTranscript:!!v,isPending:w.isPending,isLoading:_,isValidId:f});l(0);try{await w.mutateAsync({fileId:m.id,language:"ja"}),l(100),await d.invalidateQueries({queryKey:eb.tx.forFile(p)});let e=(await d.fetchQuery({queryKey:eb.tx.forFile(p),queryFn:async()=>{let e=await cX.db.transcripts.where("fileId").equals(p).toArray(),t=e.length>0?e[0]:null;if(t&&"number"==typeof t.id){let e=await cX.db.segments.where("transcriptId").equals(t.id).toArray();return{transcript:t,segments:e}}return{transcript:null,segments:[]}}})).transcript;if(console.log("\uD83D\uDCDD 转录数据获取完成:",{transcriptId:null==e?void 0:e.id,segmentsCount:b.length,hasText:!!(null==e?void 0:e.text)}),b.length>0&&e){console.log("\uD83D\uDD24 开始文本后处理");let t=b.map(e=>e.text).join("\n");try{console.log("\uD83D\uDCE1 发送文本后处理请求");let r=await cH(t,{language:"ja"});console.log("✅ 文本后处理完成:",{processedCount:r.segments.length,hasTranslation:r.segments.some(e=>"translation"in e&&!!e.translation)});for(let t=0;t<b.length&&t<r.segments.length;t++){let n=b[t],a=r.segments[t];e.id&&await cX.db.segments.where("[transcriptId+start]").equals([e.id,n.start]).modify(e=>{e.romaji=null==a?void 0:a.romaji,e.translation=null==a?void 0:a.translation})}console.log("\uD83D\uDD04 刷新查询缓存，更新UI"),d.invalidateQueries({queryKey:eb.tx.forFile(p)}),console.log("\uD83C\uDF89 转录和后处理流程全部完成")}catch(e){console.error("文本后处理失败:",e)}}else console.log("⚠️ 没有segments数据，跳过后处理")}catch(e){console.error("转录失败:",e),l(0),console.log("\uD83D\uDCA1 转录失败，可通过 resetAutoTranscription() 重新触发")}},[E,m,w,b,d,p]),T=(0,H.useCallback)(()=>{console.log("\uD83D\uDD04 重置自动转录状态"),c(!0),l(0)},[]);return(0,H.useEffect)(()=>{if(u&&E){console.log("\uD83C\uDFB5 检测到文件未转录，开始自动转录:",{fileId:m.id,fileName:m.name,condition:"shouldAutoTranscribe + shouldStartTranscription"}),c(!1);let e=setTimeout(()=>{console.log("⏰ 延迟结束，开始执行转录"),I()},500);return()=>{console.log("\uD83E\uDDF9 清理转录定时器"),clearTimeout(e)}}},[u,E,I]),(0,H.useEffect)(()=>{E?(console.log("\uD83C\uDFAF 检测条件满足，准备触发自动转录"),c(!0)):console.log("❌ 检测条件不满足，不触发自动转录")},[E]),(0,H.useEffect)(()=>{if(k){l(10);let e=setInterval(()=>{l(t=>t>=90?(clearInterval(e),t):t+10)},500);return()=>clearInterval(e)}if((null==v?void 0:v.status)==="completed"){l(100);let e=setTimeout(()=>l(0),1e3);return()=>clearTimeout(e)}},[k,null==v?void 0:v.status]),{file:m,segments:b,transcript:v,audioUrl:y,loading:_,error:x,isTranscribing:k,transcriptionProgress:s,retry:(0,H.useCallback)(()=>{h.refetch(),g.refetch()},[h,g]),startTranscription:I,resetAutoTranscription:T}}var c4=r(5448),c5=r(8299);function c9(e){let{fileId:t}=e,r=(0,W.useRouter)(),{file:n,segments:a,transcript:i,audioUrl:o,loading:s,error:l,retry:u,isTranscribing:c,transcriptionProgress:d,startTranscription:p}=c2(t),{audioPlayerState:f,handleSeek:h,onPlay:m,onPause:y,clearAudio:g,setCurrentFile:v,updatePlayerState:b,playbackRate:w,setPlaybackRate:_,onSkipBack:x,onSkipForward:k,loopStart:E,loopEnd:I,onClearLoop:T}=(0,c4.R)(),S=(0,H.useRef)(null),[O,A]=(0,H.useState)(1),N=(0,H.useId)(),j=(0,H.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!Number.isFinite(e)||Number.isNaN(e)?t:e},[]);(0,H.useEffect)(()=>{n&&o&&v(n)},[n,o,v]),(0,H.useEffect)(()=>{var e;let t=S.current;t&&o&&(t.pause(),t.currentTime=0,t.load(),b({isPlaying:!1,currentTime:0,duration:j(null!=(e=null==n?void 0:n.duration)?e:0,0)}))},[o,null==n?void 0:n.duration,b,j]),(0,H.useEffect)(()=>{S.current&&(f.isPlaying?S.current.play().catch(()=>{b({isPlaying:!1})}):S.current.pause())},[f.isPlaying,b]),(0,H.useEffect)(()=>{S.current&&(S.current.playbackRate=w)},[w]),(0,H.useEffect)(()=>{S.current&&Math.abs(S.current.currentTime-f.currentTime)>.1&&(S.current.currentTime=f.currentTime)},[f.currentTime]),(0,H.useEffect)(()=>{let e=S.current;if(!e)return;let t=()=>{b({currentTime:j(e.currentTime,0)})},r=()=>{var t;let r=null!=(t=null==n?void 0:n.duration)?t:0;b({duration:j(e.duration,r)})},a=()=>{var t;let r=null!=(t=null==n?void 0:n.duration)?t:0;b({duration:j(e.duration,r)})},i=()=>{b({isPlaying:!1,currentTime:j(e.duration,f.duration)}),T()},o=()=>{b({isPlaying:!0})},s=()=>{b({isPlaying:!1})};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",r),e.addEventListener("durationchange",a),e.addEventListener("ended",i),e.addEventListener("play",o),e.addEventListener("pause",s),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",r),e.removeEventListener("durationchange",a),e.removeEventListener("ended",i),e.removeEventListener("play",o),e.removeEventListener("pause",s)}},[b,j,null==n?void 0:n.duration,f.duration,T]);let C=(0,H.useCallback)(()=>{g(),r.push("/")},[g,r]),R=(0,H.useCallback)(async()=>{f.isPlaying?y():i||c||!p?m():await p()},[f.isPlaying,y,m,i,c,p]),P=(0,H.useCallback)(e=>{A(e),S.current&&(S.current.volume=e)},[]),z=o?(0,G.jsx)(eu,{audioPlayerState:f,onSeek:h,onTogglePlay:R,onSkipBack:x,onSkipForward:k,onClearLoop:T,loopStart:E,loopEnd:I,playbackRate:w,onPlaybackRateChange:_,volume:O,onVolumeChange:P}):null;return s?(0,G.jsx)(ep,{subtitleContainerId:N,children:(0,G.jsx)(en,{})}):l?(0,c5.QL)(l)?(0,G.jsx)(ey,{onRetry:u}):(0,G.jsx)(ep,{subtitleContainerId:N,children:(0,G.jsx)(ea,{message:l,onRetry:u,onBack:C})}):n?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(ep,{subtitleContainerId:N,showFooter:!!z,footer:null!=z?z:void 0,children:[(0,G.jsx)(eh,{transcript:i,isTranscribing:c,transcriptionProgress:d}),a.length>0?(0,G.jsx)(em,{segments:a,currentTime:f.currentTime,isPlaying:f.isPlaying,onSegmentClick:e=>{h(e.start),f.isPlaying||m()}}):(null==i?void 0:i.status)==="completed"&&(0,G.jsx)("div",{className:"flex flex-col items-center gap-3 py-12 text-center text-sm text-[var(--secondary-text-color)] dark:text-[var(--text-color)]/70",children:(0,G.jsx)("p",{children:"暂无字幕内容"})}),!i&&(0,G.jsx)(eo,{onBack:C,onStartTranscription:p})]}),(0,G.jsx)("audio",{ref:S,src:null!=o?o:void 0,preload:"auto",className:"hidden",children:(0,G.jsx)("track",{kind:"captions"})})]}):(0,G.jsx)(ep,{subtitleContainerId:N,children:(0,G.jsx)(ei,{onBack:C})})}var c6=r(8823),c3=r(1569),c8=r(1002),c7=r(5736);function de(e){let{task:t,className:r,showMessage:n=!0,compact:a=!1}=e;if(!t)return(0,G.jsxs)("div",{className:(0,ef.cn)("flex items-center gap-2 text-gray-500",r),children:[(0,G.jsx)(c6.A,{className:"h-4 w-4"}),n&&(0,G.jsx)("span",{className:"text-sm",children:"等待转录"})]});let i=(()=>{switch(t.status){case"queued":return{icon:c6.A,color:"text-blue-500",message:"排队中...",showProgress:!1};case"processing":return{icon:et.A,color:"text-primary",message:t.progress.message||"转录中...",showProgress:!0,progress:t.progress.progress};case"completed":return{icon:c3.A,color:"text-green-500",message:"转录完成",showProgress:!1};case"failed":return{icon:c8.A,color:"text-red-500",message:t.progress.error||"转录失败",showProgress:!1};case"cancelled":return{icon:c6.A,color:"text-gray-500",message:"已取消",showProgress:!1};case"paused":return{icon:c6.A,color:"text-orange-500",message:"已暂停",showProgress:!1};default:return{icon:c6.A,color:"text-gray-500",message:"未知状态",showProgress:!1}}})(),o=i.icon;return a?(0,G.jsxs)("div",{className:(0,ef.cn)("flex items-center gap-1",r),children:[(0,G.jsx)(o,{className:(0,ef.cn)("h-3 w-3",i.color,"processing"===t.status&&"animate-spin")}),n&&(0,G.jsx)("span",{className:"text-xs text-gray-600",children:i.message})]}):(0,G.jsxs)("div",{className:(0,ef.cn)("flex flex-col gap-2",r),children:[(0,G.jsxs)("div",{className:"flex items-center gap-2",children:[(0,G.jsx)(o,{className:(0,ef.cn)("h-4 w-4",i.color,"processing"===t.status&&"animate-spin")}),n&&(0,G.jsx)("span",{className:(0,ef.cn)("text-sm",i.color),children:i.message})]}),i.showProgress&&(0,G.jsxs)("div",{className:"space-y-1",children:[(0,G.jsx)(c7.k,{value:i.progress,className:"h-1 w-full"}),(0,G.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,G.jsxs)("span",{children:[i.progress,"%"]}),(0,G.jsx)("span",{children:t.progress.estimatedDuration&&"预计 ".concat(Math.ceil(t.progress.estimatedDuration/60)," 分钟")})]})]}),!a&&(0,G.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,G.jsx)("div",{children:t.fileName}),t.fileSize&&(0,G.jsxs)("div",{children:[(t.fileSize/1024/1024).toFixed(1)," MB"]})]})]})}function dt(){let e=(0,W.useParams)().fileId,{file:t,audioUrl:r,transcript:n,segments:a,isTranscribing:i,transcriptionProgress:o,loading:s,error:l,startTranscription:u,resetAutoTranscription:c}=c2(e);return(0,G.jsxs)(ee,{children:[s&&(0,G.jsx)(en,{}),l&&(0,G.jsxs)("div",{className:"player-card flex min-h-[40vh] flex-col items-center justify-center gap-4 p-6 text-center",children:[(0,G.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-full p-3 mb-4",children:(0,G.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"!"})}),(0,G.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"加载失败"}),(0,G.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 max-w-md",children:l}),(0,G.jsxs)("div",{className:"flex flex-wrap gap-3 mt-6",children:[(0,G.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm transition-colors",children:"返回"}),(0,G.jsx)("button",{type:"button",onClick:()=>l&&!n?c():u(),className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-md text-sm transition-colors",children:l&&!n?"重试转录":"开始转录"})]})]}),!t&&!s&&!l&&(0,G.jsxs)("div",{className:"player-card flex min-h-[40vh] flex-col items-center justify-center gap-4 p-6 text-center",children:[(0,G.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full p-3 mb-4",children:(0,G.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"?"})}),(0,G.jsx)("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400",children:"文件不存在"}),(0,G.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-md",children:"找不到指定的音频文件。请检查文件是否已被删除。"}),(0,G.jsx)("div",{className:"mt-6",children:(0,G.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-md text-sm transition-colors",children:"返回主页"})})]}),t&&!n&&!s&&!l&&(0,G.jsxs)("div",{className:"player-card flex min-h-[40vh] flex-col items-center justify-center gap-4 p-6 text-center",children:[(0,G.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-full p-3 mb-4",children:(0,G.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"\uD83C\uDFB5"})}),(0,G.jsx)("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 mb-2",children:"准备转录"}),(0,G.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400 max-w-md mb-6",children:"此文件尚未转录，将自动开始转录处理。转录完成后，您就可以播放带字幕的音频。"}),(0,G.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[(0,G.jsx)("button",{type:"button",onClick:()=>u(),className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm transition-colors flex items-center justify-center",children:i?"转录中...":"开始转录"}),(0,G.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md text-sm transition-colors",children:"稍后处理"})]}),i&&(0,G.jsx)("div",{className:"mt-4 w-full max-w-xs",children:(0,G.jsx)(de,{task:{id:"task-".concat(e),fileId:parseInt(e,10),fileName:(null==t?void 0:t.name)||"",fileSize:(null==t?void 0:t.size)||0,status:"processing",priority:"normal",progress:{fileId:parseInt(e,10),status:"processing",progress:o,message:"转录中...",createdAt:new Date,options:{}}},showMessage:!0,compact:!1})})]}),t&&r&&n&&a&&(0,G.jsx)(c9,{fileId:e})]})}},4356:(e,t,r)=>{"use strict";r.d(t,{tx:()=>p,Gq:()=>m,qH:()=>f});var n=r(3491),a=r(3670),i=r(488),o=r(3845),s=r(7190),l=r(5151),u=r(2047),c=class extends l.Q{#n;#l=void 0;#C;#R;constructor(e,t){super(),this.#n=e,this.setOptions(t),this.bindMethods(),this.#P()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#n.defaultMutationOptions(e),(0,u.f8)(this.options,t)||this.#n.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#C,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,u.EN)(t.mutationKey)!==(0,u.EN)(this.options.mutationKey)?this.reset():this.#C?.state.status==="pending"&&this.#C.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#C?.removeObserver(this)}onMutationUpdate(e){this.#P(),this.#T(e)}getCurrentResult(){return this.#l}reset(){this.#C?.removeObserver(this),this.#C=void 0,this.#P(),this.#T()}mutate(e,t){return this.#R=t,this.#C?.removeObserver(this),this.#C=this.#n.getMutationCache().build(this.#n,this.options),this.#C.addObserver(this),this.#C.execute(e)}#P(){let e=this.#C?.state??(0,o.$)();this.#l={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#T(e){s.jG.batch(()=>{if(this.#R&&this.hasListeners()){let t=this.#l.variables,r=this.#l.context,n={client:this.#n,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#R.onSuccess?.(e.data,t,r,n),this.#R.onSettled?.(e.data,null,t,r,n)):e?.type==="error"&&(this.#R.onError?.(e.error,t,r,n),this.#R.onSettled?.(void 0,e.error,t,r,n))}this.listeners.forEach(e=>{e(this.#l)})})}},d=r(6337);let p={all:["transcription"],forFile:e=>[...p.all,"file",e],progress:e=>[...p.forFile(e),"progress"]};function f(e){return(0,n.I)({queryKey:p.forFile(e),queryFn:async()=>{let t=await d.db.transcripts.where("fileId").equals(e).toArray(),r=t.length>0?t[0]:null;if(r&&"number"==typeof r.id){let e=await d.db.segments.where("transcriptId").equals(r.id).toArray();return{transcript:r,segments:e}}return{transcript:null,segments:[]}},staleTime:3e5,gcTime:6e5})}async function h(e,t){let r=await d.db.transcripts.add({fileId:e,status:"completed",rawText:t.text,language:t.language,processingTime:0,createdAt:new Date,updatedAt:new Date});if(t.segments&&t.segments.length>0){let e=t.segments.map(e=>({transcriptId:r,start:e.start,end:e.end,text:e.text,wordTimestamps:e.wordTimestamps||[],createdAt:new Date,updatedAt:new Date}));await d.db.segments.bulkAdd(e)}}function m(){let e=(0,a.jE)();return function(e,t){let r=(0,a.jE)(void 0),[n]=i.useState(()=>new c(r,e));i.useEffect(()=>{n.setOptions(e)},[n,e]);let o=i.useSyncExternalStore(i.useCallback(e=>n.subscribe(s.jG.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=i.useCallback((e,t)=>{n.mutate(e,t).catch(u.lQ)},[n]);if(o.error&&(0,u.GU)(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}({mutationFn:async e=>{var t,r;let{fileId:n,language:a="ja"}=e,i=await d.db.files.get(n);if(!i||!i.blob)throw Error("文件不存在或文件数据已损坏");let o=new FormData;o.append("audio",i.blob,i.name),o.append("meta",JSON.stringify({fileId:(null==(t=i.id)?void 0:t.toString())||""}));try{console.log("\uD83D\uDCE1 发送转录请求:",{url:"/api/transcribe?fileId=".concat(n,"&language=").concat(a),method:"POST",formDataKeys:Array.from(o.keys()),fileName:i.name,fileSize:i.size});let e=await fetch("/api/transcribe?fileId=".concat(n,"&language=").concat(a),{method:"POST",body:o});if(console.log("\uD83D\uDCE1 API 响应状态:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}),!e.ok){let t=await e.json().catch(()=>({}));throw console.error("❌ API 错误响应:",t),Error(t.message||"转录失败: ".concat(e.statusText," (").concat(e.status,")"))}let t=await e.json();if(!t.success)throw Error((null==(r=t.data)?void 0:r.text)||"转录请求失败");return await h(n,t.data),t.data}catch(e){throw console.error("❌ 转录失败:",e),e}},onSuccess:(t,n)=>{e.invalidateQueries({queryKey:p.forFile(n.fileId)}),Promise.resolve().then(r.bind(r,544)).then(e=>{let{toast:t}=e;t.success("转录完成")})},onError:(t,n)=>{console.error("❌ 转录失败:",t),Promise.resolve().then(r.bind(r,544)).then(e=>{let{toast:r}=e;r.error("转录失败: ".concat(t instanceof Error?t.message:"未知错误"))}),e.invalidateQueries({queryKey:p.forFile(n.fileId)})}})}({...p,withMethod:(e,t)=>[...p.forFile(e),"method",t],wordTimestamps:e=>[...p.forFile(e),"word-timestamps"]})},4456:(e,t,r)=>{"use strict";r.d(t,{$:()=>u});var n=r(644),a=r(8019),i=r(9197),o=r(488),s=r(3439);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:r,variant:i,size:o,asChild:u=!1,...c}=e,d=u?a.DX:"button";return(0,n.jsx)(d,{className:(0,s.cn)(l({variant:i,size:o,className:r})),ref:t,...c})});u.displayName="Button"},4624:(e,t,r)=>{"use strict";r.d(t,{hO:()=>l,sG:()=>s});var n=r(488),a=r(6665),i=r(8019),o=r(644),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.TL)(`Primitive.${t}`),a=n.forwardRef((e,n)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(a?r:t,{...i,ref:n})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function l(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},5130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return i}});let n=r(5965),a=r(1852);function i(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},5151:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var n=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},5448:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var n=r(488);function a(){let[e,t]=(0,n.useState)({isPlaying:!1,currentTime:0,duration:0,volume:1,isMuted:!1}),[r,a]=(0,n.useState)(),[i,o]=(0,n.useState)(),[s,l]=(0,n.useState)(null),[u,c]=(0,n.useState)(1),d=(0,n.useCallback)(e=>!Number.isFinite(e)||Number.isNaN(e)?0:Math.max(0,e),[]),p=(0,n.useCallback)((e,t)=>!Number.isFinite(e)||Number.isNaN(e)||e<0?Math.max(0,t):e,[]),f=(0,n.useCallback)(e=>{t(t=>{let r=Number.isFinite(t.duration)&&t.duration>0?t.duration:void 0,n=d(e),a=void 0!==r?Math.min(n,r):n;return a===t.currentTime?t:{...t,currentTime:a}})},[d]);(0,n.useEffect)(()=>{void 0!==r&&void 0!==i&&e.isPlaying&&e.currentTime>=i&&f(r)},[e.currentTime,e.isPlaying,r,i,f]);let h=(0,n.useCallback)((e,t)=>{a(e),o(t)},[]),m=(0,n.useCallback)(e=>{t(t=>{let r={...t,...e},n=void 0!==e.duration?p(e.duration,t.duration):t.duration,a=void 0!==e.currentTime?d(e.currentTime):r.currentTime,i=Number.isFinite(n)&&n>0?n:void 0;return void 0!==i&&(a=Math.min(a,i)),{...r,duration:null!=i?i:0,currentTime:a}})},[p,d]),y=(0,n.useCallback)(()=>{l(null),a(void 0),o(void 0),t({isPlaying:!1,currentTime:0,duration:0,volume:1,isMuted:!1})},[]),g=(0,n.useCallback)(()=>{m({isPlaying:!0})},[m]),v=(0,n.useCallback)(()=>{m({isPlaying:!1})},[m]),b=(0,n.useCallback)(()=>{f(Math.max(0,e.currentTime-10))},[f,e.currentTime]),w=(0,n.useCallback)(()=>{f(Math.min(e.duration,e.currentTime+10))},[f,e.currentTime,e.duration]),_=(0,n.useCallback)((e,t)=>{h(e,t)},[h]),x=(0,n.useCallback)(()=>{h(void 0,void 0)},[h]);return{audioPlayerState:e,loopStart:r,loopEnd:i,currentFile:s,playbackRate:u,setPlaybackRate:(0,n.useCallback)(e=>{c(e)},[]),setCurrentFile:l,setLoopPoints:h,updatePlayerState:m,handleSeek:f,clearAudio:y,onPlay:g,onPause:v,onSkipBack:b,onSkipForward:w,onSetLoop:_,onClearLoop:x}}},5543:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,ThemeProvider:()=>s});var n=r(644),a=r(488);let i=(0,a.createContext)(void 0);function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}function s(e){let{children:t,defaultTheme:r="dark",storageKey:o="umuo-theme"}=e,[s,l]=(0,a.useState)(r),[u,c]=(0,a.useState)("dark"),[d,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{p(!0);try{let e=localStorage.getItem(o);e&&["dark","light","system","high-contrast"].includes(e)&&l(e)}catch(e){console.warn("Failed to read theme from localStorage:",e)}},[o]),(0,a.useEffect)(()=>{let e,t;if(!d)return;let r=window.document.documentElement;r.classList.remove("light","dark"),r.removeAttribute("data-theme"),"system"===s?(t=e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",r.classList.add(e)):"high-contrast"===s?(e="dark",t="high-contrast"):(e=s,t=s,r.classList.add(e)),r.setAttribute("data-theme",t),c(e)},[s,d]),(0,a.useEffect)(()=>{if("system"!==s||!d)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{let t=e.matches?"dark":"light",r=window.document.documentElement;r.classList.remove("light","dark"),r.setAttribute("data-theme",t),r.classList.add(t),c(t)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[s,d]);let f=e=>{try{localStorage.setItem(o,e),l(e)}catch(t){console.warn("Failed to save theme to localStorage:",t),l(e)}};return(0,n.jsx)(i.Provider,{value:{theme:s,setTheme:f,resolvedTheme:u,toggleTheme:()=>{f((()=>{switch(s){case"dark":return"light";case"light":return"system";case"system":return"high-contrast";default:return"dark"}})())}},children:t})}},5585:(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}r.d(t,{T:()=>n})},5605:(e,t,r)=>{"use strict";var n=r(2190);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5615:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(8292),a=r(2047),i=class{#z;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,a.gn)(this.gcTime)&&(this.#z=n.zs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(a.S$?1/0:3e5))}clearGcTimeout(){this.#z&&(n.zs.clearTimeout(this.#z),this.#z=void 0)}}},5736:(e,t,r)=>{"use strict";r.d(t,{k:()=>_});var n=r(644),a=r(488),i=r(2009),o=r(4624),s="Progress",[l,u]=(0,i.A)(s),[c,d]=l(s),p=a.forwardRef((e,t)=>{var r,a,i,s;let{__scopeProgress:l,value:u=null,max:d,getValueLabel:p=m,...f}=e;(d||0===d)&&!v(d)&&console.error((r="".concat(d),a="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(a,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=v(d)?d:100;null===u||b(u,h)||console.error((i="".concat(u),s="Progress","Invalid prop `value` of value `".concat(i,"` supplied to `").concat(s,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let w=b(u,h)?u:null,_=g(w)?p(w,h):void 0;return(0,n.jsx)(c,{scope:l,value:w,max:h,children:(0,n.jsx)(o.sG.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":g(w)?w:void 0,"aria-valuetext":_,role:"progressbar","data-state":y(w,h),"data-value":null!=w?w:void 0,"data-max":h,...f,ref:t})})});p.displayName=s;var f="ProgressIndicator",h=a.forwardRef((e,t)=>{var r;let{__scopeProgress:a,...i}=e,s=d(f,a);return(0,n.jsx)(o.sG.div,{"data-state":y(s.value,s.max),"data-value":null!=(r=s.value)?r:void 0,"data-max":s.max,...i,ref:t})});function m(e,t){return"".concat(Math.round(e/t*100),"%")}function y(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function b(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=f;var w=r(3439);let _=a.forwardRef((e,t)=>{let{className:r,value:a,...i}=e;return(0,n.jsx)(p,{ref:t,className:(0,w.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...i,children:(0,n.jsx)(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});_.displayName=p.displayName},5789:(e,t,r)=>{"use strict";var n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{getContext:()=>l.getContext,getVercelOidcToken:()=>u,getVercelOidcTokenSync:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))o.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=a(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var l=r(8858);async function u(){return""}function c(){return""}},5965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return h},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return g},NormalizeError:function(){return m},PageNotFoundError:function(){return y},SP:function(){return p},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return o},getURL:function(){return s},isAbsoluteUrl:function(){return i},isResSent:function(){return u},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r||(r=!0,t=e(...a)),t}}let a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>a.test(e);function o(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function s(){let{href:e}=window.location,t=o();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Object.defineProperty(Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let p="undefined"!=typeof performance,f=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class h extends Error{}class m extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class g extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},5990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},6337:(e,t,r)=>{"use strict";r.d(t,{IJ:()=>_,db:()=>w});var n=r(1061);let a=Symbol.for("Dexie"),i=globalThis[a]||(globalThis[a]=n);if(n.semVer!==i.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${n.semVer} and ${i.semVer}`);let{liveQuery:o,mergeRanges:s,rangesOverlap:l,RangeSet:u,cmp:c,Entity:d,PropModification:p,replacePrefix:f,add:h,remove:m,DexieYProvider:y}=i,g=i;var v=r(8299);class b extends g{constructor(){super("umuo-app-db"),this.version(3).stores({files:"++id, name, size, type, uploadedAt, updatedAt, [name+type]",transcripts:"++id, fileId, status, language, createdAt, updatedAt",segments:"++id, transcriptId, start, end, text, [transcriptId+start], [transcriptId+end]"}),this.version(1).stores({files:"++id, name, size, type, uploadedAt, [name+type]",transcripts:"++id, fileId, status, language, createdAt, updatedAt",segments:"++id, transcriptId, start, end, text, [transcriptId+start], [transcriptId+end]"}).upgrade(e=>{console.log("Database version 1 initialized")}),this.version(2).stores({files:"++id, name, size, type, uploadedAt, [name+type]",transcripts:"++id, fileId, status, language, createdAt, updatedAt",segments:"++id, transcriptId, start, end, text, wordTimestamps, [transcriptId+start], [transcriptId+end]"}).upgrade(async e=>{console.log("Database migrated to version 2: Added wordTimestamps support")}),this.version(3).stores({files:"++id, name, size, type, uploadedAt, [name+type]",transcripts:"++id, fileId, status, language, createdAt, updatedAt",segments:"++id, transcriptId, start, end, text, wordTimestamps, normalizedText, translation, annotations, furigana, [transcriptId+start], [transcriptId+end]"}).upgrade(async e=>{console.log("Database migrated to version 3: Added enhanced transcription features")})}}let w=new b,_={async addFile(e){try{return await w.files.add(e)}catch(e){throw(0,v.H4)(e,"DBUtils.addFile")}},async getFile(e){try{return await w.files.get(e)}catch(e){throw(0,v.H4)(e,"DBUtils.getFile")}},async deleteFile(e){try{await w.transaction("rw",w.files,w.transcripts,w.segments,async()=>{for(let t of(await w.files.delete(e),await w.transcripts.where("fileId").equals(e).toArray()))t.id&&(await w.segments.where("transcriptId").equals(t.id).delete(),await w.transcripts.delete(t.id))})}catch(e){throw(0,v.H4)(e,"DBUtils.deleteFile")}},async getAllFiles(){try{return await w.files.orderBy("uploadedAt").reverse().toArray()}catch(e){throw(0,v.H4)(e,"DBUtils.getAllFiles")}},async addTranscript(e){try{return await w.transcripts.add(e)}catch(e){throw(0,v.H4)(e,"DBUtils.addTranscript")}},async updateTranscriptStatus(e,t){try{await w.transcripts.update(e,{status:t,updatedAt:new Date})}catch(e){throw(0,v.H4)(e,"DBUtils.updateTranscriptStatus")}},async addSegments(e,t){try{let r=e.map(e=>({...e,createdAt:new Date,updatedAt:new Date}));if(r.length<=50)return void await w.segments.bulkAdd(r);let n=(null==t?void 0:t.batchSize)||50;for(let e=0;e<r.length;e+=n){let a=r.slice(e,e+n);if(await w.segments.bulkAdd(a),null==t?void 0:t.onProgress){let n=Math.min(100,Math.floor((e+a.length)/r.length*100));t.onProgress({processed:e+a.length,total:r.length,percentage:n,status:"processing",message:"处理中 ".concat(e+a.length,"/").concat(r.length)})}}}catch(e){throw(0,v.H4)(e,"DBUtils.addSegments")}},async getSegmentsByTranscriptId(e){try{return await w.segments.where("transcriptId").equals(e).toArray()}catch(e){throw(0,v.H4)(e,"DBUtils.getSegmentsByTranscriptId")}},async clearAll(){try{await w.transaction("rw",w.files,w.transcripts,w.segments,async()=>{await w.segments.clear(),await w.transcripts.clear(),await w.files.clear()})}catch(e){throw(0,v.H4)(e,"DBUtils.clearAll")}}}},7020:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(488);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...p}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(s)/Number(a):s,className:i("lucide",u),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...u}=r;return(0,n.createElement)(s,{ref:o,iconNode:t,className:i("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...u})});return r.displayName=a(e),r}},7162:(e,t,r)=>{"use strict";r.d(t,{X:()=>s,k:()=>l});var n=r(2047),a=r(7190),i=r(7751),o=r(5615),s=class extends o.k{#M;#$;#D;#n;#N;#F;#L;constructor(e){super(),this.#L=!1,this.#F=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#D=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#M=u(this.options),this.state=e.state??this.#M,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#N?.promise}setOptions(e){if(this.options={...this.#F,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let e=u(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#M=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#D.remove(this)}setData(e,t){let r=(0,n.pl)(this.state.data,e,this.options);return this.#j({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#j({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#N?.promise;return this.#N?.cancel(e),t?t.then(n.lQ).catch(n.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#M)}isActive(){return this.observers.some(e=>!1!==(0,n.Eh)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,n.d2)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,n.j3)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#N?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#N?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#D.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#N&&(this.#L?this.#N.cancel({revert:!0}):this.#N.cancelRetry()),this.scheduleGc()),this.#D.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#j({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&this.#N?.status()!=="rejected"){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#N)return this.#N.continueRetry(),this.#N.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let r=new AbortController,a=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#L=!0,r.signal)})},o=()=>{let e=(0,n.ZM)(this.options,t),r=(()=>{let e={client:this.#n,queryKey:this.queryKey,meta:this.meta};return a(e),e})();return(this.#L=!1,this.options.persister)?this.options.persister(e,r,this):e(r)},s=(()=>{let e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:o};return a(e),e})();this.options.behavior?.onFetch(s,this),this.#$=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#j({type:"fetch",meta:s.fetchOptions?.meta}),this.#N=(0,i.II)({initialPromise:t?.initialPromise,fn:s.fetchFn,onCancel:e=>{e instanceof i.cc&&e.revert&&this.setState({...this.#$,fetchStatus:"idle"}),r.abort()},onFail:(e,t)=>{this.#j({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#j({type:"pause"})},onContinue:()=>{this.#j({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0});try{let e=await this.#N.start();if(void 0===e)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#D.config.onSuccess?.(e,this),this.#D.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof i.cc){if(e.silent)return this.#N.promise;else if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#j({type:"error",error:e}),this.#D.config.onError?.(e,this),this.#D.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#j(e){let t=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...l(t.data,this.options),fetchMeta:e.meta??null};case"success":let r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#$=e.manual?r:void 0,r;case"error":let n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=t(this.state),a.jG.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#D.notify({query:this,type:"updated",action:e})})}};function l(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,i.v_)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function u(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}},7190:(e,t,r)=>{"use strict";r.d(t,{jG:()=>a});var n=r(8292).Zq,a=function(){let e=[],t=0,r=e=>{e()},a=e=>{e()},i=n,o=n=>{t?e.push(n):i(()=>{r(n)})};return{batch:n=>{let o;t++;try{o=n()}finally{--t||(()=>{let t=e;e=[],t.length&&i(()=>{a(()=>{t.forEach(e=>{r(e)})})})})()}return o},batchCalls:e=>(...t)=>{o(()=>{e(...t)})},schedule:o,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{i=e}}}()},7431:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7020).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7751:(e,t,r)=>{"use strict";r.d(t,{II:()=>c,cc:()=>u,v_:()=>l});var n=r(3749),a=r(2692),i=r(5585),o=r(2047);function s(e){return Math.min(1e3*2**e,3e4)}function l(e){return(e??"online")!=="online"||a.t.isOnline()}var u=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function c(e){let t,r=!1,c=0,d=(0,i.T)(),p=()=>n.m.isFocused()&&("always"===e.networkMode||a.t.isOnline())&&e.canRun(),f=()=>l(e.networkMode)&&e.canRun(),h=e=>{"pending"===d.status&&(t?.(),d.resolve(e))},m=e=>{"pending"===d.status&&(t?.(),d.reject(e))},y=()=>new Promise(r=>{t=e=>{("pending"!==d.status||p())&&r(e)},e.onPause?.()}).then(()=>{t=void 0,"pending"===d.status&&e.onContinue?.()}),g=()=>{let t;if("pending"!==d.status)return;let n=0===c?e.initialPromise:void 0;try{t=n??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(h).catch(t=>{if("pending"!==d.status)return;let n=e.retry??3*!o.S$,a=e.retryDelay??s,i="function"==typeof a?a(c,t):a,l=!0===n||"number"==typeof n&&c<n||"function"==typeof n&&n(c,t);if(r||!l)return void m(t);c++,e.onFail?.(c,t),(0,o.yy)(i).then(()=>p()?void 0:y()).then(()=>{r?m(t):g()})})};return{promise:d,status:()=>d.status,cancel:t=>{if("pending"===d.status){let r=new u(t);m(r),e.onCancel?.(r)}},continue:()=>(t?.(),d),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:f,start:()=>(f()?g():y().then(g),d)}}},8019:(e,t,r)=>{"use strict";r.d(t,{DX:()=>s,TL:()=>o});var n=r(488),a=r(2603),i=r(644);function o(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...i}=e;if(n.isValidElement(r)){var o;let e,s,l=(o=r,(s=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(s=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),u=function(e,t){let r={...t};for(let n in t){let a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...i}:"className"===n&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(u.ref=t?(0,a.t)(t,l):l),n.cloneElement(r,u)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:a,...o}=e,s=n.Children.toArray(a),l=s.find(u);if(l){let e=l.props.children,a=s.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...o,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,i.jsx)(t,{...o,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var s=o("Slot"),l=Symbol("radix.slottable");function u(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},8208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return y},useLinkStatus:function(){return v}});let n=r(4295),a=r(644),i=n._(r(488)),o=r(3863),s=r(3209),l=r(8736),u=r(5965),c=r(3803);r(5408);let d=r(9680),p=r(5130),f=r(7040);r(5990);let h=r(7123);function m(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function y(e){var t;let r,n,o,[y,v]=(0,i.useOptimistic)(d.IDLE_LINK_STATUS),b=(0,i.useRef)(null),{href:w,as:_,children:x,prefetch:k=null,passHref:E,replace:I,shallow:T,scroll:S,onClick:O,onMouseEnter:A,onTouchStart:N,legacyBehavior:j=!1,onNavigate:C,ref:R,unstable_dynamicOnHover:P,...z}=e;r=x,j&&("string"==typeof r||"number"==typeof r)&&(r=(0,a.jsx)("a",{children:r}));let M=i.default.useContext(s.AppRouterContext),$=!1!==k,D=!1!==k?null===(t=k)||"auto"===t?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:F,as:L}=i.default.useMemo(()=>{let e=m(w);return{href:e,as:_?m(_):e}},[w,_]);j&&(n=i.default.Children.only(r));let Z=j?n&&"object"==typeof n&&n.ref:R,B=i.default.useCallback(e=>(null!==M&&(b.current=(0,d.mountLinkInstance)(e,F,M,D,$,v)),()=>{b.current&&((0,d.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,d.unmountPrefetchableInstance)(e)}),[$,F,M,D,v]),U={ref:(0,l.useMergedRef)(B,Z),onClick(e){j||"function"!=typeof O||O(e),j&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),M&&(e.defaultPrevented||function(e,t,r,n,a,o,s){let{nodeName:l}=e.currentTarget;if(!("A"===l.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,p.isLocalURL)(t)){a&&(e.preventDefault(),location.replace(t));return}if(e.preventDefault(),s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}i.default.startTransition(()=>{(0,f.dispatchNavigateAction)(r||t,a?"replace":"push",null==o||o,n.current)})}}(e,F,L,b,I,S,C))},onMouseEnter(e){j||"function"!=typeof A||A(e),j&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),M&&$&&(0,d.onNavigationIntent)(e.currentTarget,!0===P)},onTouchStart:function(e){j||"function"!=typeof N||N(e),j&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),M&&$&&(0,d.onNavigationIntent)(e.currentTarget,!0===P)}};return(0,u.isAbsoluteUrl)(L)?U.href=L:j&&!E&&("a"!==n.type||"href"in n.props)||(U.href=(0,c.addBasePath)(L)),o=j?i.default.cloneElement(n,U):(0,a.jsx)("a",{...z,...U,children:r}),(0,a.jsx)(g.Provider,{value:y,children:o})}let g=(0,i.createContext)(d.IDLE_LINK_STATUS),v=()=>(0,i.useContext)(g);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8292:(e,t,r)=>{"use strict";r.d(t,{Zq:()=>i,zs:()=>a});var n={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},a=new class{#Z=n;#B=!1;setTimeoutProvider(e){this.#Z=e}setTimeout(e,t){return this.#Z.setTimeout(e,t)}clearTimeout(e){this.#Z.clearTimeout(e)}setInterval(e,t){return this.#Z.setInterval(e,t)}clearInterval(e){this.#Z.clearInterval(e)}};function i(e){setTimeout(e,0)}},8299:(e,t,r)=>{"use strict";r.d(t,{Vx:()=>v,H4:()=>m,QL:()=>_,no:()=>d,Ni:()=>y,GF:()=>g});var n=r(544);let a={dbConnectionFailed:"DB_CONNECTION_FAILED",dbQueryFailed:"DB_QUERY_FAILED",dbRecordNotFound:"DB_RECORD_NOT_FOUND",dbMigrationFailed:"DB_MIGRATION_FAILED",dbIntegrityError:"DB_INTEGRITY_ERROR",apiValidationError:"API_VALIDATION_ERROR",apiAuthError:"API_AUTH_ERROR",apiRateLimit:"API_RATE_LIMIT",apiTimeout:"API_TIMEOUT",fileUploadFailed:"FILE_UPLOAD_FAILED",fileNotFound:"FILE_NOT_FOUND",fileProcessingError:"FILE_PROCESSING_ERROR",transcriptionFailed:"TRANSCRIPTION_FAILED",transcriptionTimeout:"TRANSCRIPTION_TIMEOUT",postProcessingFailed:"POST_PROCESSING_FAILED",audioProcessingError:"AUDIO_PROCESSING_ERROR",audioFormatUnsupported:"AUDIO_FORMAT_UNSUPPORTED",invalidOperation:"INVALID_OPERATION",resourceBusy:"RESOURCE_BUSY",concurrencyLimit:"CONCURRENCY_LIMIT",fileAlreadyProcessed:"FILE_ALREADY_PROCESSED",internalServerError:"INTERNAL_SERVER_ERROR",serviceUnavailable:"SERVICE_UNAVAILABLE",networkError:"NETWORK_ERROR",configurationError:"CONFIGURATION_ERROR"},i={DB_CONNECTION_FAILED:{severity:"critical",category:"database",retryable:!0,userFriendly:!0},DB_QUERY_FAILED:{severity:"high",category:"database",retryable:!0,userFriendly:!0},DB_RECORD_NOT_FOUND:{severity:"low",category:"database",retryable:!1,userFriendly:!0},DB_MIGRATION_FAILED:{severity:"critical",category:"database",retryable:!1,userFriendly:!1},DB_INTEGRITY_ERROR:{severity:"high",category:"database",retryable:!1,userFriendly:!0},API_VALIDATION_ERROR:{severity:"low",category:"validation",retryable:!1,userFriendly:!0},API_AUTH_ERROR:{severity:"high",category:"api",retryable:!1,userFriendly:!0},API_RATE_LIMIT:{severity:"medium",category:"api",retryable:!0,userFriendly:!0},API_TIMEOUT:{severity:"medium",category:"api",retryable:!0,userFriendly:!0},FILE_UPLOAD_FAILED:{severity:"high",category:"file",retryable:!0,userFriendly:!0},FILE_NOT_FOUND:{severity:"low",category:"file",retryable:!1,userFriendly:!0},FILE_PROCESSING_ERROR:{severity:"medium",category:"file",retryable:!0,userFriendly:!0},TRANSCRIPTION_FAILED:{severity:"high",category:"transcription",retryable:!0,userFriendly:!0},TRANSCRIPTION_TIMEOUT:{severity:"medium",category:"transcription",retryable:!0,userFriendly:!0},POST_PROCESSING_FAILED:{severity:"medium",category:"transcription",retryable:!0,userFriendly:!0},AUDIO_PROCESSING_ERROR:{severity:"high",category:"audio",retryable:!0,userFriendly:!0},AUDIO_FORMAT_UNSUPPORTED:{severity:"low",category:"audio",retryable:!1,userFriendly:!0},INVALID_OPERATION:{severity:"low",category:"business",retryable:!1,userFriendly:!0},RESOURCE_BUSY:{severity:"medium",category:"business",retryable:!0,userFriendly:!0},CONCURRENCY_LIMIT:{severity:"medium",category:"business",retryable:!0,userFriendly:!0},FILE_ALREADY_PROCESSED:{severity:"low",category:"business",retryable:!1,userFriendly:!0},INTERNAL_SERVER_ERROR:{severity:"critical",category:"system",retryable:!1,userFriendly:!0},SERVICE_UNAVAILABLE:{severity:"high",category:"system",retryable:!0,userFriendly:!0},NETWORK_ERROR:{severity:"medium",category:"network",retryable:!0,userFriendly:!0},CONFIGURATION_ERROR:{severity:"critical",category:"system",retryable:!1,userFriendly:!1}},o={DB_CONNECTION_FAILED:"数据库连接失败，请检查网络连接",DB_RECORD_NOT_FOUND:"请求的资源不存在",FILE_UPLOAD_FAILED:"文件上传失败，请重试",FILE_NOT_FOUND:"文件不存在",TRANSCRIPTION_FAILED:"音频转录失败，请检查音频质量",POST_PROCESSING_FAILED:"文本处理失败，请稍后重试",API_RATE_LIMIT:"请求过于频繁，请稍后再试",NETWORK_ERROR:"网络连接失败，请检查网络设置",INTERNAL_SERVER_ERROR:"系统内部错误，请联系技术支持",SERVICE_UNAVAILABLE:"服务暂时不可用，请稍后再试",API_VALIDATION_ERROR:"输入验证失败，请检查输入参数"},s=e=>i[e]||{severity:"medium",category:"system",retryable:!1,userFriendly:!0},l={database:{maxRetries:3,baseDelay:1e3,maxDelay:1e4,backoffFactor:2},api:{maxRetries:3,baseDelay:1e3,maxDelay:3e4,backoffFactor:2},network:{maxRetries:5,baseDelay:1e3,maxDelay:6e4,backoffFactor:2},file:{maxRetries:2,baseDelay:2e3,maxDelay:15e3,backoffFactor:1.5},audio:{maxRetries:2,baseDelay:2e3,maxDelay:1e4,backoffFactor:1.5},transcription:{maxRetries:3,baseDelay:5e3,maxDelay:6e4,backoffFactor:2},validation:{maxRetries:0,baseDelay:0,maxDelay:0,backoffFactor:1},security:{maxRetries:0,baseDelay:0,maxDelay:0,backoffFactor:1},business:{maxRetries:1,baseDelay:1e3,maxDelay:5e3,backoffFactor:1},system:{maxRetries:1,baseDelay:2e3,maxDelay:1e4,backoffFactor:1.5}},u={maxAttempts:3,baseDelay:1e3,maxDelay:3e4,backoffFactor:2,retryableErrors:["NETWORK_ERROR","TIMEOUT_ERROR","RATE_LIMIT_ERROR","ECONNRESET","ETIMEDOUT"],onRetry:()=>{},shouldRetry:e=>!0},c=null;function d(e){c=e}function p(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4?arguments[4]:void 0,l=a[e],u=s(l);try{n=Error().stack}catch(e){n=void 0}return{code:l,message:t,details:r,statusCode:i,timestamp:Date.now(),stack:n,context:{...o,timestamp:Date.now(),additional:{...null==o?void 0:o.additional,severity:u.severity,category:u.category}}}}function f(e,t){let r={timestamp:Date.now(),component:t,additional:{...e.details||{},stack:b(e)}};t?"[".concat(t,"] ").concat(e.code,": ").concat(e.message):"".concat(e.code,": ").concat(e.message),c&&c.logError(e,r),function(e,t){try{let r=v(),n={id:"error_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:t.timestamp||Date.now(),level:"error",message:e.message,code:e.code,context:t,stack:b(e)};r.push(n),r.length>100&&r.splice(0,r.length-100),localStorage.setItem("app_error_logs",JSON.stringify(r))}catch(e){}}(e,r)}function h(e){return"object"==typeof e&&null!==e&&"code"in e&&"message"in e&&"statusCode"in e}function m(e,t){if(h(e))return f(e,t),e;if("string"==typeof e){let r=p("internalServerError",e,void 0,500);return f(r,t),r}if(e instanceof Error){let r=p("internalServerError",e.message,{stack:e.stack},500);return f(r,t),r}let r=p("internalServerError","未知错误","object"==typeof e&&null!==e?{error:e}:void 0,500);return f(r,t),r}function y(e){let t=o[(h(e)?e:m(e)).code]||"发生未知错误，请重试";n.toast.error(t)}function g(e){n.toast.success(e)}function v(){try{let e=localStorage.getItem("app_error_logs");return e?JSON.parse(e):[]}catch(e){return[]}}function b(e){if("object"==typeof e&&null!==e&&"stack"in e){let t=e.stack;if("string"==typeof t)return t}}class w{addError(e){let t=this.getErrorKey(e),r=Date.now(),n=this.recentErrors.get(t);return n&&r-n.lastSeen<this.windowMs?(n.count++,n.lastSeen=r,{isNew:!1,count:n.count}):(this.recentErrors.set(t,{count:1,lastSeen:r,error:e}),this.cleanup(),{isNew:!0,count:1})}getErrorKey(e){var t,r;return"".concat(e.code,"_").concat(e.message,"_").concat(null==(t=e.context)?void 0:t.component,"_").concat(null==(r=e.context)?void 0:r.action)}cleanup(){let e=Date.now();for(let[t,r]of this.recentErrors)e-r.lastSeen>this.windowMs&&this.recentErrors.delete(t)}getStats(){let e=Array.from(this.recentErrors.entries()).sort((e,t)=>t[1].count-e[1].count).slice(0,10);return{totalUniqueErrors:this.recentErrors.size,topErrors:e.map(e=>{let[t,r]=e;return{error:r.error,count:r.count}})}}constructor(e=6e4){this.recentErrors=new Map,this.windowMs=e}}function _(e){if(e instanceof Error){let t=e.message.toLowerCase();return t.includes("groq_api_key")||t.includes("环境变量未设置")||t.includes("api key")||t.includes("authentication")}return!1}new w},8371:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7020).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8661:(e,t)=>{"use strict";function r(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function a(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,n(e));else t.set(r,n(a));return t}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(let t of r){for(let r of t.keys())e.delete(r);for(let[r,n]of t.entries())e.append(r,n)}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return i},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return a}})},8736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=r(488);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=i(e,n)),t&&(a.current=i(t,n))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8823:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(7020).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8858:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{SYMBOL_FOR_REQ_CONTEXT:()=>o,getContext:()=>s}),e.exports=((e,i,o,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))a.call(e,l)||l===o||t(e,l,{get:()=>i[l],enumerable:!(s=r(i,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let o=Symbol.for("@vercel/request-context");function s(){let e=globalThis;return e[o]?.get?.()??{}}},9197:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var n=r(693);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=n.$,o=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:s}=t,l=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;let i=a(t)||a(n);return o[e][i]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return i(e,l,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...u}[t]):({...s,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},e=>{e.O(0,[358],()=>e(e.s=1572)),_N_E=e.O()}]);